import{h as ve}from"./permission-CLsC86kj.js";import{_ as ie}from"./ConfirmDialog-DGr_TjOb.js";import{_ as ue}from"./AppSelect-sCpAkh9g.js";import{_ as re}from"./AppTextField-BUftseOH.js";import{_ as fe}from"./AppDrawerHeaderSection-DGGUyj3A.js";import{_ as de}from"./AppTextarea-BtM6UT60.js";import{P as ye}from"./vue3-perfect-scrollbar.esm-niQJXBID.js";import{$ as te}from"./api-BR-notFO.js";import{V as ce}from"./VDivider-eIfErnx6.js";import{V as A}from"./VCard-DwAIWTtj.js";import{V as M}from"./VCardText-CCICqem6.js";import{V as ae,a as f}from"./VRow-DQHCymE-.js";import{r as t,w as se,o as p,f as K,e as l,b as e,m as pe,c as x,y,ah as v,t as m,$ as J,d as o,v as r,b0 as _e,F as ne,E as Ve,h as ge}from"./index-BWmc9D7q.js";import{V as q}from"./VDialog-BxUFRItq.js";import{V as xe}from"./VNavigationDrawer-Dds1uTkh.js";import{_ as be}from"./DialogCloseBtn-DL3IhstY.js";import{V as me}from"./VCardTitle-BiBDmMHg.js";import{V as he}from"./VForm-CZ013UaL.js";import{V as De}from"./VTable-CAE3d_eS.js";import{V as Y}from"./VChip-DAx_VQqV.js";import"./form-D7AxQydL.js";import"./VSelect-KF-FMU3V.js";import"./VTextField-NjFwxG9Q.js";/* empty css                   */import"./VCounter-DTrH-dp4.js";import"./index-cSpuP_mh.js";import"./transition-D8fUkAQ0.js";import"./VField-DbMgx1pq.js";import"./easing-CjukEv2V.js";import"./VInput-CvX9XyKe.js";import"./forwardRefs-C-GTDzx5.js";import"./VImg-DgAVN1eN.js";import"./VList-BzFiGpDN.js";import"./ssrBoot-DYCHNUBn.js";import"./createSimpleFunctional-CZq7WqvO.js";import"./VAvatar-B-7-bjFK.js";import"./dialog-transition-C1Gkv31q.js";import"./VMenu-Df012LrC.js";import"./VOverlay-CTb-qo5Z.js";import"./lazy-BF-e1s-n.js";import"./scopeId-Bm9Jyer5.js";import"./VCheckboxBtn-BE-1U6Bp.js";import"./VSelectionControl-zLuTyjSK.js";import"./VSpacer-BARnLNym.js";/* empty css              */import"./VTextarea-2O8Ra1CI.js";import"./index-B3bPRkoL.js";import"./VSlideGroup-OoRwW790.js";const Ee={key:0,class:"text-error",style:{"font-size":"12px"}},we={key:1,class:"text-error",style:{"font-size":"12px"}},Ce={key:0,class:"text-error",style:{"font-size":"12px"}},ke={key:0,class:"text-error",style:{"font-size":"12px"}},Oe={key:0,class:"text-error",style:{"font-size":"12px"}},$e={key:0,class:"text-error",style:{"font-size":"12px"}},Ae={class:"text-h4 mb-4"},Ue=o("span",{class:"text-5xl font-weight-light"},"X",-1),Te={class:"text-h4 mb-4"},Se={__name:"AddEventDialog",props:{isDrawerOpen:{type:Boolean,required:!0}},emits:["update:isDrawerOpen","userData"],setup(Q,{emit:N}){t(!1),t(!1),t();const _=t(""),z=t(""),U=t(null),L=t(null),b=t(null),w=t(null),h=t(!1),C=t(!1),V=t(!1),D=t(!1),g=t(!1),k=t(!1),P=t(!1),R=t(""),W=t(""),I=t(""),O=t(""),T=t(null),i=t(!1),u=t(!1),E=t(!1),$=t(!1),G=[{text:"Low",value:"LOW"},{text:"Medium",value:"MEDIUM"},{text:"High",value:"HIGH"}],s=[{text:"Global",value:"GLOBAL"},{text:"Personal",value:"PERSONAL"}],F=Q,d=N,n=B=>{d("update:isDrawerOpen",B)},H=()=>{d("update:isDrawerOpen",!1)},j=async B=>{var a,ee;if(B){g.value=!0,k.value=!0;try{const S=await te("schedule/add",{method:"POST",body:{title:_.value,short_description:z.value,priority:U.value,type:L.value,date:b.value,location:w.value},onResponseError({response:X}){var le;console.log("Error response:",X),I.value="Something Went Wrong!",O.value=((le=X._data)==null?void 0:le.message)||"Error occurred",g.value=!1,k.value=!1,V.value=!0}});console.log("API response:",S),S&&(R.value="Success!",W.value="Event added successfully!",g.value=!1,k.value=!1,D.value=!0)}catch(S){console.log("API error:",S),I.value="Something Went Wrong!",O.value=((ee=(a=S.response)==null?void 0:a.data)==null?void 0:ee.message)||S.message,g.value=!1,k.value=!1,V.value=!0}}};se([_,w],([B,a])=>{B.length>=255?h.value=!0:h.value=!1,a.length>=255?C.value=!0:C.value=!1},{deep:!0,immediate:!1});function oe(){i.value=!1,u.value=!1,E.value=!1,$.value=!1,_.value||(i.value=!0),U.value||(u.value=!0),L.value||(E.value=!0),b.value||($.value=!0),_.value&&U.value&&L.value&&b.value?(T.value=!0,P.value=!0):T.value=!1}const Z=()=>{window.location.reload()};return(B,a)=>{const ee=fe,S=re,X=ue,le=ie;return p(),K(xe,{temporary:"",width:400,location:"end",class:"scrollable-content","model-value":F.isDrawerOpen,"onUpdate:modelValue":n},{default:l(()=>[e(ee,{title:"Add New Event",onCancel:H}),e(ce),e(pe(ye),{options:{wheelPropagation:!1}},{default:l(()=>[e(A,{flat:""},{default:l(()=>[e(M,null,{default:l(()=>[e(ae,null,{default:l(()=>[e(f,{cols:"12"},{default:l(()=>[e(S,{modelValue:_.value,"onUpdate:modelValue":a[0]||(a[0]=c=>_.value=c),label:"Event Title",placeholder:"Enter event title"},null,8,["modelValue"]),h.value?(p(),x("span",Ee,"Only 255 characters are allowed")):y("",!0),i.value?(p(),x("span",we," Event title is mandatory ")):y("",!0)]),_:1}),e(f,{cols:"12"},{default:l(()=>[e(de,{modelValue:z.value,"onUpdate:modelValue":a[1]||(a[1]=c=>z.value=c),label:"Description",placeholder:"Enter short description"},null,8,["modelValue"])]),_:1}),e(f,{cols:"12"},{default:l(()=>[e(X,{modelValue:U.value,"onUpdate:modelValue":a[2]||(a[2]=c=>U.value=c),items:G,"item-title":"text","item-value":"value",label:"Priority","single-line":""},null,8,["modelValue"]),u.value?(p(),x("span",Ce," Event priority is mandatory ")):y("",!0)]),_:1}),e(f,{cols:"12"},{default:l(()=>[e(X,{modelValue:L.value,"onUpdate:modelValue":a[3]||(a[3]=c=>L.value=c),items:s,"item-title":"text","item-value":"value",label:"Type","single-line":""},null,8,["modelValue"]),E.value?(p(),x("span",ke," Event type is mandatory ")):y("",!0)]),_:1}),e(f,{cols:"12"},{default:l(()=>[e(S,{modelValue:b.value,"onUpdate:modelValue":a[4]||(a[4]=c=>b.value=c),label:"Date",placeholder:"Enter event date",type:"date"},null,8,["modelValue"]),$.value?(p(),x("span",Oe," Event date is mandatory ")):y("",!0)]),_:1}),e(f,{cols:"12"},{default:l(()=>[e(S,{modelValue:w.value,"onUpdate:modelValue":a[5]||(a[5]=c=>w.value=c),label:"Location",placeholder:"Enter event location"},null,8,["modelValue"]),C.value?(p(),x("span",$e,"Only 255 characters are allowed")):y("",!0)]),_:1}),e(f,{cols:"12"},{default:l(()=>[e(v,{class:"me-3",onClick:a[6]||(a[6]=c=>oe()),loading:g.value,disabled:k.value},{default:l(()=>[m(" Add ")]),_:1},8,["loading","disabled"]),e(v,{type:"reset",variant:"tonal",color:"error",onClick:H},{default:l(()=>[m(" Cancel ")]),_:1})]),_:1})]),_:1})]),_:1}),e(le,{isDialogVisible:P.value,"onUpdate:isDialogVisible":a[7]||(a[7]=c=>P.value=c),onConfirm:j,"confirmation-question":"Are you sure you want to add this event?","cancel-title":"Cancelled","confirm-title":"Confirmed!"},null,8,["isDialogVisible"]),e(q,{modelValue:D.value,"onUpdate:modelValue":a[8]||(a[8]=c=>D.value=c),"max-width":"500"},{default:l(()=>[e(A,null,{default:l(()=>[e(M,{class:"text-center px-10 py-6"},{default:l(()=>[e(v,{icon:"",variant:"outlined",color:"success",class:"my-4",style:{"block-size":"88px","inline-size":"88px","pointer-events":"none"}},{default:l(()=>[e(J,{icon:"tabler-check",size:"38"})]),_:1}),o("h1",Ae,r(R.value),1),o("p",null,r(W.value),1),e(v,{color:"success",onClick:Z},{default:l(()=>[m("OK")]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),e(q,{modelValue:V.value,"onUpdate:modelValue":a[10]||(a[10]=c=>V.value=c),"max-width":"500"},{default:l(()=>[e(A,null,{default:l(()=>[e(M,{class:"text-center px-10 py-6"},{default:l(()=>[e(v,{icon:"",variant:"outlined",color:"error",class:"my-4",style:{"block-size":"88px","inline-size":"88px","pointer-events":"none"}},{default:l(()=>[Ue]),_:1}),o("h1",Te,r(I.value),1),o("p",null,r(O.value),1),e(v,{color:"error",onClick:a[9]||(a[9]=c=>V.value=!1)},{default:l(()=>[m("OK")]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1},8,["model-value"])}}},Me={key:0,class:"text-error",style:{"font-size":"12px"}},ze={key:0,class:"text-error",style:{"font-size":"12px"}},Le={class:"text-h4 mb-4"},Pe=o("span",{class:"text-5xl font-weight-light"},"X",-1),Ie={class:"text-h4 mb-4"},Be={__name:"EditEventDialog",props:{isDialogVisible:{type:Boolean,required:!0},selectedEvent:{type:Object,required:!1}},emits:["submit","update:isDialogVisible"],setup(Q,{emit:N}){const _=Q,z=N,U=[{text:"Low",value:"LOW"},{text:"Medium",value:"MEDIUM"},{text:"High",value:"HIGH"}],L=[{text:"Global",value:"GLOBAL"},{text:"Personal",value:"PERSONAL"}],b=t(!1),w=t(!1),h=t(!1),C=t(!1),V=t(!1),D=t(!1),g=t(!1),k=t(""),P=t(""),R=t(""),W=t(""),I=t(null),O=t(""),T=t(""),i=t(null),u=t(null),E=t(null),$=t("");se(()=>_.selectedEvent,d=>{d&&(I.value=d.id,O.value=d.title||"",T.value=d.short_description||"",i.value=d.priority||"",u.value=d.type||"",E.value=d.date||"",$.value=d.location||"")},{immediate:!0});const G=d=>{z("update:isDialogVisible",d)},s=async d=>{var n;if(d){D.value=!0,g.value=!0;try{await te("schedule/update",{method:"POST",body:{id:I.value,title:O.value,short_description:T.value,priority:i.value,type:u.value,date:E.value,location:$.value}})&&(R.value="Updated!",W.value="Event data updated successfully!",D.value=!1,g.value=!1,w.value=!0)}catch(H){k.value="Something went wrong!",P.value=((n=H.data)==null?void 0:n.message)||"Unknown error occurred.",D.value=!1,g.value=!1,h.value=!0}}};se([O,$],([d,n])=>{d.length>=255?C.value=!0:C.value=!1,n.length>=255?V.value=!0:V.value=!1},{deep:!0,immediate:!1});const F=async d=>{window.location.reload()};return(d,n)=>{const H=be,j=re,oe=de,Z=ue,B=ie;return p(),x(ne,null,[e(q,{width:d.$vuetify.display.smAndDown?"auto":600,"model-value":_.isDialogVisible,"onUpdate:modelValue":G},{default:l(()=>[e(H,{onClick:n[0]||(n[0]=a=>G(!1))}),e(A,null,{default:l(()=>[e(me,{class:"pt-3"},{default:l(()=>[m("Update Event")]),_:1}),e(ce),e(M,null,{default:l(()=>[e(he,{onSubmit:_e(()=>{},["prevent"])},{default:l(()=>[e(ae,null,{default:l(()=>[e(f,{cols:"12"},{default:l(()=>[e(j,{modelValue:O.value,"onUpdate:modelValue":n[1]||(n[1]=a=>O.value=a),label:"Event Title"},null,8,["modelValue"]),C.value?(p(),x("span",Me,"Only 255 characters are allowed")):y("",!0)]),_:1}),e(f,{cols:"12"},{default:l(()=>[e(oe,{modelValue:T.value,"onUpdate:modelValue":n[2]||(n[2]=a=>T.value=a),label:"Description"},null,8,["modelValue"])]),_:1}),e(f,{cols:"12",md:"6"},{default:l(()=>[e(Z,{modelValue:i.value,"onUpdate:modelValue":n[3]||(n[3]=a=>i.value=a),items:U,"item-title":"text","item-value":"value",label:"Priority","single-line":""},null,8,["modelValue"])]),_:1}),e(f,{cols:"12",md:"6"},{default:l(()=>[e(Z,{modelValue:u.value,"onUpdate:modelValue":n[4]||(n[4]=a=>u.value=a),items:L,"item-title":"text","item-value":"value",label:"Type","single-line":""},null,8,["modelValue"])]),_:1}),e(f,{cols:"12",md:"6"},{default:l(()=>[e(j,{modelValue:E.value,"onUpdate:modelValue":n[5]||(n[5]=a=>E.value=a),label:"Date",placeholder:"Enter event date",type:"date"},null,8,["modelValue"])]),_:1}),e(f,{cols:"12",md:"6"},{default:l(()=>[e(j,{modelValue:$.value,"onUpdate:modelValue":n[6]||(n[6]=a=>$.value=a),label:"Location",placeholder:"Enter event location"},null,8,["modelValue"]),V.value?(p(),x("span",ze,"Only 255 characters are allowed")):y("",!0)]),_:1})]),_:1})]),_:1})]),_:1}),e(M,{class:"d-flex justify-end flex-wrap gap-3"},{default:l(()=>[e(v,{variant:"tonal",color:"secondary",onClick:n[7]||(n[7]=a=>G(!1))},{default:l(()=>[m(" Close ")]),_:1}),e(v,{class:"me-2",color:"primary",onClick:n[8]||(n[8]=a=>b.value=!0),loading:D.value,disabled:g.value},{default:l(()=>[m(" Update ")]),_:1},8,["loading","disabled"])]),_:1})]),_:1})]),_:1},8,["width","model-value"]),e(B,{isDialogVisible:b.value,"onUpdate:isDialogVisible":n[9]||(n[9]=a=>b.value=a),onConfirm:s,"confirmation-question":"Are you sure you want to update this Event?","cancel-title":"Cancelled","confirm-title":"Cancelled!"},null,8,["isDialogVisible"]),e(q,{modelValue:w.value,"onUpdate:modelValue":n[11]||(n[11]=a=>w.value=a),"max-width":"500"},{default:l(()=>[e(A,null,{default:l(()=>[e(M,{class:"text-center px-10 py-6"},{default:l(()=>[e(v,{icon:"",variant:"outlined",color:"success",class:"my-4",style:{"block-size":"88px","inline-size":"88px","pointer-events":"none"}},{default:l(()=>[e(J,{icon:"tabler-check",size:"38"})]),_:1}),o("h1",Le,r(R.value),1),o("p",null,r(W.value),1),e(v,{color:"success",onClick:n[10]||(n[10]=a=>F())},{default:l(()=>[m(" OK ")]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),e(q,{modelValue:h.value,"onUpdate:modelValue":n[12]||(n[12]=a=>h.value=a),"max-width":"500"},{default:l(()=>[e(A,null,{default:l(()=>[e(M,{class:"text-center px-10 py-6"},{default:l(()=>[e(v,{icon:"",variant:"outlined",color:"error",class:"my-4",style:{"block-size":"88px","inline-size":"88px","pointer-events":"none"}},{default:l(()=>[Pe]),_:1}),o("h1",Ie,r(k.value),1),o("p",null,r(P.value),1),e(v,{color:"success",onClick:F},{default:l(()=>[m(" Ok ")]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])],64)}}},Ne={class:"d-flex mb-6"},Re={class:"d-flex align-center justify-space-between"},We={key:0},Ge=o("thead",null,[o("tr",null,[o("th",null,"ID"),o("th",null,"TITLE"),o("th",null,"DESCRIPTION"),o("th",null,"PRIORITY"),o("th",null,"TYPE"),o("th",null,"DATE"),o("th",null,"LOCATION"),o("th",null,"ACTION")])],-1),He={class:"tip-text"},qe={class:"text-h4 mb-4"},Fe=o("span",{class:"text-5xl font-weight-light"},"X",-1),Ke={class:"text-h4 mb-4"},Wl={__name:"manage-events",setup(Q){const N=t(!1),_=t(!1),z=t(!1),U=t([]),L=t(null),b=t(null),w=t(null),h=t(!1),C=t(!1),V=t(""),D=t(""),g=t(""),k=t(""),P=async()=>{try{const i=await te("schedule/list",{method:"GET"});i&&(U.value=i.data)}catch(i){console.error("Error fetching event list:",i),L.value=i}};function R(i){console.log("Editing event:",i),b.value=i,_.value=!0}function W(){N.value=!0}function I(i){w.value=i.id,z.value=!0}const O=async i=>{if(i)try{await te("schedule/delete",{method:"POST",body:{id:w.value},onResponseError({response:E}){V.value="Something Went Wrong!",D.value=E._data.message,h.value=!0}})&&(g.value="Deleted!",k.value="Event Deleted Successfully!",C.value=!0)}catch(u){V.value="Something Went Wrong!",D.value=u.data.message,h.value=!0}},T=async i=>{window.location.reload()};return Ve(async()=>{await P()}),(i,u)=>{const E=Be,$=Se,G=ie;return p(),x(ne,null,[o("section",null,[o("div",Ne,[e(ae,null,{default:l(()=>[e(f,{cols:"12"},{default:l(()=>[e(A,null,{default:l(()=>[e(M,null,{default:l(()=>[o("div",Re,[e(me,null,{default:l(()=>[m(" Manage Events ")]),_:1}),("hasAccess"in i?i.hasAccess:pe(ve))("add_staff")?(p(),x("div",We,[e(v,{class:"me-2",onClick:W},{default:l(()=>[m("Add Event")]),_:1})])):y("",!0)])]),_:1})]),_:1})]),_:1})]),_:1})]),e(A,{class:"mb-6"},{default:l(()=>[e(ae,null,{default:l(()=>[e(f,{cols:"12"},{default:l(()=>[e(A,null,{default:l(()=>[e(De,{height:"800","fixed-header":"",class:"text-no-wrap"},{default:l(()=>[Ge,o("tbody",null,[(p(!0),x(ne,null,ge(U.value,s=>(p(),x("tr",{key:s.id},[o("td",null,r(s.id),1),o("td",null,r(s.title),1),o("td",He,r(s.short_description),1),o("td",null,[s.priority==="HIGH"?(p(),K(Y,{key:0,color:"error",label:!1},{default:l(()=>[m(r(s.priority),1)]),_:2},1024)):y("",!0),s.priority==="LOW"?(p(),K(Y,{key:1,color:"info",label:!1},{default:l(()=>[m(r(s.priority),1)]),_:2},1024)):y("",!0),s.priority==="MEDIUM"?(p(),K(Y,{key:2,color:"warning",label:!1},{default:l(()=>[m(r(s.priority),1)]),_:2},1024)):y("",!0)]),o("td",null,[s.type==="GLOBAL"?(p(),K(Y,{key:0,color:"primary",label:"",size:"small",variant:"outlined"},{default:l(()=>[m(r(s.type),1)]),_:2},1024)):y("",!0),s.type==="PERSONAL"?(p(),K(Y,{key:1,color:"info",label:"",size:"small",variant:"outlined"},{default:l(()=>[m(r(s.type),1)]),_:2},1024)):y("",!0)]),o("td",null,r(s.date),1),o("td",null,r(s.location),1),o("td",null,[e(J,{icon:"tabler-edit",class:"me-2",onClick:F=>R(s)},null,8,["onClick"]),e(J,{icon:"tabler-trash",onClick:F=>I(s)},null,8,["onClick"])])]))),128))])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),e(E,{isDialogVisible:_.value,"onUpdate:isDialogVisible":u[0]||(u[0]=s=>_.value=s),selectedEvent:b.value},null,8,["isDialogVisible","selectedEvent"]),e($,{isDrawerOpen:N.value,"onUpdate:isDrawerOpen":u[1]||(u[1]=s=>N.value=s)},null,8,["isDrawerOpen"]),e(G,{isDialogVisible:z.value,"onUpdate:isDialogVisible":u[2]||(u[2]=s=>z.value=s),onConfirm:O,"confirmation-question":"Are you sure you want to delete this event?","cancel-title":"Cancelled","confirm-title":"Cancelled!"},null,8,["isDialogVisible"]),e(q,{modelValue:C.value,"onUpdate:modelValue":u[4]||(u[4]=s=>C.value=s),"max-width":"500"},{default:l(()=>[e(A,null,{default:l(()=>[e(M,{class:"text-center px-10 py-6"},{default:l(()=>[e(v,{icon:"",variant:"outlined",color:"success",class:"my-4",style:{"block-size":"88px","inline-size":"88px","pointer-events":"none"}},{default:l(()=>[e(J,{icon:"tabler-check",size:"38"})]),_:1}),o("h1",qe,r(g.value),1),o("p",null,r(k.value),1),e(v,{color:"success",onClick:u[3]||(u[3]=s=>T())},{default:l(()=>[m(" OK ")]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),e(q,{modelValue:h.value,"onUpdate:modelValue":u[5]||(u[5]=s=>h.value=s),"max-width":"500"},{default:l(()=>[e(A,null,{default:l(()=>[e(M,{class:"text-center px-10 py-6"},{default:l(()=>[e(v,{icon:"",variant:"outlined",color:"error",class:"my-4",style:{"block-size":"88px","inline-size":"88px","pointer-events":"none"}},{default:l(()=>[Fe]),_:1}),o("h1",Ke,r(V.value),1),o("p",null,r(D.value),1),e(v,{color:"success",onClick:T},{default:l(()=>[m(" Ok ")]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])],64)}}};export{Wl as default};
