import{h as _}from"./permission-C67DBf12.js";import{f as fe}from"./formatters-MfVJSZma.js";import{r as ve}from"./validators-DpYrMFzk.js";import{r as s,E as ue,w as H,o as u,c as p,b as e,e as o,t as v,d as i,v as h,b0 as _e,m as n,aV as j,f as g,y as m,ah as R,$ as J,F as ie,a4 as ne,cn as he,j as be,h as re}from"./index-efgKc9NB.js";import{_ as Ve}from"./ConfirmDialog-vSalutM3.js";import{_ as ce}from"./AppSelect-DLhgBoDS.js";import{_ as ye}from"./DialogCloseBtn-BC2GzKjH.js";import{$ as K}from"./api-CNfEyctM.js";import{V as Y}from"./VCard-DPoDX_Z1.js";import{V as de}from"./VCardTitle-BLh0WjM9.js";import{V as Q}from"./VDivider-dKq96jk0.js";import{V as me}from"./VTable-DPDfntvj.js";import{V as ge}from"./VForm-BVDlK2z-.js";import{V as T}from"./VCardText-DkGVt3gJ.js";import{V as pe,a as L}from"./VRow-D5kBNLTW.js";import{V as Ae}from"./VAlert-DiliTm77.js";import{V as oe}from"./VDialog-ILlSiaql.js";import{_ as De}from"./CustomStaffCardChip-dHNdmd68.js";import{_ as we}from"./CustomClientCardChip-Ca3zz1rU.js";import{_ as ke}from"./AppTextField-DjhsYOXp.js";import{_ as Ce}from"./CustomManagerSelectWidget-eD0z-039.js";import{f as Se,g as Re}from"./apiUtils-CqrJ3ZYm.js";import{V as Ee}from"./VSpacer-BCSuGXY6.js";import{V as se}from"./VChip-DkUuMAST.js";import{V as O}from"./VAvatar-DM9HRMFy.js";import{V as Me}from"./VSkeletonLoader-DC6GJB-l.js";import{V as $e}from"./VPagination-CoXUZFIg.js";import"./helpers-DK5QwNv0.js";import"./form-C1xz5XaQ.js";import"./VSelect-By-SUCWT.js";import"./VTextField-DGjyG42C.js";/* empty css                   */import"./VCounter-Ypd3z504.js";import"./index-NNGrzUeA.js";import"./transition-DDhE5sLa.js";import"./VField-CcCVIk8B.js";import"./easing-CjukEv2V.js";import"./VInput-hzbfW5An.js";import"./forwardRefs-C-GTDzx5.js";import"./VImg-B5WtqbEt.js";import"./VList-Cxfhv4Yg.js";import"./ssrBoot-BDO2aDmV.js";import"./createSimpleFunctional-BThGFhhx.js";import"./dialog-transition-C5uZYdom.js";import"./VMenu-CzzHeHVm.js";import"./VOverlay-C0uFO4s-.js";import"./lazy-BsXFeJHd.js";import"./scopeId-D3aw7BNF.js";import"./VCheckboxBtn-DBLfjtsB.js";import"./VSelectionControl-BdM2jDHr.js";import"./index-B3bPRkoL.js";/* empty css              */import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./useApi-ASVABIY4.js";import"./VSlideGroup-CuG3YlRx.js";const xe=i("thead",null,[i("tr",null,[i("th",null,"NAME"),i("th",null,"EMAIL ID"),i("th",null,"PHONE NO"),i("th",null,"MANAGER")])],-1),Ie={class:"text-h4 mb-4"},Te=i("span",{class:"text-5xl font-weight-light"},"X",-1),Be={class:"text-h4 mb-4"},qe={__name:"ApproveIbRequestDialog",props:{ibdetails:{type:Object,required:!1},isDialogVisible:{type:Boolean,required:!0}},emits:["submit","update:isDialogVisible"],setup(B,{emit:q}){const E=s(null),M=s(null),f=s([]),b=s(null),C=s(null),X=s(null),A=s(null),$=s(null),V=s(!1),S=s(!1),U=s(!1),N=s(!1),y=s(!1),D=s(!1);let x=s(""),I=s(""),k=s(""),z=s("");const W=B,Z=q,F=r=>{Z("update:isDialogVisible",r)};ue(async()=>{await ee(),await le()});const ee=async()=>{try{const r=await K("/getAllmt5Groups",{method:"GET",onResponseError({response:a}){console.error("Error response:",a)}});r?(E.value=r.mt5Groups,M.value=E.value.filter(a=>a.ib_enabled===1)):console.error("Failed to fetch group list or empty response")}catch(r){console.error("Error fetching group list:",r)}};H([f],r=>{f.value.length>3&&(C.value=!0)},{deep:!0,immediate:!1}),H(()=>W.ibdetails,r=>{r&&(A.value=r.id)},{immediate:!0}),H(f,r=>{r.length>3?(f.value=r.slice(0,3),C.value=!0):C.value=!1},{deep:!0,immediate:!1}),H(()=>W.ibdetails,r=>{r&&(A.value=r.id,console.log(A.value,"value"))},{immediate:!0});const le=async()=>{const r=await K(`/IbRequestDefaultGroupListing/${A.value}`,{method:"GET",onResponseError({response:a}){}});X.value=r.ib_plans};function te(){b.value===null||f.value.length===0?$.value=!1:($.value=!0,U.value=!0)}function t(){N.value=!0}const c=async r=>{if(r){V.value=!0;try{const a=new FormData;a.append("client_id",A.value),a.append("plan_id",b.value),a.append("action",1),f.value.forEach(w=>{a.append("mt_group_list[]",w)}),await K("/ApproveIbRequest",{method:"POST",body:a,onResponseError({response:w}){x.value="Something Went Wrong !",I.value=w._data.message,y.value=!0,V.value=!1}})&&(k.value="Success !",z.value="IB Request Approved Successfully !",D.value=!0,V.value=!1)}catch(a){x.value="Something Went Wrong !",I.value=a.data.message,y.value=!0,V.value=!1}}else V.value=!1},P=async r=>{if(r){S.value=!0;try{const a=new FormData;a.append("client_id",A.value),a.append("plan_id",b.value),a.append("action",2),await K("/ApproveIbRequest",{method:"POST",body:a,onResponseError({response:w}){x.value="Something Went Wrong !",I.value=w._data.message,y.value=!0,S.value=!1}})&&(k.value="Success !",z.value="IB Request Rejected Successfully !",D.value=!0,S.value=!1)}catch(a){x.value="Something Went Wrong !",I.value=a.data.message,y.value=!0,S.value=!1}}else S.value=!1},ae=async r=>{window.location.reload()};return(r,a)=>{const G=ye,w=ce,l=Ve;return u(),p(ie,null,[e(oe,{width:r.$vuetify.display.smAndDown?"auto":800,"model-value":W.isDialogVisible,"onUpdate:modelValue":F},{default:o(()=>[e(G,{onClick:a[0]||(a[0]=d=>F(!1))}),e(Y,null,{default:o(()=>[e(de,null,{default:o(()=>[v("Approve/Reject IB Request")]),_:1}),e(Q),e(me,{class:"text-no-wrap"},{default:o(()=>[xe,i("tbody",null,[i("tr",null,[i("td",null,h(B.ibdetails.client_name),1),i("td",null,h(B.ibdetails.email),1),i("td",null,h(B.ibdetails.contact_no),1),i("td",null,h(B.ibdetails.rm_name),1)])])]),_:1}),e(Q),e(ge,{onSubmit:_e(()=>{},["prevent"])},{default:o(()=>[e(T,null,{default:o(()=>[e(pe,null,{default:o(()=>[e(L,{cols:"6"},{default:o(()=>[e(w,{modelValue:n(f),"onUpdate:modelValue":a[1]||(a[1]=d=>j(f)?f.value=d:null),items:n(M),"item-title":"mt_group_name","item-value":"id",multiple:"","persistent-hint":"",label:"Select Group"},null,8,["modelValue","items"])]),_:1}),e(L,{cols:"6"},{default:o(()=>[e(w,{modelValue:n(b),"onUpdate:modelValue":a[2]||(a[2]=d=>j(b)?b.value=d:null),items:n(X),"item-title":"plan_name","item-value":"id",label:"Select Plan","single-line":"",rules:["requiredValidator"in r?r.requiredValidator:n(ve)]},null,8,["modelValue","items","rules"]),n($)===!1?(u(),g(Ae,{key:0,type:"error",class:"mt-2"},{default:o(()=>[v(" All fields are mandatory ")]),_:1})):m("",!0)]),_:1})]),_:1})]),_:1}),e(T,{class:"d-flex justify-end gap-3"},{default:o(()=>[e(R,{color:"primary",class:"me-2",loading:n(V),disabled:n(V),onClick:te},{default:o(()=>[v(" Approve "),e(J,{end:"",icon:"tabler-discount-check-filled"})]),_:1},8,["loading","disabled"]),e(R,{color:"error",loading:n(S),disabled:n(V),class:"me-2",onClick:t},{default:o(()=>[v(" Reject "),e(J,{end:"",icon:"tabler-circle-x"})]),_:1},8,["loading","disabled"])]),_:1})]),_:1})]),_:1})]),_:1},8,["width","model-value"]),e(l,{isDialogVisible:n(U),"onUpdate:isDialogVisible":a[3]||(a[3]=d=>j(U)?U.value=d:null),onConfirm:c,"confirmation-question":"Do you want to approve the IB request?","cancel-title":"Cancelled","confirm-title":"Cancelled!"},null,8,["isDialogVisible"]),e(l,{isDialogVisible:n(N),"onUpdate:isDialogVisible":a[4]||(a[4]=d=>j(N)?N.value=d:null),onConfirm:P,"confirmation-question":"Do you want to reject the IB request?","confirm-title":"Confirm","cancel-title":"Cancel"},null,8,["isDialogVisible"]),e(oe,{modelValue:n(D),"onUpdate:modelValue":a[6]||(a[6]=d=>j(D)?D.value=d:null),"max-width":"500"},{default:o(()=>[e(Y,null,{default:o(()=>[e(T,{class:"text-center px-10 py-6"},{default:o(()=>[e(R,{icon:"",variant:"outlined",color:"success",class:"my-4",style:{"block-size":"88px","inline-size":"88px","pointer-events":"none"}},{default:o(()=>[e(J,{icon:"tabler-check",size:"38"})]),_:1}),i("h1",Ie,h(n(k)),1),i("p",null,h(n(z)),1),e(R,{color:"success",onClick:a[5]||(a[5]=d=>ae())},{default:o(()=>[v(" OK ")]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),e(oe,{modelValue:n(y),"onUpdate:modelValue":a[8]||(a[8]=d=>j(y)?y.value=d:null),"max-width":"500"},{default:o(()=>[e(Y,null,{default:o(()=>[e(T,{class:"text-center px-10 py-6"},{default:o(()=>[e(R,{icon:"",variant:"outlined",color:"error",class:"my-4",style:{"block-size":"88px","inline-size":"88px","pointer-events":"none"}},{default:o(()=>[Te]),_:1}),i("h1",Be,h(n(x)),1),i("p",null,h(n(I)),1),e(R,{color:"success",onClick:a[7]||(a[7]=d=>y.value=!1)},{default:o(()=>[v(" OK ")]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])],64)}}},Ue={class:"me-3 d-flex gap-2"},Ne={style:{"inline-size":"15.625rem"}},ze=i("th",null," ID/DOJ ",-1),Pe=i("th",null," NAME/EMAIL ",-1),je=i("th",null,null,-1),Oe={key:0},Le={key:1},We={key:2},Fe={key:3},Ge={key:4},He={class:"text-caption me-0 ms-0 px-0 py-0",style:{"padding-left":"2px"}},Ke=i("br",null,null,-1),Je={key:0},Qe=i("span",{class:"text-caption text-xs"},"RM NOT MAPPED",-1),Xe={key:1},Ye={key:2},Ze={key:3},el=i("span",{class:"text-caption text-xs"},"NO PARENT IB",-1),ll={key:4},tl={class:"d-flex flex-wrap justify-center justify-sm-space-between gap-y-2 mt-2"},ot={__name:"ib-requests",setup(B){const q=s(""),E=s(null),M=s(null),f=s(null),b=s(null),C=s(null),X=s(null),A=s(null);s(null);const $=s(!1),V=s(null),S=[{title:"All",value:null},{title:"Account Not Created",value:"0"},{title:"Live Account Created",value:"1"},{title:"Demo Account Created",value:"2"}],U=[{title:"All",value:null},{title:"Deposited",value:"1"},{title:"Not Deposited",value:"1"}],N=[{title:"All",value:null},{title:"Upload Pending",value:"0"},{title:"Approved",value:"3"},{title:"Rejected",value:"2"},{title:"Verification Pending",value:"1"}];s(null),s(null);const y=s(25),D=s(1),x=s(null),I=s(null),k=s(null),z=async()=>{k.value=null;const t=await K("/client/sorted-list",{method:"POST",body:{keyword:q.value,page:D.value,RM:b.value,mt_account_status:E.value,deposit_status:M.value,document_status:f.value,country:C.value,is_ib:1},onResponseError({response:c}){console.log(c)}});k.value=t},W=ne(()=>{var t;return((t=k.value)==null?void 0:t.result.client_details.data)||[]}),Z=ne(()=>{var t;return((t=k.value)==null?void 0:t.result.client_details.total)||0});ue(async()=>{Se(),Re(),z()}),H([D,y,E,M,f,b,C,X,q,x,I],()=>{z()},{deep:!0,immediate:!1}),he(()=>{});function F(t){if(t==null)return"$ -";const c=parseFloat(t);return isNaN(c)?"$ 0.00":`$ ${c.toFixed(2)}`}s(!1);function ee(t){V.value=t,$.value=!0}const le=be(),te=t=>{_("view_client_profile")&&le.push(`/client/client-${t}-home-null-details`)};return(t,c)=>{const P=ce,ae=Ce,r=ke,a=we,G=De,w=qe;return u(),p("section",null,[e(Y,{class:"mb-6"},{default:o(()=>[e(de,{class:"py-4"},{default:o(()=>[v(" IB Requests ")]),_:1}),e(Q),e(T,null,{default:o(()=>[e(pe,null,{default:o(()=>[e(L,{cols:"12",sm:"2"},{default:o(()=>[e(P,{label:"MT Account Status",modelValue:E.value,"onUpdate:modelValue":c[0]||(c[0]=l=>E.value=l),placeholder:"MT Account Status",items:S,clearable:"","clear-icon":"tabler-x"},null,8,["modelValue"])]),_:1}),e(L,{cols:"12",sm:"2"},{default:o(()=>[e(P,{modelValue:M.value,"onUpdate:modelValue":c[1]||(c[1]=l=>M.value=l),label:"Deposit Status",placeholder:"Deposit Status",items:U,clearable:"","clear-icon":"tabler-x"},null,8,["modelValue"])]),_:1}),e(L,{cols:"12",sm:"2"},{default:o(()=>[e(P,{modelValue:f.value,"onUpdate:modelValue":c[2]||(c[2]=l=>f.value=l),label:"Document Status",placeholder:"Document Status",items:N,clearable:"","clear-icon":"tabler-x"},null,8,["modelValue"])]),_:1}),("hasAccess"in t?t.hasAccess:n(_))("view_all_clients")||("hasAccess"in t?t.hasAccess:n(_))("view_my_team_clients")?(u(),g(ae,{key:0,modelValue:b.value,"onUpdate:modelValue":c[3]||(c[3]=l=>b.value=l)},null,8,["modelValue"])):m("",!0),A.value&&A.value.length>2?(u(),g(L,{key:1,cols:"12",sm:"2"},{default:o(()=>[e(P,{modelValue:C.value,"onUpdate:modelValue":c[4]||(c[4]=l=>C.value=l),label:"Country",placeholder:"Country",items:A.value,clearable:"","clear-icon":"tabler-x"},null,8,["modelValue","items"])]),_:1})):m("",!0)]),_:1})]),_:1}),e(Q),e(T,{class:"d-flex flex-wrap"},{default:o(()=>[i("div",Ue,[i("div",Ne,[e(r,{modelValue:q.value,"onUpdate:modelValue":c[5]||(c[5]=l=>q.value=l),placeholder:"Search User",label:"Search User"},null,8,["modelValue"])])]),e(Ee)]),_:1}),e(Q),k.value?(u(),g(me,{key:0,height:"800","fixed-header":"",class:"text-no-wrap"},{default:o(()=>[i("thead",null,[i("tr",null,[ze,Pe,je,("hasAccess"in t?t.hasAccess:n(_))("view_rm")?(u(),p("th",Oe," ASSIGNED RM ")):m("",!0),("hasAccess"in t?t.hasAccess:n(_))("view_client_total_deposit")?(u(),p("th",Le,[e(J,{icon:"tabler-sum me-1",size:"16"}),v(" DEP. ")])):m("",!0),("hasAccess"in t?t.hasAccess:n(_))("view_client_total_withdraw")?(u(),p("th",We,[e(J,{icon:"tabler-sum me-1",size:"16"}),v(" WITH. ")])):m("",!0),("hasAccess"in t?t.hasAccess:n(_))("view_parent_ib")?(u(),p("th",Fe," PARENT IB ")):m("",!0),("hasAccess"in t?t.hasAccess:n(_))("view_client_profile")?(u(),p("th",Ge," VIEW ")):m("",!0)])]),i("tbody",null,[(u(!0),p(ie,null,re(W.value,l=>(u(),p("tr",{class:"",key:l.id},[i("td",He,[e(se,{size:"x-small"},{default:o(()=>[v(h(l.cat_label===0?"R":"P")+h(l.id),1)]),_:2},1024),Ke,v(" "+h(("formatDateToMonthShort"in t?t.formatDateToMonthShort:n(fe))(l.joined_on)),1)]),i("td",null,[e(a,{client_name:l.client_name,client_id:l.id,email:l.email,client_pic:l.client_pic},null,8,["client_name","client_id","email","client_pic"])]),i("td",null,[e(O,{rounded:"",color:l.email_verified===1?"success":"secondary",icon:l.email_verified===1?"tabler-mail-check":"tabler-mail-cancel",variant:l.email_verified===1?"outlined":"tonal",class:"me-1",size:"30"},null,8,["color","icon","variant"]),e(O,{rounded:"",color:l.doc_verified===3?"success":"secondary",icon:l.doc_verified===3?"tabler-file-check":"tabler-file-alert",variant:l.doc_verified===3?"outlined":"tonal",class:"me-1",size:"30"},null,8,["color","icon","variant"]),e(O,{rounded:"",color:l.mt_created===1?"success":"secondary",icon:l.mt_created===1?"tabler-chart-candle":"tabler-candle",variant:l.mt_created===1?"outlined":"tonal",class:"me-1",size:"30"},null,8,["color","icon","variant"]),l.is_ib===1?(u(),g(O,{key:0,rounded:"",color:"warning",variant:"tonal",class:"me-1",size:"30"},{default:o(()=>[v(" R ")]),_:1})):m("",!0),l.is_ib===2?(u(),g(O,{key:1,rounded:"",color:"success",variant:"tonal",class:"me-1",size:"30"},{default:o(()=>[v(" IB ")]),_:1})):m("",!0),l.is_ib===0?(u(),g(O,{key:2,rounded:"",color:"secondary",variant:"outlined",class:"me-1",size:"30"},{default:o(()=>[v(" N ")]),_:1})):m("",!0)]),("hasAccess"in t?t.hasAccess:n(_))("view_rm")?(u(),p("td",Je,[l.rm_name?(u(),g(G,{key:0,rm_name:l.rm_name,rm_id:l.manager_id},null,8,["rm_name","rm_id"])):(u(),g(se,{key:1,size:"x-small",variant:"outlined"},{default:o(()=>[Qe]),_:1}))])):m("",!0),("hasAccess"in t?t.hasAccess:n(_))("view_client_total_deposit")?(u(),p("td",Xe,h(F(l.deposit)),1)):m("",!0),("hasAccess"in t?t.hasAccess:n(_))("view_client_total_withdraw")?(u(),p("td",Ye,h(F(l.withdraw)),1)):m("",!0),("hasAccess"in t?t.hasAccess:n(_))("view_parent_ib")?(u(),p("td",Ze,[l.ib_name?(u(),g(a,{key:0,client_id:l.ib_id,client_name:l.ib_name,client_pic:l.ib_pic,email:"PARENT IB #"+l.ib_id},null,8,["client_id","client_name","client_pic","email"])):(u(),g(se,{key:1,size:"x-small",variant:"outlined"},{default:o(()=>[el]),_:1}))])):m("",!0),("hasAccess"in t?t.hasAccess:n(_))("view_client_profile")?(u(),p("td",ll,[e(R,{color:"secondary",size:"x-small",variant:"elevated",class:"px-2 me-2 rounded",icon:"tabler-address-book",onClick:d=>te(l.id)},null,8,["onClick"]),e(R,{color:"primary",size:"x-small",variant:"elevated",class:"px-2 me-2 rounded",icon:"tabler-rubber-stamp",onClick:d=>ee(l)},null,8,["onClick"])])):m("",!0)]))),128))])]),_:1})):(u(),p(ie,{key:1},re(3,l=>e(Me,{key:l,type:"table-tbody"})),64)),e(T,{class:"pt-2"},{default:o(()=>[i("div",tl,[e($e,{modelValue:D.value,"onUpdate:modelValue":c[6]||(c[6]=l=>D.value=l),"total-visible":t.$vuetify.display.smAndDown?3:5,length:Math.ceil(Z.value/y.value)},null,8,["modelValue","total-visible","length"])])]),_:1})]),_:1}),e(w,{isDialogVisible:$.value,"onUpdate:isDialogVisible":c[7]||(c[7]=l=>$.value=l),ibdetails:V.value},null,8,["isDialogVisible","ibdetails"])])}}};export{ot as default};
