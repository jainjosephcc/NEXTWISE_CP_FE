import{f as G}from"./formatters-MfVJSZma.js";import{bo as I,bf as P,r as a,aL as A,a5 as g,bp as S,E as F,a as J,o as l,c as n,b as d,e as h,d as t,F as z,h as D,m as o,v as r,y as f,I as O,cX as j,aV as N}from"./index-D1wpZbIu.js";import{u as X}from"./useChatStore-DlgJ_Z0-.js";import{u as q}from"./useResponsiveSidebar-hP8xkKNA.js";import{$ as b}from"./api-CZThb0As.js";import{a as C,V as H}from"./VRow-BvUGedaW.js";import{V as K}from"./VDivider-5x_iBr5U.js";import"./helpers-DK5QwNv0.js";import"./useApi-Bq6kd8Rt.js";import"./createUrl-R9pu32j9.js";import"./index-B3bPRkoL.js";/* empty css              */const y="/images/avatars/avatar-0.webp";var T={VITE_API_BASE_URL:"https://nextwiseapi.metacopier.app/api",BASE_URL:"/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const Q={class:"chat-app-layout",style:{"z-index":"0",height:"80vh"}},W={class:"v-navigation-drawer__content"},Y=t("div",{class:"chat-list-header"},[t("div",{class:"v-badge v-badge--bordered v-badge--dot"},[t("div",{class:"v-badge__wrapper"},[t("div",{class:"v-avatar v-theme--light v-avatar--density-default v-avatar--variant-flat cursor-pointer",style:{width:"40px",height:"40px"}},[t("div",{class:"v-responsive v-img","aria-label":"John Doe",role:"img"},[t("div",{class:"v-responsive__sizer",style:{"padding-bottom":"100%"}}),t("img",{class:"v-img__img v-img__img--contain",src:y,alt:"John Doe",style:{}})]),t("span",{class:"v-avatar__underlay"})]),t("span",{class:"v-badge__badge v-theme--light bg-success","aria-atomic":"true","aria-label":"Badge","aria-live":"polite",role:"status",style:{top:"calc(100% - 11px)",left:"calc(100% - 11px)"}})])]),t("div",{class:"app-text-field flex-grow-1 ms-4 me-1 chat-list-search"},[t("div",{class:"v-input v-input--horizontal v-input--center-affix v-input--density-comfortable v-locale--is-ltr v-text-field"},[t("div",{class:"v-input__control"},[t("div",{class:"v-field v-field--center-affix v-field--prepended v-field--no-label v-field--variant-outlined v-theme--light v-locale--is-ltr"},[t("div",{class:"v-field__overlay"}),t("div",{class:"v-field__loader"},[t("div",{class:"v-progress-linear v-progress-linear--rounded v-progress-linear--rounded-bar v-progress-linear--rounded v-theme--light v-locale--is-ltr",role:"progressbar","aria-hidden":"true","aria-valuemin":"0","aria-valuemax":"100",style:{top:"0px",height:"0px","--v-progress-linear-height":"2px",left:"50%",transform:"translateX(-50%)"}},[t("div",{class:"v-progress-linear__background",style:{"background-color":"rgba(var(--v-track-bg))",width:"100%"}}),t("div",{class:"v-progress-linear__indeterminate"},[t("div",{class:"v-progress-linear__indeterminate long bg-primary"}),t("div",{class:"v-progress-linear__indeterminate short bg-primary"})])])]),t("div",{class:"v-field__prepend-inner"},[t("i",{class:"tabler-search v-icon notranslate v-theme--light v-icon--size-default","aria-hidden":"true"})]),t("div",{class:"v-field__field","data-no-activator":""},[t("label",{class:"v-label v-field-label",for:"input-193"}),t("input",{placeholder:"Search...",size:"1",type:"text",id:"input-193","aria-describedby":"input-193-messages",class:"v-field__input"})]),t("div",{class:"v-field__outline"},[t("div",{class:"v-field__outline__start"}),t("div",{class:"v-field__outline__end"})])])])])])],-1),Z=t("hr",{class:"v-divider v-theme--light","aria-orientation":"horizontal",role:"separator"},null,-1),tt={class:"ps d-flex flex-column gap-y-1 chat-contacts-list px-3 py-2 list-none ps--active-y"},et=t("li",{class:"list-none"},[t("h5",{class:"chat-contact-header text-primary text-h5 mb-4"}," Chats ")],-1),st={class:"chat-contact cursor-pointer d-flex align-center chat-contact-active pb-3 mb-2"},at={class:"v-badge v-badge--bordered v-badge--dot"},it={class:"v-badge__wrapper"},lt={class:"v-avatar v-theme--light v-avatar--density-default v-avatar--variant-flat",style:{width:"40px",height:"40px"}},nt={class:"v-responsive v-img","aria-label":"John Doe",role:"img"},ot=t("div",{class:"v-responsive__sizer",style:{"padding-bottom":"100%"}},null,-1),rt=["src"],ct={key:1,class:"v-img__img v-img__img--contain",src:y,alt:"John Doe",style:{}},dt=t("span",{class:"v-avatar__underlay"},null,-1),vt=t("span",{class:"v-badge__badge v-theme--light bg-secondary","aria-atomic":"true","aria-label":"Badge","aria-live":"polite",role:"status",style:{top:"calc(100% - 8px)",left:"calc(100% - 11px)"}},null,-1),_t=["onClick"],pt={class:"text-base text-high-emphasis mb-0"},ht={class:"mb-0 text-truncate text-body-2"},ut={class:"d-flex flex-column align-self-start"},mt={class:"text-body-2 text-disabled whitespace-no-wrap"},gt={key:0},ft={class:"v-main chat-content-container",style:{"--v-layout-left":"370px","--v-layout-right":"0px","--v-layout-top":"0px","--v-layout-bottom":"0px"}},bt={class:"d-flex flex-column h-100"},yt={class:"active-chat-header d-flex align-center text-medium-emphasis bg-surface"},xt=t("button",{type:"button",class:"v-btn v-btn--icon v-theme--light text-default v-btn--density-default v-btn--size-default v-btn--variant-text d-md-none me-3"},[t("span",{class:"v-btn__overlay"}),t("span",{class:"v-btn__underlay"}),t("span",{class:"v-btn__content","data-no-activator":""},[t("i",{class:"tabler-menu-2 v-icon notranslate v-theme--light v-icon--size-default","aria-hidden":"true"})])],-1),wt={class:"d-flex align-center cursor-pointer"},kt={class:"v-badge v-badge--bordered v-badge--dot"},St={class:"v-badge__wrapper"},zt={class:"v-avatar v-theme--light v-avatar--density-default v-avatar--variant-flat cursor-pointer",style:{width:"40px",height:"40px"}},Dt={class:"v-responsive v-img","aria-label":"Gavin Griffith 1",role:"img"},Ct=t("div",{class:"v-responsive__sizer",style:{"padding-bottom":"100%"}},null,-1),Tt=["src"],Et={key:1,class:"v-img__img v-img__img--contain",src:y,alt:"Gavin Griffith",style:{}},Rt=t("span",{class:"v-avatar__underlay"},null,-1),Vt=t("span",{class:"v-badge__badge v-theme--light bg-secondary","aria-atomic":"true","aria-label":"Badge","aria-live":"polite",role:"status",style:{top:"calc(100% - 8px)",left:"calc(100% - 11px)"}},null,-1),Bt={class:"flex-grow-1 ms-4 overflow-hidden"},Lt={class:"text-h6 mb-0 font-weight-regular"},Mt=t("div",{class:"v-spacer"},null,-1),$t=t("div",{class:"d-sm-flex align-center d-none text-medium-emphasis"},[t("button",{type:"button",class:"v-btn v-btn--icon v-theme--light text-default v-btn--density-default v-btn--size-default v-btn--variant-text"},[t("span",{class:"v-btn__overlay"}),t("span",{class:"v-btn__underlay"}),t("span",{class:"v-btn__content","data-no-activator":""},[t("i",{class:"tabler-phone v-icon notranslate v-theme--light v-icon--size-default","aria-hidden":"true"})])]),t("button",{type:"button",class:"v-btn v-btn--icon v-theme--light text-default v-btn--density-default v-btn--size-default v-btn--variant-text"},[t("span",{class:"v-btn__overlay"}),t("span",{class:"v-btn__underlay"}),t("span",{class:"v-btn__content","data-no-activator":""},[t("i",{class:"tabler-video v-icon notranslate v-theme--light v-icon--size-default","aria-hidden":"true"})])]),t("button",{type:"button",class:"v-btn v-btn--icon v-theme--light text-default v-btn--density-default v-btn--size-default v-btn--variant-text"},[t("span",{class:"v-btn__overlay"}),t("span",{class:"v-btn__underlay"}),t("span",{class:"v-btn__content","data-no-activator":""},[t("i",{class:"tabler-search v-icon notranslate v-theme--light v-icon--size-default","aria-hidden":"true"})])]),t("button",{type:"button",class:"v-btn v-btn--icon v-theme--light text-default v-btn--density-default v-btn--size-default v-btn--variant-text"},[t("span",{class:"v-btn__overlay"}),t("span",{class:"v-btn__underlay"}),t("span",{class:"v-btn__content","data-no-activator":""},[t("i",{class:"tabler-dots-vertical v-icon notranslate v-theme--light v-icon--size-default","aria-hidden":"true"})])])],-1),Ut={class:"ps flex-grow-1 ps--active-y"},Gt={class:"chat-log pa-6"},It={key:0,class:"chat-group d-flex align-start mb-6"},Pt={class:"chat-body d-inline-flex flex-column align-start"},At={class:"chat-content py-2 px-4 elevation-2 chat-left mb-2",style:{"background-color":"rgb(var(--v-theme-surface))"}},Ft={class:"mb-0 text-base"},Jt={class:""},Ot={class:"text-sm ms-2 text-disabled"},jt={key:1,class:"chat-group d-flex align-start flex-row-reverse mb-6"},Nt=t("div",{class:"chat-avatar ms-4"},null,-1),Xt={class:"chat-body d-inline-flex flex-column align-end"},qt={class:"chat-content py-2 px-4 elevation-2 bg-primary text-white chat-right mb-1",style:{"background-color":"rgb(var(--v-theme-surface))"}},Ht={class:"mb-0 text-base"},Kt={class:"text-right"},Qt=t("i",{class:"tabler-checks v-icon notranslate v-theme--light text-success","aria-hidden":"true",style:{"font-size":"16px",height:"16px",width:"16px"}},null,-1),Wt={class:"text-sm ms-2 text-disabled"},Yt={class:"v-form chat-log-message-form mb-5 mx-5",novalidate:""},Zt={class:"v-input v-input--horizontal v-input--center-affix v-input--density-default v-locale--is-ltr v-text-field chat-message-input"},te={class:"v-input__control"},ee={class:"v-field v-field--appended v-field--center-affix v-field--no-label v-field--variant-solo v-theme--light v-locale--is-ltr"},se={class:"v-field__field","data-no-activator":""},ae=t("span",{class:"v-btn__overlay"},null,-1),ie=t("span",{class:"v-btn__underlay"},null,-1),le=t("span",{class:"v-btn__content","data-no-activator":""}," Send ",-1),ne=t("span",{class:"v-btn__append"},[t("i",{class:"tabler-send v-icon notranslate v-theme--light v-icon--size-default","aria-hidden":"true",style:{color:"rgb(255, 255, 255)","caret-color":"rgb(255, 255, 255)"}})],-1),oe=[ae,ie,le,ne],re=t("div",{class:"v-field__outline"},null,-1),ce=t("input",{type:"file",name:"file",accept:".jpeg,.png,.jpg,GIF",hidden:""},null,-1),Se={__name:"support-ticket-list2",setup(de){I(e=>({"1461991e":o(V)}));const E=P();X(),q(E.smAndDown),a(),a(""),a(""),a(!1),a(!1),a();const{name:R}=A(),V=g(()=>{var i,p;let e="transparent";return S&&(e=(p=(i=S)==null?void 0:i[R.value].colors)==null?void 0:p.background),e}),x=a([]),v=a(null),u=a(null),w=a(null),c=a(null),m=a(null),_=a(null);F(()=>{B()});const B=async()=>{try{const e=await b("/getClientSupportTickets",{method:"POST"});e&&e.client_tickets&&e.client_tickets.data?x.value=e.client_tickets.data:console.warn("Client tickets data not found:",e)}catch(e){console.error("Error fetching Support Ticket list:",e)}},k=async()=>{try{const e=await b(`/getClientTicketMessages/${v.value}`,{method:"GET",onResponseError({response:i}){console.error("Error response:",i)}});e?u.value=e.ticket_messages.reverse():console.error("Failed to fetch group list or empty response")}catch(e){console.error("Error fetching group list:",e)}};function L(e){v.value=e.ticket_id,w.value=e.client_name,m.value=e.client_id,_.value=e.profile_pic,k()}const M=g(()=>{const e=T.VITE_S3_BASE_URL;return i=>i.profile_pic?`${e}/client/profileImage/${i.client_id}/${i.profile_pic}`:"default-image-url"}),$=g(()=>{const e=T.VITE_S3_BASE_URL;return _.value?`${e}/client/profileImage/${m.value}/${_.value}`:null}),U=async()=>{let e=new FormData;e.append("message",c.value||""),e.append("ticket_id",v.value||""),await b("/storeTicketReply",{method:"POST",body:{message:c.value||"",ticket_id:v.value},onResponseError({response:i}){}}),c.value="",k()};return(e,i)=>{const p=J("RouterLink");return l(),n("div",Q,[d(H,null,{default:h(()=>[d(C,{cols:"3"},{default:h(()=>[t("div",W,[Y,Z,t("ul",tt,[et,(l(!0),n(z,null,D(o(x),s=>(l(),n("div",null,[t("li",st,[t("div",at,[t("div",it,[t("div",lt,[t("div",nt,[ot,s.profile_pic?(l(),n("img",{key:0,class:"v-img__img v-img__img--contain",src:o(M)(s),alt:"John Doe",style:{}},null,8,rt)):(l(),n("img",ct))]),dt]),vt])]),t("div",{class:"flex-grow-1 ms-4 overflow-hidden",onClick:ve=>L(s)},[t("p",pt,r(s.client_name),1),t("p",ht,r(s.subject),1)],8,_t),t("div",ut,[t("div",mt,r(("formatDateToMonthShort"in e?e.formatDateToMonthShort:o(G))(s.created_at)),1)])])]))),256))])])]),_:1}),d(C,{cols:"9"},{default:h(()=>[o(u)?(l(),n("div",gt,[t("main",ft,[t("div",bt,[t("div",yt,[xt,t("div",wt,[t("div",kt,[t("div",St,[t("div",zt,[t("div",Dt,[Ct,o(_)?(l(),n("img",{key:0,class:"v-img__img v-img__img--contain",src:o($),alt:"Gavin Griffith",style:{}},null,8,Tt)):(l(),n("img",Et))]),Rt]),Vt])]),t("div",Bt,[d(p,{to:`/client/client-${o(m)}-home-null-details`},{default:h(()=>[t("div",Lt,r(o(w)),1)]),_:1},8,["to"])])]),Mt,$t]),d(K),t("ul",Ut,[t("div",Gt,[(l(!0),n(z,null,D(o(u),s=>(l(),n("div",null,[s.client_id?(l(),n("div",It,[t("div",Pt,[t("div",At,[t("p",Ft,r(s.message),1)]),t("div",Jt,[t("span",Ot,r(new Date(s.created_at).toLocaleString("en-US",{hour:"numeric",minute:"numeric",hour12:!0})),1)])])])):f("",!0),s.staff_id?(l(),n("div",jt,[Nt,t("div",Xt,[t("div",qt,[t("p",Ht,r(s.message),1)]),t("div",Kt,[Qt,t("span",Wt,r(new Date(s.created_at).toLocaleString("en-US",{hour:"numeric",minute:"numeric",hour12:!0})),1)])])])):f("",!0)]))),256))])]),t("form",Yt,[t("div",Zt,[t("div",te,[t("div",ee,[t("div",se,[O(t("input",{autofocus:"",placeholder:"Type your message...",size:"1",type:"text",id:"input-202","aria-describedby":"input-202-messages",class:"v-field__input","onUpdate:modelValue":i[0]||(i[0]=s=>N(c)?c.value=s:null)},null,512),[[j,o(c)]])]),t("div",{class:"v-field__append-inner"},[t("div",{class:"d-flex gap-1"},[t("button",{type:"button",class:"v-btn v-btn--elevated v-theme--light bg-primary v-btn--density-default v-btn--size-default v-btn--variant-elevated",onClick:U},oe)])]),re])])]),ce])])])])):f("",!0)]),_:1})]),_:1})])}}};export{Se as default};
