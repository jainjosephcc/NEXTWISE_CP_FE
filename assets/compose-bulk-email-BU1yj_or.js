import{c as q}from"./apiUtils-CaV30tUq.js";import{_ as xe}from"./ConfirmDialog-B8ywU6QK.js";import{_ as Ce}from"./CustomClientCardChip-C7_OFKoo.js";import{_ as Se}from"./AppTextField-u8wftyoZ.js";import{_ as he}from"./CustomManagerSelectWidget-CjakYhEU.js";import{_ as ke}from"./AppSelect-CthfUS3a.js";import{_ as De}from"./TiptapEditor-B-dSY1ou.js";import{$ as J}from"./api-BW1nwVcS.js";import{V as Y}from"./index-aag-HgfZ.js";import{V as D,a as d}from"./VRow-CZ1yDVCX.js";import{V as Z}from"./VDialog-CzQdkIoW.js";import{V as m,a as Ue}from"./VCard-VlrXRWN5.js";import{V as ee}from"./VCardTitle-B695n3gd.js";import{V as le}from"./VSpacer-j1AJBBTr.js";import{V as M}from"./VTextField-B0vet7sD.js";import{V as we}from"./VChip-Ops6gGX2.js";import{V as U}from"./VDivider-h2yy5ewu.js";import{r as s,w as te,a4 as Be,a as Te,o as r,c as _,b as e,e as l,m as a,aV as u,t as v,d as n,F as oe,h as ae,v as w,y as K,ah as B,$,f as se}from"./index-Cgf4NPNG.js";import{V as Ae}from"./VCheckbox-BzrlH5eB.js";import{V as ne}from"./VCardText-BYD5yWy1.js";import"./useApi-DoH1dS8K.js";import"./permission-CzmEygy0.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./VList-BhBK_1sq.js";import"./ssrBoot-2HmcbBGm.js";import"./transition-DdD4MU-Z.js";import"./createSimpleFunctional-LZ4-WhhX.js";import"./VAvatar-BwdyBPsp.js";import"./VImg-CgeFkz72.js";import"./form-5jaergec.js";import"./VSelect-Bl5oIJ2d.js";import"./forwardRefs-C-GTDzx5.js";import"./dialog-transition-DltatfvE.js";import"./easing-CjukEv2V.js";import"./VMenu-kraGy_gu.js";import"./VOverlay-BwImLkqQ.js";import"./lazy-Dgb6JBt3.js";import"./scopeId-DO5xxU_5.js";import"./VCheckboxBtn-BGih1B2v.js";import"./VSelectionControl-C7rNeK0I.js";import"./index-DCy1z5u_.js";import"./index-P7ciKUnq.js";import"./index-B3bPRkoL.js";/* empty css              *//* empty css                   */import"./VCounter-byXFWX6h.js";import"./VField-CW7c84do.js";import"./VInput-CLkqw0gW.js";import"./VSlideGroup-DWjD_0E2.js";const Ee={class:"d-flex align-center"},Me=n("h5",{class:"text-h5"}," Compose Mail ",-1),$e={class:"px-1 pe-6 py-1"},Ie=n("div",{class:"text-base font-weight-medium text-disabled"}," To: ",-1),ze={class:"cursor-pointer"},Re=n("span",null," | ",-1),Ne={key:0},Fe={class:"px-1 pe-6 py-1"},Pe=n("div",{class:"text-disabled font-weight-medium"}," Cc: ",-1),We={key:0},je={class:"px-1 pe-6 py-1"},Oe=n("div",{class:"text-disabled font-weight-medium"}," Bcc: ",-1),Le={class:"px-1 pe-6 py-1"},qe=n("div",{class:"text-base font-weight-medium text-disabled"}," Subject: ",-1),Ke={class:"d-flex align-center px-6 py-4"},Qe={style:{"inline-size":"15.625rem"},class:"mt-9"},Xe={class:"text-h4 mb-4"},Ge=n("span",{class:"text-5xl font-weight-light"},"X",-1),He={class:"text-h4 mb-4"},Xl={__name:"compose-bulk-email",emits:["close"],setup(Je,{emit:Ye}){const f=s(""),T=s(""),p=s(""),ie=s(""),I=s(""),z=s(""),R=s(!1),N=s(!1),ue=()=>{T.value=p.value=ie.value=""},V=s(""),b=s(null),y=s(null),g=s(null),x=s(null),C=s(null),S=s(null),F=s(null),c=s([]),A=s(!1),h=s(!1),E=s(!1);let P=s(""),W=s(""),Q=s(""),X=s("");const de=[{title:"All",value:null},{title:"Account Not Created",value:"0"},{title:"Live Account Created",value:"1"},{title:"Demo Account Created",value:"2"}],re=[{title:"All",value:null},{title:"Deposited",value:"1"},{title:"Not Deposited",value:"1"}],ce=[{title:"All",value:null},{title:"Upload Pending",value:"0"},{title:"Approved",value:"3"},{title:"Rejected",value:"2"},{title:"Verification Pending",value:"1"}],me=[{title:"All",value:null},{title:"Normal User",value:"0"},{title:"IB Requested",value:"1"},{title:"Active IB",value:"2"}];te([b,y,g,x,C,S,V],()=>{pe()},{deep:!0,immediate:!1});const pe=async()=>{F.value=null;const i=await J("/client/sorted-list",{method:"POST",body:{keyword:V.value,page:null,RM:x.value,mt_account_status:b.value,deposit_status:y.value,document_status:g.value,country:C.value,is_ib:S.value},onResponseError({response:t}){console.log(t)}});F.value=i},G=Be(()=>{var i;return((i=F.value)==null?void 0:i.result.client_details.data)||[]});function _e(){A.value=!0,console.log("sendmail",c.value),console.log("sub",p.value),console.log("content",f.value)}const ve=async i=>{if(i)try{await J("/sendEmail",{method:"POST",body:{subject:p.value,emailContent:f.value,ids:c.value},onResponseError({response:O}){P.value="Something Went Wrong !",W.value=O._data.message,h.value=!0}})&&(Q.value="Success !",X.value="Mail Send Successfully !",E.value=!0)}catch(t){P.value="Something Went Wrong !",W.value=t.data.message,h.value=!0}},H=async i=>{window.location.reload()},j=s([]);return te(c,i=>{j.value=G.value.filter(t=>i.includes(t.id)),console.log(j.value,"selected user"),console.log(c.value,"selected valu")},{immediate:!0}),(i,t)=>{const O=De,L=Te("IconBtn"),k=ke,fe=he,Ve=Se,be=Ce,ye=xe;return r(),_("section",null,[e(D,null,{default:l(()=>[e(d,{cols:"12"},{default:l(()=>[e(m,null,{default:l(()=>[e(ee,null,{default:l(()=>[v(" Bulk Email ")]),_:1})]),_:1})]),_:1})]),_:1}),e(D,null,{default:l(()=>[e(d,{cols:"6"},{default:l(()=>[e(m,null,{default:l(()=>[e(d,{cols:"12"},{default:l(()=>[e(m,null,{default:l(()=>[e(m,{class:"email-compose-dialog",elevation:"15","max-width":"40vw"},{default:l(()=>[e(Ue,{class:"py-3 px-6"},{default:l(()=>[n("div",Ee,[Me,e(le)])]),_:1}),n("div",$e,[e(M,{modelValue:a(T),"onUpdate:modelValue":t[2]||(t[2]=o=>u(T)?T.value=o:null),density:"compact"},{"prepend-inner":l(()=>[Ie]),append:l(()=>[n("span",ze,[n("span",{onClick:t[0]||(t[0]=o=>R.value=!a(R))},"Cc"),Re,n("span",{onClick:t[1]||(t[1]=o=>N.value=!a(N))},"Bcc")])]),default:l(()=>[(r(!0),_(oe,null,ae(a(j),o=>(r(),_("div",{key:o.id,class:"selected-chip"},[e(we,{class:"ma-2",color:"primary",outlined:""},{default:l(()=>[v(w(o.client_name),1)]),_:2},1024)]))),128))]),_:1},8,["modelValue"])]),e(Y,null,{default:l(()=>[a(R)?(r(),_("div",Ne,[e(U),n("div",Fe,[e(M,{modelValue:a(I),"onUpdate:modelValue":t[3]||(t[3]=o=>u(I)?I.value=o:null),density:"compact"},{"prepend-inner":l(()=>[Pe]),_:1},8,["modelValue"])])])):K("",!0)]),_:1}),e(Y,null,{default:l(()=>[a(N)?(r(),_("div",We,[e(U),n("div",je,[e(M,{modelValue:a(z),"onUpdate:modelValue":t[4]||(t[4]=o=>u(z)?z.value=o:null),density:"compact"},{"prepend-inner":l(()=>[Oe]),_:1},8,["modelValue"])])])):K("",!0)]),_:1}),e(U),n("div",Le,[e(M,{modelValue:a(p),"onUpdate:modelValue":t[5]||(t[5]=o=>u(p)?p.value=o:null),density:"compact"},{"prepend-inner":l(()=>[qe]),_:1},8,["modelValue"])]),e(U),e(O,{modelValue:a(f),"onUpdate:modelValue":t[6]||(t[6]=o=>u(f)?f.value=o:null),placeholder:"Message"},null,8,["modelValue"]),e(U),n("div",Ke,[e(B,{color:"primary",class:"me-4","append-icon":"tabler-send",onClick:_e},{default:l(()=>[v(" send ")]),_:1}),e(L,{size:"small"},{default:l(()=>[e($,{icon:"tabler-paperclip"})]),_:1}),e(le),e(L,{size:"small",class:"me-2"},{default:l(()=>[e($,{icon:"tabler-dots-vertical"})]),_:1}),e(L,{size:"small",onClick:t[7]||(t[7]=o=>{i.$emit("close"),ue()})},{default:l(()=>[e($,{icon:"tabler-trash"})]),_:1})])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),e(d,{cols:"6"},{default:l(()=>[e(m,null,{default:l(()=>[e(ee,null,{default:l(()=>[v(" FILTER ")]),_:1}),e(D,{class:"mx-2 my-2"},{default:l(()=>[e(d,{cols:"3"},{default:l(()=>[e(k,{label:"MT Account Status",modelValue:a(b),"onUpdate:modelValue":t[8]||(t[8]=o=>u(b)?b.value=o:null),placeholder:"MT Account Status",items:de,clearable:"","clear-icon":"tabler-x"},null,8,["modelValue"])]),_:1}),e(d,{cols:"3"},{default:l(()=>[e(k,{modelValue:a(y),"onUpdate:modelValue":t[9]||(t[9]=o=>u(y)?y.value=o:null),label:"Deposit Status",placeholder:"Deposit Status",items:re,clearable:"","clear-icon":"tabler-x"},null,8,["modelValue"])]),_:1}),e(d,{cols:"3"},{default:l(()=>[e(k,{modelValue:a(g),"onUpdate:modelValue":t[10]||(t[10]=o=>u(g)?g.value=o:null),label:"Document Status",placeholder:"Document Status",items:ce,clearable:"","clear-icon":"tabler-x"},null,8,["modelValue"])]),_:1}),e(fe,{modelValue:a(x),"onUpdate:modelValue":t[11]||(t[11]=o=>u(x)?x.value=o:null)},null,8,["modelValue"]),("country_list"in i?i.country_list:a(q))&&("country_list"in i?i.country_list:a(q)).length>2?(r(),se(d,{key:0,cols:"13"},{default:l(()=>[e(k,{modelValue:a(C),"onUpdate:modelValue":t[12]||(t[12]=o=>u(C)?C.value=o:null),label:"Country",placeholder:"Country",items:"country_list"in i?i.country_list:a(q),clearable:"","clear-icon":"tabler-x"},null,8,["modelValue","items"])]),_:1})):K("",!0),e(d,{cols:"3"},{default:l(()=>[e(k,{modelValue:a(S),"onUpdate:modelValue":t[13]||(t[13]=o=>u(S)?S.value=o:null),label:"IB Status",placeholder:"IB Status",items:me,clearable:"","clear-icon":"tabler-x"},null,8,["modelValue"])]),_:1}),n("div",Qe,[e(Ve,{modelValue:a(V),"onUpdate:modelValue":t[14]||(t[14]=o=>u(V)?V.value=o:null),placeholder:"Search User"},null,8,["modelValue"])])]),_:1}),e(D,{class:"mb-3"},{default:l(()=>[(r(!0),_(oe,null,ae(a(G),o=>(r(),se(d,{cols:"6",key:o.id},{default:l(()=>[e(D,{class:"align-center"},{default:l(()=>[e(d,{cols:"auto"},{default:l(()=>[e(Ae,{modelValue:a(c),"onUpdate:modelValue":t[15]||(t[15]=ge=>u(c)?c.value=ge:null),value:o.id},null,8,["modelValue","value"])]),_:2},1024),e(d,null,{default:l(()=>[e(be,{client_name:o.client_name,client_id:o.id,email:o.email,client_pic:o.client_pic},null,8,["client_name","client_id","email","client_pic"])]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})]),_:1})]),_:1}),e(ye,{isDialogVisible:a(A),"onUpdate:isDialogVisible":t[16]||(t[16]=o=>u(A)?A.value=o:null),onConfirm:ve,"confirmation-question":"Do you want to send mail?","cancel-title":"Cancelled","confirm-title":"Cancelled!"},null,8,["isDialogVisible"]),e(Z,{modelValue:a(E),"onUpdate:modelValue":t[18]||(t[18]=o=>u(E)?E.value=o:null),"max-width":"500"},{default:l(()=>[e(m,null,{default:l(()=>[e(ne,{class:"text-center px-10 py-6"},{default:l(()=>[e(B,{icon:"",variant:"outlined",color:"success",class:"my-4",style:{"block-size":"88px","inline-size":"88px","pointer-events":"none"}},{default:l(()=>[e($,{icon:"tabler-check",size:"38"})]),_:1}),n("h1",Xe,w(a(Q)),1),n("p",null,w(a(X)),1),e(B,{color:"success",onClick:t[17]||(t[17]=o=>H())},{default:l(()=>[v(" OK ")]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),e(Z,{modelValue:a(h),"onUpdate:modelValue":t[19]||(t[19]=o=>u(h)?h.value=o:null),"max-width":"500"},{default:l(()=>[e(m,null,{default:l(()=>[e(ne,{class:"text-center px-10 py-6"},{default:l(()=>[e(B,{icon:"",variant:"outlined",color:"error",class:"my-4",style:{"block-size":"88px","inline-size":"88px","pointer-events":"none"}},{default:l(()=>[Ge]),_:1}),n("h1",He,w(a(P)),1),n("p",null,w(a(W)),1),e(B,{color:"success",onClick:H},{default:l(()=>[v(" Ok ")]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])])}}};export{Xl as default};
