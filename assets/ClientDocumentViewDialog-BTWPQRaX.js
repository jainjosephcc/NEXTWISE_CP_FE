import{h as z}from"./permission-je0EhvfM.js";import{_ as X}from"./ConfirmDialog-DTjq62H2.js";import{_ as G}from"./DialogCloseBtn-BwY9-iph.js";import{$ as L}from"./api-DKU2c_97.js";import{V as A,a as H}from"./VCard-D7qQTl7j.js";import{V as J}from"./VCardTitle-ByxFLjtO.js";import{V as Q}from"./VDivider-ct61W42j.js";import{V as Y}from"./VImg-CA8IuiYj.js";import{V as R}from"./VChip-BSWb23AE.js";import{V as N}from"./VSpacer-DyJ6DYU3.js";import{a as Z}from"./VRow-Cfalt0VA.js";import{r as n,w as ee,o as c,c as P,b as s,e as l,t as r,F as O,h as te,f,d as o,v as m,y as _,m as i,ah as p,aV as D,$ as se}from"./index-BOEtP-vQ.js";import{V as E}from"./VDialog-CSR0sace.js";import{V as q}from"./VCardText-Cu1A2p50.js";var le={VITE_API_BASE_URL:"https://nextwiseapi.metacopier.app/api",VITE_SERVER_NAME:"NEXTWISEMARKETS",BASE_URL:"/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const oe={class:"border rounded"},ae={class:"d-flex align-center gap-4 pa-6 position-relative flex-column flex-sm-row"},ie=["href"],ne={class:"d-flex w-100 flex-column flex-md-row"},re={class:"d-flex flex-column gap-y-2"},ce={class:"text-h6"},de={class:"d-flex align-center text-no-wrap gap-4 text-body-1"},ue={class:"text-disabled"},fe=["href"],pe={class:"d-inline-block text-primary"},me={class:"text-h4 mb-4"},_e=o("span",{class:"text-5xl font-weight-light"},"X",-1),ve={class:"text-h4 mb-4"},$e={__name:"ClientDocumentViewDialog",props:{clientDocs:{type:Object,required:!1},isDialogVisible:{type:Boolean,required:!0},docVerificationStatus:{type:Number,required:!0},clientId:{type:Number,required:!0}},emits:["submit","update:isDialogVisible"],setup($,{emit:M}){const d=$,v=n(!1),V=n(!1),U=n(!1),I=n(!1),T=n(!1),j=n(!1),g=n(!1);let y=n(""),h=n("");const b=n(!1);let C=n(""),x=n("");const W=M,F=async a=>{a&&(v.value=!1,U.value=!0,I.value=!0,await L("/client/client-doc/approve",{method:"POST",body:{client_id:d.clientId},onResponseError({response:u}){isSubmitLoading.value=!1,isDisabled.value=!1,C.value="Something Went Wrong !",x.value=u._data.message,b.value=!0}})&&(y.value="Documents Approved !",h.value="Client Docs Approved Successfully !",g.value=!0,isSubmitLoading.value=!1,isDisabled.value=!1))},K=async a=>{a&&(V.value=!1,T.value=!0,j.value=!0,await L("/client/client-doc/reject",{method:"POST",body:{client_id:d.clientId},onResponseError({response:u}){isDisabled.value=!1,C.value="Something Went Wrong !",x.value=u._data.message,b.value=!0}})&&(y.value="Documents Rejected !",h.value="Client Docs Rejected Successfully !",g.value=!0))};ee(d,()=>{});const B=async a=>{window.location.reload()},w=a=>{W("update:isDialogVisible",a)},S=(a,t,u)=>`${le.VITE_S3_BASE_URL}/userdocs/${a}/${t}/${u}`;return(a,t)=>{const u=G,k=X;return c(),P(O,null,[s(E,{width:a.$vuetify.display.smAndDown?"auto":600,"model-value":d.isDialogVisible,"onUpdate:modelValue":w},{default:l(()=>[s(u,{onClick:t[0]||(t[0]=e=>w(!1))}),s(A,{class:"pb-6"},{default:l(()=>[s(J,{class:"pt-3"},{default:l(()=>[r("Uploaded Documents")]),_:1}),s(Q),(c(!0),P(O,null,te($.clientDocs,e=>(c(),f(H,{key:e.id},{default:l(()=>[o("div",oe,[o("div",ae,[o("a",{target:"_blank",href:S(e.client_id,e.doc_type,e.doc_path)},[s(Y,{width:"140",src:S(e.client_id,e.doc_type,e.doc_path)},null,8,["src"])],8,ie),o("div",ne,[o("div",re,[o("h6",ce,m(e.doc_type==="poa"?"Proof of Address":"Proof of Identity"),1),o("div",de,[o("div",ue,[r(" Doc : "),o("a",{target:"_blank",href:S(e.client_id,e.doc_type,e.doc_path)},[o("span",pe,m(e.doc_path),1)],8,fe)]),e.status===0?(c(),f(R,{key:0,color:"warning",label:"",size:"small"},{default:l(()=>[r("Pending Review")]),_:1})):_("",!0),e.status===3?(c(),f(R,{key:1,color:"success",label:"",size:"small"},{default:l(()=>[r("Approved")]),_:1})):_("",!0),e.status===2?(c(),f(R,{key:2,color:"error",label:"",size:"small"},{default:l(()=>[r("Rejected")]),_:1})):_("",!0)])]),s(N)])])])]),_:2},1024))),128)),d.docVerificationStatus!==3?(c(),f(Z,{key:0,cols:"12",class:"d-flex gap-4 float-end align-content-end end pe-6 pt-9"},{default:l(()=>[s(N),("hasAccess"in a?a.hasAccess:i(z))("process_client_document")&&d.docVerificationStatus!==3?(c(),f(p,{key:0,loading:i(U),disabled:i(I),onClick:t[1]||(t[1]=e=>v.value=!0)},{default:l(()=>[r(" Approve Client Docs ")]),_:1},8,["loading","disabled"])):_("",!0),("hasAccess"in a?a.hasAccess:i(z))("process_client_document")&&d.docVerificationStatus!==2?(c(),f(p,{key:1,loading:i(T),disabled:i(j),onClick:t[2]||(t[2]=e=>V.value=!0),color:"error"},{default:l(()=>[r(" Reject Client Docs ")]),_:1},8,["loading","disabled"])):_("",!0),s(p,{onClick:t[3]||(t[3]=e=>w(!1)),type:"reset",color:"secondary",variant:"tonal"},{default:l(()=>[r(" Cancel ")]),_:1})]),_:1})):_("",!0)]),_:1})]),_:1},8,["width","model-value"]),s(k,{isDialogVisible:i(v),"onUpdate:isDialogVisible":t[4]||(t[4]=e=>D(v)?v.value=e:null),onConfirm:F,"confirmation-question":"Are you sure you want to approve the documents of this client?","cancel-title":"Cancelled","confirm-title":"Cancelled!"},null,8,["isDialogVisible"]),s(k,{isDialogVisible:i(V),"onUpdate:isDialogVisible":t[5]||(t[5]=e=>D(V)?V.value=e:null),onConfirm:K,"confirmation-question":"Are you sure you want to reject the documents of this client?","cancel-title":"Cancelled","confirm-title":"Cancelled!"},null,8,["isDialogVisible"]),s(E,{modelValue:i(g),"onUpdate:modelValue":t[7]||(t[7]=e=>D(g)?g.value=e:null),"max-width":"500"},{default:l(()=>[s(A,null,{default:l(()=>[s(q,{class:"text-center px-10 py-6"},{default:l(()=>[s(p,{icon:"",variant:"outlined",color:"success",class:"my-4",style:{"block-size":"88px","inline-size":"88px","pointer-events":"none"}},{default:l(()=>[s(se,{icon:"tabler-check",size:"38"})]),_:1}),o("h1",me,m(i(y)),1),o("p",null,m(i(h)),1),s(p,{color:"success",onClick:t[6]||(t[6]=e=>B())},{default:l(()=>[r(" OK ")]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),s(E,{modelValue:i(b),"onUpdate:modelValue":t[8]||(t[8]=e=>D(b)?b.value=e:null),"max-width":"500"},{default:l(()=>[s(A,null,{default:l(()=>[s(q,{class:"text-center px-10 py-6"},{default:l(()=>[s(p,{icon:"",variant:"outlined",color:"error",class:"my-4",style:{"block-size":"88px","inline-size":"88px","pointer-events":"none"}},{default:l(()=>[_e]),_:1}),o("h1",ve,m(i(C)),1),o("p",null,m(i(x)),1),s(p,{color:"success",onClick:B},{default:l(()=>[r(" Ok ")]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])],64)}}};export{$e as _};
