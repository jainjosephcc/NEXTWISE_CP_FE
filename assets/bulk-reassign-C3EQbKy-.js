import{r as ae}from"./validators-DpYrMFzk.js";import{f as oe}from"./formatters-MfVJSZma.js";import{_ as se}from"./ConfirmDialog-2HfV989T.js";import{_ as ne}from"./CustomStaffCardChip-CDfRdCbt.js";import{_ as ie}from"./AppSelect-DUMJkAgj.js";import{_ as ue}from"./CustomManagerSelectWidget-C2G3CT3W.js";import{_ as re}from"./AppTextField-BaVqu4jK.js";import{f as me,s as de}from"./apiUtils-BQAgA1__.js";import{$ as E}from"./api-BaRI-q-y.js";import{V as M,a as r}from"./VRow-BrBOniq2.js";import{V as $}from"./VDialog-DO1lt7PQ.js";import{V as x}from"./VCard-DScfi5So.js";import{V as ce}from"./VCardTitle-DN6VETOB.js";import{V as q}from"./VCheckbox-CUvBVl8g.js";import{V as pe}from"./VTable-CM4FBYo2.js";import{r as n,E as fe,w as _e,o as D,c as R,d as i,b as e,e as a,m as s,aV as u,t as w,f as ve,F as Ve,h as ge,v as d,y as xe,ai as b,a0 as be}from"./index-VIgWIw9z.js";import{V as z}from"./VCardText-DIMXcuil.js";import"./helpers-DK5QwNv0.js";import"./permission-B0BZvmkn.js";import"./VList-Bn5a5y5R.js";import"./index-CyI2hWI8.js";import"./ssrBoot-BLlZaoP9.js";import"./transition-CZ13CYou.js";import"./createSimpleFunctional-CCI-bGJ3.js";import"./VAvatar-B9FI6N68.js";import"./VImg-BQR-30dM.js";import"./VDivider-C0ssATun.js";import"./form-D5earr4N.js";import"./VSelect-BnxhhcdK.js";import"./VTextField-Bkm-lU-B.js";/* empty css                   */import"./VCounter-DELH-t7W.js";import"./VField-CGsPVke0.js";import"./easing-CjukEv2V.js";import"./VInput-C2xQUOvp.js";import"./forwardRefs-C-GTDzx5.js";import"./dialog-transition-BzBIeMyZ.js";import"./VMenu-CyOlJkau.js";import"./VOverlay-DKlk4GO4.js";import"./lazy-fDnYxLbP.js";import"./scopeId-BZPXlNMJ.js";import"./VCheckboxBtn-BbkRNVdL.js";import"./VSelectionControl-BxKTAbpm.js";import"./VChip-D7Zky-hd.js";import"./VSlideGroup-DVSDBfNI.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./useApi-3M1a1JP0.js";import"./index-B3bPRkoL.js";/* empty css              */const ye={class:"d-flex mb-6"},Ce=i("h5",{class:"ms-5 pt-6"}," From ",-1),he=i("th",null," Name/Email ",-1),Se=i("th",null," Phone ",-1),Te=i("th",null," Joined On ",-1),Me={class:"text-caption me-0 ms-0",style:{"padding-left":"2px"}},De={class:"text-caption me-0 ms-0",style:{"padding-left":"2px"}},we=i("h5",{class:"ms-5 pt-6"}," To ",-1),ke={class:"text-h4 mb-4"},Ue=i("span",{class:"text-5xl font-weight-light"},"X",-1),Ae={class:"text-h4 mb-4"},wt={__name:"bulk-reassign",setup(Ee){const c=n(null),P=n(null),p=n(null),f=n(null),_=n(null),v=n(null),W=n(null),F=n([]),j=n([]),y=n(""),C=n(!1),m=n([]),V=n(""),I=n([]),h=n(!1),g=n(!1),S=n(!1);let k=n(""),U=n(""),N=n(""),B=n("");const G=[{text:"Normal User",value:0},{text:"Requested to be IB",value:1},{text:"Currently IB",value:2}],H=[{text:"All",value:""},{text:"Not Deposited",value:0},{text:"Deposited",value:1}],J=[{text:"All",value:""},{text:"Not Created Anything",value:0},{text:"Live Account Created",value:1},{text:"Only Demo Account Created",value:2}];fe(async()=>{K(),await me(),I.value=de.value.map(o=>({title:o.staff_name,value:o.id.toString()}))});const K=async()=>{try{const o=await E("/getmyTeamMembers",{method:"GET"});o&&(W.value=o,F.value=o.team_details,j.value=o.team_details)}catch(o){console.error("Error fetching algo list:",o),error.value=o}},L=async()=>{const o=await E("/getmySortedTeamClients",{method:"POST",body:{keyword:c.value,RM:V.value,deposit_status:_.value,mt_account_status:f.value,is_ib:v.value},onResponseError({response:t}){}});y.value=o.client_details};function X(){c.value.length>=2&&L()}function Q(){C.value===!0?m.value=y.value.map(o=>o.id):m.value=[]}_e([P,v,_,f],()=>{L()},{deep:!0,immediate:!1});const Y=async o=>{if(o)try{await E("/updateClManager",{method:"POST",body:{old_manager_id:V.value,new_manager_id:p.value,client_list:m.value},onResponseError({response:A}){k.value="Something Went Wrong !",U.value=A._data.message,g.value=!0}})&&(N.value="Success !",B.value="Client Transfered Successfully !",S.value=!0)}catch(t){k.value="Something Went Wrong !",U.value=t.data.message,g.value=!0}},O=async o=>{window.location.reload()};return(o,t)=>{const A=re,Z=ue,T=ie,ee=ne,te=se;return D(),R("section",null,[i("div",ye,[e(M,null,{default:a(()=>[e(r,{cols:"12"},{default:a(()=>[e(x,null,{default:a(()=>[e(ce,null,{default:a(()=>[w(" Client Reassign ")]),_:1})]),_:1})]),_:1}),e(r,{cols:"6"},{default:a(()=>[e(x,null,{default:a(()=>[Ce,e(M,{class:"mb-4"},{default:a(()=>[e(r,{class:"ms-3"},{default:a(()=>[e(A,{modelValue:s(c),"onUpdate:modelValue":t[0]||(t[0]=l=>u(c)?c.value=l:null),label:"CID/NAME/EMAIL/PHONE",rules:["requiredValidator"in o?o.requiredValidator:s(ae)],onInput:X},null,8,["modelValue","rules"])]),_:1}),e(Z,{modelValue:s(V),"onUpdate:modelValue":t[1]||(t[1]=l=>u(V)?V.value=l:null)},null,8,["modelValue"]),e(r,{cols:"4",class:"me-2"},{default:a(()=>[e(T,{modelValue:s(v),"onUpdate:modelValue":t[2]||(t[2]=l=>u(v)?v.value=l:null),items:G,"item-title":"text","item-value":"value",label:"IB Status","single-line":""},null,8,["modelValue"])]),_:1}),e(r,{cols:"4",class:"ms-3"},{default:a(()=>[e(T,{modelValue:s(_),"onUpdate:modelValue":t[3]||(t[3]=l=>u(_)?_.value=l:null),items:H,"item-title":"text","item-value":"value",label:"Deposit Status","single-line":""},null,8,["modelValue"])]),_:1}),e(r,{cols:"4",class:"me-3"},{default:a(()=>[e(T,{modelValue:s(f),"onUpdate:modelValue":t[4]||(t[4]=l=>u(f)?f.value=l:null),items:J,"item-title":"text","item-value":"value",label:"MT Account Status","single-line":""},null,8,["modelValue"])]),_:1})]),_:1}),e(M,{class:"ms-3"},{default:a(()=>[s(y)?(D(),ve(pe,{key:0,height:"800",class:"text-no-wrap"},{default:a(()=>[i("thead",null,[i("tr",null,[i("th",null,[e(q,{modelValue:s(C),"onUpdate:modelValue":t[5]||(t[5]=l=>u(C)?C.value=l:null),onChange:Q},null,8,["modelValue"])]),he,Se,Te]),(D(!0),R(Ve,null,ge(s(y),l=>(D(),R("tr",{class:"",key:l.transaction_id},[i("td",Me,[e(q,{modelValue:s(m),"onUpdate:modelValue":t[6]||(t[6]=le=>u(m)?m.value=le:null),value:l.id},null,8,["modelValue","value"])]),i("td",De,[e(ee,{rm_id:l.id,rm_name:l.client_name,rm_email:l.email},null,8,["rm_id","rm_name","rm_email"])]),i("td",null,d(l.contact_no),1),i("td",null,d(("formatDateToMonthShort"in o?o.formatDateToMonthShort:s(oe))(l.joined_on)),1)]))),128))])]),_:1})):xe("",!0)]),_:1})]),_:1})]),_:1}),e(r,{cols:"6"},{default:a(()=>[e(x,null,{default:a(()=>[we,e(M,{class:"my-3 mx-3"},{default:a(()=>[e(r,{cols:"12"},{default:a(()=>[e(T,{modelValue:s(p),"onUpdate:modelValue":t[7]||(t[7]=l=>u(p)?p.value=l:null),items:s(I),"item-title":"title","item-value":"value",label:"To RM","single-line":""},null,8,["modelValue","items"])]),_:1})]),_:1}),e(b,{class:"my-3 mx-4",disabled:s(m)==[]||s(p)===null,onClick:t[8]||(t[8]=l=>h.value=!0)},{default:a(()=>[w("Update")]),_:1},8,["disabled"])]),_:1})]),_:1})]),_:1})]),e(te,{isDialogVisible:s(h),"onUpdate:isDialogVisible":t[9]||(t[9]=l=>u(h)?h.value=l:null),onConfirm:Y,"confirmation-question":"Do you want to transfer client?","cancel-title":"Cancelled","confirm-title":"Cancelled!"},null,8,["isDialogVisible"]),e($,{modelValue:s(S),"onUpdate:modelValue":t[11]||(t[11]=l=>u(S)?S.value=l:null),"max-width":"500"},{default:a(()=>[e(x,null,{default:a(()=>[e(z,{class:"text-center px-10 py-6"},{default:a(()=>[e(b,{icon:"",variant:"outlined",color:"success",class:"my-4",style:{"block-size":"88px","inline-size":"88px","pointer-events":"none"}},{default:a(()=>[e(be,{icon:"tabler-check",size:"38"})]),_:1}),i("h1",ke,d(s(N)),1),i("p",null,d(s(B)),1),e(b,{color:"success",onClick:t[10]||(t[10]=l=>O())},{default:a(()=>[w(" OK ")]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),e($,{modelValue:s(g),"onUpdate:modelValue":t[12]||(t[12]=l=>u(g)?g.value=l:null),"max-width":"500"},{default:a(()=>[e(x,null,{default:a(()=>[e(z,{class:"text-center px-10 py-6"},{default:a(()=>[e(b,{icon:"",variant:"outlined",color:"error",class:"my-4",style:{"block-size":"88px","inline-size":"88px","pointer-events":"none"}},{default:a(()=>[Ue]),_:1}),i("h1",Ae,d(s(k)),1),i("p",null,d(s(U)),1),e(b,{color:"success",onClick:O},{default:a(()=>[w(" Ok ")]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])])}}};export{wt as default};
