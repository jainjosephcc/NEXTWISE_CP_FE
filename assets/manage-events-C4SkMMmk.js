import{h as ve}from"./permission-DR6oB80B.js";import{_ as ne}from"./ConfirmDialog-BGSsLnNH.js";import{_ as ue}from"./AppSelect-tvS57Qwf.js";import{_ as re}from"./AppTextField-CjSkXWoQ.js";import{_ as fe}from"./AppDrawerHeaderSection-BUbwebZV.js";import{_ as de}from"./AppTextarea-B5Mualtg.js";import{P as ye}from"./vue3-perfect-scrollbar.esm-CjeltA4F.js";import{$ as te}from"./api-C6qNj58O.js";import{V as ce}from"./VDivider-Ck6IUcUu.js";import{V as U}from"./VCard-DzvGnMGY.js";import{V as M}from"./VCardText-BOevd2Ra.js";import{V as ae,a as f}from"./VRow-DHqMdoTH.js";import{r as t,w as se,o as p,f as K,e as l,b as e,m as pe,c as x,y,ai as v,t as m,a0 as J,d as o,v as r,b0 as _e,F as ie,E as Ve,h as ge}from"./index-CBhVZTc4.js";import{V as q}from"./VDialog-B_-n48am.js";import{V as xe}from"./VNavigationDrawer-pdrsY1DD.js";import{_ as be}from"./DialogCloseBtn-D3m39yH2.js";import{V as me}from"./VCardTitle-DmFFmBUz.js";import{V as he}from"./VForm-DJUZjPyQ.js";import{V as De}from"./VTable-rpuj3o2L.js";import{V as Y}from"./VChip-CebBU3Yz.js";import"./form-CHAnpK0q.js";import"./VSelect-Bb1LeguW.js";import"./VTextField-BNJDaVnd.js";/* empty css                   */import"./VCounter-D_PCOUfE.js";import"./index-CuZpdFX_.js";import"./transition-Bii-6cK3.js";import"./VField-Bnwqjrt3.js";import"./easing-CjukEv2V.js";import"./VInput-L1rHHHdb.js";import"./forwardRefs-C-GTDzx5.js";import"./VImg-DY51D92d.js";import"./VList-CJR07tl_.js";import"./ssrBoot-CH-p_BIW.js";import"./createSimpleFunctional-8IiIDXa4.js";import"./VAvatar-BzNqWKNR.js";import"./dialog-transition-CKZfnOmQ.js";import"./VMenu-BZR14QVz.js";import"./VOverlay-ZCGm6oTg.js";import"./lazy-Dxhhn4Dl.js";import"./scopeId-BLvvDgI7.js";import"./VCheckboxBtn-DdKQthZ3.js";import"./VSelectionControl-tG6hWANL.js";import"./VSpacer-Dp30B8rR.js";/* empty css              */import"./VTextarea-4DyS9GMU.js";import"./index-B3bPRkoL.js";import"./VSlideGroup-DB7CBl5R.js";const Ee={key:0,class:"text-error",style:{"font-size":"12px"}},we={key:1,class:"text-error",style:{"font-size":"12px"}},Ce={key:0,class:"text-error",style:{"font-size":"12px"}},ke={key:0,class:"text-error",style:{"font-size":"12px"}},Oe={key:0,class:"text-error",style:{"font-size":"12px"}},Ae={key:0,class:"text-error",style:{"font-size":"12px"}},Ue={class:"text-h4 mb-4"},$e=o("span",{class:"text-5xl font-weight-light"},"X",-1),Te={class:"text-h4 mb-4"},Se={__name:"AddEventDialog",props:{isDrawerOpen:{type:Boolean,required:!0}},emits:["update:isDrawerOpen","userData"],setup(Q,{emit:N}){t(!1),t(!1),t();const _=t(""),z=t(""),$=t(null),L=t(null),b=t(null),w=t(null),h=t(!1),C=t(!1),V=t(!1),D=t(!1),g=t(!1),k=t(!1),P=t(!1),R=t(""),W=t(""),I=t(""),O=t(""),T=t(null),n=t(!1),u=t(!1),E=t(!1),A=t(!1),G=[{text:"Low",value:"LOW"},{text:"Medium",value:"MEDIUM"},{text:"High",value:"HIGH"}],s=[{text:"Global",value:"GLOBAL"},{text:"Personal",value:"PERSONAL"}],F=Q,d=N,i=B=>{d("update:isDrawerOpen",B)},H=()=>{d("update:isDrawerOpen",!1)},j=async B=>{var a,ee;if(B){g.value=!0,k.value=!0;try{const S=await te("schedule/add",{method:"POST",body:{title:_.value,short_description:z.value,priority:$.value,type:L.value,date:b.value,location:w.value},onResponseError({response:X}){var le;console.log("Error response:",X),I.value="Something Went Wrong!",O.value=((le=X._data)==null?void 0:le.message)||"Error occurred",g.value=!1,k.value=!1,V.value=!0}});console.log("API response:",S),S&&(R.value="Success!",W.value="Event added successfully!",g.value=!1,k.value=!1,D.value=!0)}catch(S){console.log("API error:",S),I.value="Something Went Wrong!",O.value=((ee=(a=S.response)==null?void 0:a.data)==null?void 0:ee.message)||S.message,g.value=!1,k.value=!1,V.value=!0}}};se([_,w],([B,a])=>{B.length>=255?h.value=!0:h.value=!1,a.length>=255?C.value=!0:C.value=!1},{deep:!0,immediate:!1});function oe(){n.value=!1,u.value=!1,E.value=!1,A.value=!1,_.value||(n.value=!0),$.value||(u.value=!0),L.value||(E.value=!0),b.value||(A.value=!0),_.value&&$.value&&L.value&&b.value?(T.value=!0,P.value=!0):T.value=!1}const Z=()=>{window.location.reload()};return(B,a)=>{const ee=fe,S=re,X=ue,le=ne;return p(),K(xe,{temporary:"",width:400,location:"end",class:"scrollable-content","model-value":F.isDrawerOpen,"onUpdate:modelValue":i},{default:l(()=>[e(ee,{title:"Add New Event",onCancel:H}),e(ce),e(pe(ye),{options:{wheelPropagation:!1}},{default:l(()=>[e(U,{flat:""},{default:l(()=>[e(M,null,{default:l(()=>[e(ae,null,{default:l(()=>[e(f,{cols:"12"},{default:l(()=>[e(S,{modelValue:_.value,"onUpdate:modelValue":a[0]||(a[0]=c=>_.value=c),label:"Event Title",placeholder:"Enter event title"},null,8,["modelValue"]),h.value?(p(),x("span",Ee,"Only 255 characters are allowed")):y("",!0),n.value?(p(),x("span",we," Event title is mandatory ")):y("",!0)]),_:1}),e(f,{cols:"12"},{default:l(()=>[e(de,{modelValue:z.value,"onUpdate:modelValue":a[1]||(a[1]=c=>z.value=c),label:"Description",placeholder:"Enter short description"},null,8,["modelValue"])]),_:1}),e(f,{cols:"12"},{default:l(()=>[e(X,{modelValue:$.value,"onUpdate:modelValue":a[2]||(a[2]=c=>$.value=c),items:G,"item-title":"text","item-value":"value",label:"Priority","single-line":""},null,8,["modelValue"]),u.value?(p(),x("span",Ce," Event priority is mandatory ")):y("",!0)]),_:1}),e(f,{cols:"12"},{default:l(()=>[e(X,{modelValue:L.value,"onUpdate:modelValue":a[3]||(a[3]=c=>L.value=c),items:s,"item-title":"text","item-value":"value",label:"Type","single-line":""},null,8,["modelValue"]),E.value?(p(),x("span",ke," Event type is mandatory ")):y("",!0)]),_:1}),e(f,{cols:"12"},{default:l(()=>[e(S,{modelValue:b.value,"onUpdate:modelValue":a[4]||(a[4]=c=>b.value=c),label:"Date",placeholder:"Enter event date",type:"date"},null,8,["modelValue"]),A.value?(p(),x("span",Oe," Event date is mandatory ")):y("",!0)]),_:1}),e(f,{cols:"12"},{default:l(()=>[e(S,{modelValue:w.value,"onUpdate:modelValue":a[5]||(a[5]=c=>w.value=c),label:"Location",placeholder:"Enter event location"},null,8,["modelValue"]),C.value?(p(),x("span",Ae,"Only 255 characters are allowed")):y("",!0)]),_:1}),e(f,{cols:"12"},{default:l(()=>[e(v,{class:"me-3",onClick:a[6]||(a[6]=c=>oe()),loading:g.value,disabled:k.value},{default:l(()=>[m(" Add ")]),_:1},8,["loading","disabled"]),e(v,{type:"reset",variant:"tonal",color:"error",onClick:H},{default:l(()=>[m(" Cancel ")]),_:1})]),_:1})]),_:1})]),_:1}),e(le,{isDialogVisible:P.value,"onUpdate:isDialogVisible":a[7]||(a[7]=c=>P.value=c),onConfirm:j,"confirmation-question":"Are you sure you want to add this event?","cancel-title":"Cancelled","confirm-title":"Confirmed!"},null,8,["isDialogVisible"]),e(q,{modelValue:D.value,"onUpdate:modelValue":a[8]||(a[8]=c=>D.value=c),"max-width":"500"},{default:l(()=>[e(U,null,{default:l(()=>[e(M,{class:"text-center px-10 py-6"},{default:l(()=>[e(v,{icon:"",variant:"outlined",color:"success",class:"my-4",style:{"block-size":"88px","inline-size":"88px","pointer-events":"none"}},{default:l(()=>[e(J,{icon:"tabler-check",size:"38"})]),_:1}),o("h1",Ue,r(R.value),1),o("p",null,r(W.value),1),e(v,{color:"success",onClick:Z},{default:l(()=>[m("OK")]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),e(q,{modelValue:V.value,"onUpdate:modelValue":a[10]||(a[10]=c=>V.value=c),"max-width":"500"},{default:l(()=>[e(U,null,{default:l(()=>[e(M,{class:"text-center px-10 py-6"},{default:l(()=>[e(v,{icon:"",variant:"outlined",color:"error",class:"my-4",style:{"block-size":"88px","inline-size":"88px","pointer-events":"none"}},{default:l(()=>[$e]),_:1}),o("h1",Te,r(I.value),1),o("p",null,r(O.value),1),e(v,{color:"error",onClick:a[9]||(a[9]=c=>V.value=!1)},{default:l(()=>[m("OK")]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1},8,["model-value"])}}},Me={key:0,class:"text-error",style:{"font-size":"12px"}},ze={key:0,class:"text-error",style:{"font-size":"12px"}},Le={class:"text-h4 mb-4"},Pe=o("span",{class:"text-5xl font-weight-light"},"X",-1),Ie={class:"text-h4 mb-4"},Be={__name:"EditEventDialog",props:{isDialogVisible:{type:Boolean,required:!0},selectedEvent:{type:Object,required:!1}},emits:["submit","update:isDialogVisible"],setup(Q,{emit:N}){const _=Q,z=N,$=[{text:"Low",value:"LOW"},{text:"Medium",value:"MEDIUM"},{text:"High",value:"HIGH"}],L=[{text:"Global",value:"GLOBAL"},{text:"Personal",value:"PERSONAL"}],b=t(!1),w=t(!1),h=t(!1),C=t(!1),V=t(!1),D=t(!1),g=t(!1),k=t(""),P=t(""),R=t(""),W=t(""),I=t(null),O=t(""),T=t(""),n=t(null),u=t(null),E=t(null),A=t("");se(()=>_.selectedEvent,d=>{d&&(I.value=d.id,O.value=d.title||"",T.value=d.short_description||"",n.value=d.priority||"",u.value=d.type||"",E.value=d.date||"",A.value=d.location||"")},{immediate:!0});const G=d=>{z("update:isDialogVisible",d)},s=async d=>{var i;if(d){D.value=!0,g.value=!0;try{await te("schedule/update",{method:"POST",body:{id:I.value,title:O.value,short_description:T.value,priority:n.value,type:u.value,date:E.value,location:A.value}})&&(R.value="Updated!",W.value="Event data updated successfully!",D.value=!1,g.value=!1,w.value=!0)}catch(H){k.value="Something went wrong!",P.value=((i=H.data)==null?void 0:i.message)||"Unknown error occurred.",D.value=!1,g.value=!1,h.value=!0}}};se([O,A],([d,i])=>{d.length>=255?C.value=!0:C.value=!1,i.length>=255?V.value=!0:V.value=!1},{deep:!0,immediate:!1});const F=async d=>{window.location.reload()};return(d,i)=>{const H=be,j=re,oe=de,Z=ue,B=ne;return p(),x(ie,null,[e(q,{width:d.$vuetify.display.smAndDown?"auto":600,"model-value":_.isDialogVisible,"onUpdate:modelValue":G},{default:l(()=>[e(H,{onClick:i[0]||(i[0]=a=>G(!1))}),e(U,null,{default:l(()=>[e(me,{class:"pt-3"},{default:l(()=>[m("Update Event")]),_:1}),e(ce),e(M,null,{default:l(()=>[e(he,{onSubmit:_e(()=>{},["prevent"])},{default:l(()=>[e(ae,null,{default:l(()=>[e(f,{cols:"12"},{default:l(()=>[e(j,{modelValue:O.value,"onUpdate:modelValue":i[1]||(i[1]=a=>O.value=a),label:"Event Title"},null,8,["modelValue"]),C.value?(p(),x("span",Me,"Only 255 characters are allowed")):y("",!0)]),_:1}),e(f,{cols:"12"},{default:l(()=>[e(oe,{modelValue:T.value,"onUpdate:modelValue":i[2]||(i[2]=a=>T.value=a),label:"Description"},null,8,["modelValue"])]),_:1}),e(f,{cols:"12",md:"6"},{default:l(()=>[e(Z,{modelValue:n.value,"onUpdate:modelValue":i[3]||(i[3]=a=>n.value=a),items:$,"item-title":"text","item-value":"value",label:"Priority","single-line":""},null,8,["modelValue"])]),_:1}),e(f,{cols:"12",md:"6"},{default:l(()=>[e(Z,{modelValue:u.value,"onUpdate:modelValue":i[4]||(i[4]=a=>u.value=a),items:L,"item-title":"text","item-value":"value",label:"Type","single-line":""},null,8,["modelValue"])]),_:1}),e(f,{cols:"12",md:"6"},{default:l(()=>[e(j,{modelValue:E.value,"onUpdate:modelValue":i[5]||(i[5]=a=>E.value=a),label:"Date",placeholder:"Enter event date",type:"date"},null,8,["modelValue"])]),_:1}),e(f,{cols:"12",md:"6"},{default:l(()=>[e(j,{modelValue:A.value,"onUpdate:modelValue":i[6]||(i[6]=a=>A.value=a),label:"Location",placeholder:"Enter event location"},null,8,["modelValue"]),V.value?(p(),x("span",ze,"Only 255 characters are allowed")):y("",!0)]),_:1})]),_:1})]),_:1})]),_:1}),e(M,{class:"d-flex justify-end flex-wrap gap-3"},{default:l(()=>[e(v,{variant:"tonal",color:"secondary",onClick:i[7]||(i[7]=a=>G(!1))},{default:l(()=>[m(" Close ")]),_:1}),e(v,{class:"me-2",color:"primary",onClick:i[8]||(i[8]=a=>b.value=!0),loading:D.value,disabled:g.value},{default:l(()=>[m(" Update ")]),_:1},8,["loading","disabled"])]),_:1})]),_:1})]),_:1},8,["width","model-value"]),e(B,{isDialogVisible:b.value,"onUpdate:isDialogVisible":i[9]||(i[9]=a=>b.value=a),onConfirm:s,"confirmation-question":"Are you sure you want to update this Event?","cancel-title":"Cancelled","confirm-title":"Cancelled!"},null,8,["isDialogVisible"]),e(q,{modelValue:w.value,"onUpdate:modelValue":i[11]||(i[11]=a=>w.value=a),"max-width":"500"},{default:l(()=>[e(U,null,{default:l(()=>[e(M,{class:"text-center px-10 py-6"},{default:l(()=>[e(v,{icon:"",variant:"outlined",color:"success",class:"my-4",style:{"block-size":"88px","inline-size":"88px","pointer-events":"none"}},{default:l(()=>[e(J,{icon:"tabler-check",size:"38"})]),_:1}),o("h1",Le,r(R.value),1),o("p",null,r(W.value),1),e(v,{color:"success",onClick:i[10]||(i[10]=a=>F())},{default:l(()=>[m(" OK ")]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),e(q,{modelValue:h.value,"onUpdate:modelValue":i[12]||(i[12]=a=>h.value=a),"max-width":"500"},{default:l(()=>[e(U,null,{default:l(()=>[e(M,{class:"text-center px-10 py-6"},{default:l(()=>[e(v,{icon:"",variant:"outlined",color:"error",class:"my-4",style:{"block-size":"88px","inline-size":"88px","pointer-events":"none"}},{default:l(()=>[Pe]),_:1}),o("h1",Ie,r(k.value),1),o("p",null,r(P.value),1),e(v,{color:"success",onClick:F},{default:l(()=>[m(" Ok ")]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])],64)}}},Ne={class:"d-flex mb-6"},Re={class:"d-flex align-center justify-space-between"},We={key:0},Ge=o("thead",null,[o("tr",null,[o("th",null,"ID"),o("th",null,"TITLE"),o("th",null,"DESCRIPTION"),o("th",null,"PRIORITY"),o("th",null,"TYPE"),o("th",null,"DATE"),o("th",null,"LOCATION"),o("th",null,"ACTION")])],-1),He={class:"tip-text"},qe={class:"text-h4 mb-4"},Fe=o("span",{class:"text-5xl font-weight-light"},"X",-1),Ke={class:"text-h4 mb-4"},Wl={__name:"manage-events",setup(Q){const N=t(!1),_=t(!1),z=t(!1),$=t([]),L=t(null),b=t(null),w=t(null),h=t(!1),C=t(!1),V=t(""),D=t(""),g=t(""),k=t(""),P=async()=>{try{const n=await te("schedule/list",{method:"GET"});n&&($.value=n.data)}catch(n){console.error("Error fetching event list:",n),L.value=n}};function R(n){console.log("Editing event:",n),b.value=n,_.value=!0}function W(){N.value=!0}function I(n){w.value=n.id,z.value=!0}const O=async n=>{if(n)try{await te("schedule/delete",{method:"POST",body:{id:w.value},onResponseError({response:E}){V.value="Something Went Wrong!",D.value=E._data.message,h.value=!0}})&&(g.value="Deleted!",k.value="Event Deleted Successfully!",C.value=!0)}catch(u){V.value="Something Went Wrong!",D.value=u.data.message,h.value=!0}},T=async n=>{window.location.reload()};return Ve(async()=>{await P()}),(n,u)=>{const E=Be,A=Se,G=ne;return p(),x(ie,null,[o("section",null,[o("div",Ne,[e(ae,null,{default:l(()=>[e(f,{cols:"12"},{default:l(()=>[e(U,null,{default:l(()=>[e(M,null,{default:l(()=>[o("div",Re,[e(me,null,{default:l(()=>[m(" Manage Events ")]),_:1}),("hasAccess"in n?n.hasAccess:pe(ve))("add_staff")?(p(),x("div",We,[e(v,{class:"me-2",onClick:W},{default:l(()=>[m("Add Event")]),_:1})])):y("",!0)])]),_:1})]),_:1})]),_:1})]),_:1})]),e(U,{class:"mb-6"},{default:l(()=>[e(ae,null,{default:l(()=>[e(f,{cols:"12"},{default:l(()=>[e(U,null,{default:l(()=>[e(De,{height:"800","fixed-header":"",class:"text-no-wrap"},{default:l(()=>[Ge,o("tbody",null,[(p(!0),x(ie,null,ge($.value,s=>(p(),x("tr",{key:s.id},[o("td",null,r(s.id),1),o("td",null,r(s.title),1),o("td",He,r(s.short_description),1),o("td",null,[s.priority==="HIGH"?(p(),K(Y,{key:0,color:"error",label:!1},{default:l(()=>[m(r(s.priority),1)]),_:2},1024)):y("",!0),s.priority==="LOW"?(p(),K(Y,{key:1,color:"info",label:!1},{default:l(()=>[m(r(s.priority),1)]),_:2},1024)):y("",!0),s.priority==="MEDIUM"?(p(),K(Y,{key:2,color:"warning",label:!1},{default:l(()=>[m(r(s.priority),1)]),_:2},1024)):y("",!0)]),o("td",null,[s.type==="GLOBAL"?(p(),K(Y,{key:0,color:"primary",label:"",size:"small",variant:"outlined"},{default:l(()=>[m(r(s.type),1)]),_:2},1024)):y("",!0),s.type==="PERSONAL"?(p(),K(Y,{key:1,color:"info",label:"",size:"small",variant:"outlined"},{default:l(()=>[m(r(s.type),1)]),_:2},1024)):y("",!0)]),o("td",null,r(s.date),1),o("td",null,r(s.location),1),o("td",null,[e(J,{icon:"tabler-edit",class:"me-2",onClick:F=>R(s)},null,8,["onClick"]),e(J,{icon:"tabler-trash",onClick:F=>I(s)},null,8,["onClick"])])]))),128))])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),e(E,{isDialogVisible:_.value,"onUpdate:isDialogVisible":u[0]||(u[0]=s=>_.value=s),selectedEvent:b.value},null,8,["isDialogVisible","selectedEvent"]),e(A,{isDrawerOpen:N.value,"onUpdate:isDrawerOpen":u[1]||(u[1]=s=>N.value=s)},null,8,["isDrawerOpen"]),e(G,{isDialogVisible:z.value,"onUpdate:isDialogVisible":u[2]||(u[2]=s=>z.value=s),onConfirm:O,"confirmation-question":"Are you sure you want to delete this event?","cancel-title":"Cancelled","confirm-title":"Cancelled!"},null,8,["isDialogVisible"]),e(q,{modelValue:C.value,"onUpdate:modelValue":u[4]||(u[4]=s=>C.value=s),"max-width":"500"},{default:l(()=>[e(U,null,{default:l(()=>[e(M,{class:"text-center px-10 py-6"},{default:l(()=>[e(v,{icon:"",variant:"outlined",color:"success",class:"my-4",style:{"block-size":"88px","inline-size":"88px","pointer-events":"none"}},{default:l(()=>[e(J,{icon:"tabler-check",size:"38"})]),_:1}),o("h1",qe,r(g.value),1),o("p",null,r(k.value),1),e(v,{color:"success",onClick:u[3]||(u[3]=s=>T())},{default:l(()=>[m(" OK ")]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),e(q,{modelValue:h.value,"onUpdate:modelValue":u[5]||(u[5]=s=>h.value=s),"max-width":"500"},{default:l(()=>[e(U,null,{default:l(()=>[e(M,{class:"text-center px-10 py-6"},{default:l(()=>[e(v,{icon:"",variant:"outlined",color:"error",class:"my-4",style:{"block-size":"88px","inline-size":"88px","pointer-events":"none"}},{default:l(()=>[Fe]),_:1}),o("h1",Ke,r(V.value),1),o("p",null,r(D.value),1),e(v,{color:"success",onClick:T},{default:l(()=>[m(" Ok ")]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])],64)}}};export{Wl as default};
