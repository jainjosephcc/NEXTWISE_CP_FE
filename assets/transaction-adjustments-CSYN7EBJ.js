import{h as T}from"./permission-COXUeB44.js";import{f as q}from"./formatters-MfVJSZma.js";import{r as s,a4 as j,E as K,w as X,cn as Z,o as i,c as u,d as l,b as t,e as n,F as B,t as g,m as r,f as m,y as w,v as d,h as ee,de as te,ah as le,a$ as ae}from"./index-MgTNQxVX.js";import{_ as oe}from"./CustomTransactionStatusChip-BtZvSYV1.js";import{_ as se}from"./CustomMT5Chip-Ct_GswLb.js";import{_ as ne}from"./CustomStaffCardChip-YJRp0AFg.js";import{_ as ie}from"./CustomClientCardChip-Dc4QyZIo.js";import{_ as re}from"./AppTextField-DtIJKPhH.js";import{_ as me}from"./AppDateTimePicker-CZoCd95m.js";import{_ as ue}from"./CustomManagerSelectWidget-DBMKjxN4.js";import{_ as de}from"./AppSelect-tDvAStvn.js";import{_ as ce}from"./CustomPageHeaderWidget-C3EZDySG.js";import{_ as pe}from"./CLIENT_TransAdjustTicketDialog-D_k2ubEd.js";import{$ as _e}from"./api-B9uHuBdw.js";import{V as fe}from"./VCard-GjZhORBe.js";import{V as b}from"./VCardText-BOk-HfwD.js";import{V as k}from"./VDivider-CSkhLUKl.js";import{V as ve,a as C}from"./VRow-BGcwpjBg.js";import{V as he}from"./VSpacer-DyQ7y1VP.js";import{V as M}from"./VChip-D8cGd_Nk.js";import{V as Ve}from"./VTable-YgWz3nrC.js";import{V as ye}from"./VPagination-Cu-c2KiW.js";import{V as Te}from"./VSkeletonLoader-BQH1QuGu.js";import"./helpers-DK5QwNv0.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./VImg-B42m9A7W.js";import"./transition-_Xax5M9R.js";import"./VList-5vlsifz2.js";import"./index-DyKMM2Ft.js";import"./ssrBoot-CYrols-G.js";import"./createSimpleFunctional-oYa5xB7G.js";import"./VAvatar-wnXjew_Y.js";import"./form-CYMWMDe3.js";import"./VTextField-CoFv3QGW.js";/* empty css                   */import"./VCounter-SxgduR_A.js";import"./VField-Df50SrI3.js";import"./easing-CjukEv2V.js";import"./VInput-DAwT59S2.js";import"./forwardRefs-C-GTDzx5.js";import"./apiUtils-BauU_zFg.js";import"./useApi-7-q82HYv.js";import"./VSelect-5lsGLJa6.js";import"./dialog-transition-CItTByya.js";import"./VMenu-D6lEWhF2.js";import"./VOverlay-DwceuVdP.js";import"./lazy-Cj8GSj15.js";import"./scopeId-Do5sjjm7.js";import"./VCheckboxBtn-wesVee1z.js";import"./VSelectionControl-B8Rx6gSY.js";import"./ConfirmDialog-YJD91LgQ.js";import"./VDialog-7-XmTV6F.js";import"./DialogCloseBtn-J5WB80yX.js";import"./VCardTitle-BiITgjs_.js";import"./VForm-B-swBwR0.js";import"./VAlert-7h6UzPUT.js";import"./index-B3bPRkoL.js";/* empty css              */import"./VSlideGroup-B3SXn0uI.js";const ge={class:"me-3 d-flex gap-3"},be={style:{"inline-size":"15.625rem"}},Ce={class:"me-3 d-flex gap-3"},Ae={style:{"inline-size":"15.625rem"}},Se={class:"app-user-search-filter d-flex align-center flex-wrap gap-4"},De={class:"card-subtitle pt-3"},we=l("th",null,null,-1),ke=l("th",null," NAME/EMAIL ",-1),Me=l("th",null," ASSIGNED RM ",-1),xe=l("th",null," MT5 ID ",-1),Ee=l("th",null," TYPE ",-1),Ne=l("th",null," REQ.AMNT ",-1),Ue=l("th",null," STATUS ",-1),Ie={key:0},Pe={class:"text-caption me-0 ms-0",style:{"padding-left":"2px"}},$e=l("br",null,null,-1),je=l("span",{class:"text-caption text-xs"},"RM NOT MAPPED",-1),Be={key:0},Le={class:"d-flex flex-wrap justify-center justify-sm-space-between gap-y-2 mt-2"},Gt={__name:"transaction-adjustments",setup(Oe){const c=s(""),p=s(""),x=s(20),_=s(1),L=s(null),O=s(null),f=s(null),A=s(null),v=s(null),h=s(null),V=s(null),y=s(null),R=[{title:"All",value:null},{title:"All Credit In",value:"6"},{title:"LS Credit In",value:"0"},{title:"NLS Credit In",value:"1"},{title:"Credit Out",value:"2"},{title:"Adjustments",value:"3"},{title:"IB Commission",value:"4"}],z=[{title:"All",value:null},{title:"Pending",value:"0"},{title:"On Hold",value:"1"},{title:"Rejected",value:"2"},{title:"Approved",value:"3"}],E=async()=>{const a=await _e("/transactions/trans-adj-listing",{method:"POST",body:{page:_.value,manager:f.value,from_date:h.value,to_date:V.value,mt5id:p.value,keyword:c.value,ta_type:y.value,ta_status:A.value},onResponseError({response:o}){console.log(o)}});v.value=a},N=j(()=>{var a;return((a=v.value)==null?void 0:a.transaction_details.data)||[]}),S=j(()=>{var a;return((a=v.value)==null?void 0:a.transaction_details.total)||0});K(async()=>{E()}),X([_,x,L,O,f,y,c,p,h,V],()=>{E()},{deep:!0,immediate:!1}),Z(()=>{}),s(!1);const D=s(!1),U=s(null);function F(a){console.log(a),U.value=a,D.value=!0}return(a,o)=>{const Q=ce,I=de,W=ue,P=me,$=re,H=ie,G=ne,J=se,Y=oe;return i(),u(B,null,[l("section",null,[t(Q),t(fe,{class:"mb-6"},{default:n(()=>[t(b,{class:"py-4"},{default:n(()=>[g(" TRANSACTION ADJUSTMENTS ")]),_:1}),t(k),t(b,null,{default:n(()=>[t(ve,null,{default:n(()=>[t(C,{cols:"12",sm:"3"},{default:n(()=>[t(I,{modelValue:A.value,"onUpdate:modelValue":o[0]||(o[0]=e=>A.value=e),label:"Transaction Status",placeholder:"Transaction Status",items:z,clearable:"","clear-icon":"tabler-x"},null,8,["modelValue"])]),_:1}),t(C,{cols:"12",sm:"2"},{default:n(()=>[t(I,{modelValue:y.value,"onUpdate:modelValue":o[1]||(o[1]=e=>y.value=e),label:"Transaction Types",placeholder:"Transaction Type",items:R,clearable:"","clear-icon":"tabler-x"},null,8,["modelValue"])]),_:1}),("hasAccess"in a?a.hasAccess:r(T))("view_all_clients")||("hasAccess"in a?a.hasAccess:r(T))("view_my_team_clients")?(i(),m(W,{key:0,modelValue:f.value,"onUpdate:modelValue":o[2]||(o[2]=e=>f.value=e)},null,8,["modelValue"])):w("",!0),t(C,{cols:"12",sm:"2"},{default:n(()=>[t(P,{modelValue:h.value,"onUpdate:modelValue":o[3]||(o[3]=e=>h.value=e),label:"From Date",placeholder:"Select date",clearable:"","clear-icon":"tabler-x"},null,8,["modelValue"])]),_:1}),t(C,{cols:"12",sm:"2"},{default:n(()=>[t(P,{modelValue:V.value,"onUpdate:modelValue":o[4]||(o[4]=e=>V.value=e),label:"To Date",placeholder:"Select date",clearable:"","clear-icon":"tabler-x"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),t(k),t(b,{class:"d-flex flex-wrap gap-4"},{default:n(()=>[l("div",ge,[l("div",be,[t($,{modelValue:c.value,"onUpdate:modelValue":o[5]||(o[5]=e=>c.value=e),placeholder:"Search client by name/email"},null,8,["modelValue"])])]),l("div",Ce,[l("div",Ae,[t($,{modelValue:p.value,"onUpdate:modelValue":o[6]||(o[6]=e=>p.value=e),placeholder:"Search MT5 ID"},null,8,["modelValue"])])]),t(he),l("div",Se,[l("p",De,"TOTAL LISTED COUNT : "+d(S.value?S.value:0),1)])]),_:1}),t(k),v.value?(i(),m(Ve,{key:0,height:"800",class:"text-no-wrap"},{default:n(()=>[l("thead",null,[l("tr",null,[we,ke,Me,xe,Ee,Ne,Ue,("hasAccess"in a?a.hasAccess:r(T))("view_transaction_adjustment_details_page")?(i(),u("th",Ie," VIEW ")):w("",!0)])]),l("tbody",null,[N.value?(i(!0),u(B,{key:0},ee(N.value,e=>(i(),u("tr",{class:"",key:e.transaction_id},[l("td",Pe,[t(M,{size:"x-small"},{default:n(()=>[g(" #"+d(e.transaction_id),1)]),_:2},1024),$e,g(" "+d(("formatDateToMonthShort"in a?a.formatDateToMonthShort:r(q))(e.created_at)),1)]),l("td",null,[t(H,{client_id:e.client_id,client_name:e.client_name,email:e.email},null,8,["client_id","client_name","email"])]),l("td",null,[e.manager_id?(i(),m(G,{key:0,rm_id:e.manager_id,rm_name:e.rm_name},null,8,["rm_id","rm_name"])):(i(),m(M,{key:1,size:"x-small",variant:"outlined"},{default:n(()=>[je]),_:1}))]),l("td",null,[t(J,{client_id:e.client_id,mt_id:e.mt_id,is_wallet:e.is_wallet},null,8,["client_id","mt_id","is_wallet"])]),l("td",null,[t(M,{size:"small",class:"pr-3 pl-3 pt-1 pb-1"},{default:n(()=>[g(d(e.transaction_type),1)]),_:2},1024)]),l("td",null,d(("formatCurrency"in a?a.formatCurrency:r(te))(e.amount)),1),l("td",null,[t(Y,{trans_status:e.status},null,8,["trans_status"])]),("hasAccess"in a?a.hasAccess:r(T))("view_transaction_adjustment_details_page")?(i(),u("td",Be,[t(le,{color:"secondary",size:"x-small",variant:"elevated",class:"px-2 me-2 rounded",icon:"tabler-file-description",onClick:Re=>F(e)},null,8,["onClick"])])):w("",!0)]))),128)):(i(),m(ae,{key:1,indeterminate:"",color:"primary"}))])]),_:1})):(i(),m(Te,{key:1,type:"table-tbody"})),t(b,{class:"pt-2"},{default:n(()=>[l("div",Le,[t(ye,{modelValue:_.value,"onUpdate:modelValue":o[7]||(o[7]=e=>_.value=e),"total-visible":a.$vuetify.display.smAndDown?3:5,length:Math.ceil(S.value/x.value)},null,8,["modelValue","total-visible","length"])])]),_:1})]),_:1})]),t(pe,{isDialogVisible:D.value,"onUpdate:isDialogVisible":o[8]||(o[8]=e=>D.value=e),selectedTransaction:U.value},null,8,["isDialogVisible","selectedTransaction"])],64)}}};export{Gt as default};
