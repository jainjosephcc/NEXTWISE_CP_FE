import{r as a,a4 as Ae,w as pe,o as d,c as k,b as e,e as l,t as u,b0 as ke,m as b,d as t,v as x,f as A,y as T,ah as w,$ as ue,F as ve,b9 as Te,ba as $e,E as Oe,h as Me,bg as Ie,x as je,bb as Be}from"./index-B7DVBXb6.js";import{f as Xe}from"./formatters-MfVJSZma.js";import{r as ae}from"./validators-DpYrMFzk.js";import{_ as be}from"./ConfirmDialog-CHCp6S9v.js";import{_ as De}from"./AppTextField-SOmV41uD.js";import{_ as Se}from"./AppSelect-Chuurmae.js";import{_ as Ve}from"./CustomMT5Chip-Cpw9joKl.js";import{_ as ye}from"./CustomClientCardChip-B9radVMG.js";import{_ as Ue}from"./DialogCloseBtn-ByKsG3KU.js";import{$ as de}from"./api-iWVA-fzn.js";import{V as Q,b as Ne}from"./VCard-DwrpuyUm.js";import{V as oe}from"./VCardTitle-vKV3lDGn.js";import{V as fe}from"./VDivider-CxEbendv.js";import{V as we}from"./VForm-ufWByZ4U.js";import{V as D,a as n}from"./VRow-BrVMZuB9.js";import{V as ee}from"./VSwitch-CzUEq89W.js";import{V as se}from"./VDialog-BiIRwhKC.js";import{V as re}from"./VCardText-Cz0O4UdD.js";import{_ as Ee}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{V as ze}from"./VTable-THd5MxoR.js";import{a as O,b as j}from"./VList-D72edMu7.js";import{V as ge}from"./VChip-B1ab4KKX.js";import{V as Fe}from"./VSkeletonLoader-BSqpN8t2.js";import{V as We,a as Ke}from"./VTimelineItem-DrrIILaX.js";import"./helpers-DK5QwNv0.js";import"./form-B4F4dOHR.js";import"./VTextField-2MqVR-uf.js";/* empty css                   */import"./VCounter-DftKKLOA.js";import"./index-Dh-m6d15.js";import"./transition-Dd-W0Z6m.js";import"./VField-uIYdRk1I.js";import"./easing-CjukEv2V.js";import"./VInput-lxjNjOBh.js";import"./forwardRefs-C-GTDzx5.js";import"./VImg-BjgCukri.js";import"./VSelect-BhfyuaH2.js";import"./dialog-transition-Lv4mEjsG.js";import"./VMenu-CVHKc0mw.js";import"./VOverlay-CtWk2Duf.js";import"./lazy-Y9WA560v.js";import"./scopeId-DcXJYuoN.js";import"./VCheckboxBtn-BHeipsl1.js";import"./VSelectionControl-BMQtAVFK.js";import"./VAvatar-Ra1G3_lq.js";import"./permission-BvJbWOm-.js";import"./index-B3bPRkoL.js";import"./createSimpleFunctional-DmsxsSBz.js";/* empty css              */import"./ssrBoot-DrrL7aUO.js";import"./VSlideGroup-Wswso1AF.js";const Ge={class:"ml-4 my-1"},Qe=t("div",null,"Master Account",-1),He=t("h4",{class:"ml-4 my-1"}," Slave : ",-1),Je=t("div",null,"Mapped Slave",-1),Ye={class:"mt-4"},Ze={class:"mt-4"},el={class:"mt-4"},ll=t("span",{class:"text-5xl font-weight-light"},"X",-1),tl={class:"text-h4 mb-4"},al={class:"text-h4 mb-4"},sl={__name:"EditSlaveDialog",props:{isDialogVisible:{type:Boolean,required:!0},slaveDetails:{type:Object,required:!0},selectedSlave:{type:Object,required:!0}},emits:["submit","update:isDialogVisible"],setup(U,{emit:ne}){a(""),a([]),a(null),a(null);const z=a(!1),p=[{text:"Fixed Lot",value:"FIXL"},{text:"Lot Multiplier",value:"LMUL"},{text:"Balance Multiplier",value:"BMUL"},{text:"Equity Multiplier",value:"EMUL"},{text:"Fixed Balance Multiplier",value:"FBMUL"}],_=a(null),L=a(null),E=a(!1),W=a(!1),h=a(!1),I=a(null),$=a(null),F=a(!1),X=a(!1),q=a(!1),B=a(!1);a(null);const N=a(!1);let K=a(""),R=a(""),G=a(""),H=a("");const M=U,S=ne,Z=C=>{S("update:isDialogVisible",C)};Ae(()=>{switch(_.value){case"FIXL":return"";case"LMUL":case"BMUL":case"EMUL":case"FBMUL":return"%";default:return"%"}});const le=C=>/^(\d+|\d*\.\d{1,2})$/.test(C.toString())||"Must be a number with up to 2 decimal places";pe(()=>M.selectedSlave,C=>{C&&(z.value=C.is_config_identical===1,_.value=C.risk_approach,L.value=C.multiplier,$.value=C.lot_size,E.value=C.copy_sl===1,W.value=C.copy_tp===1,h.value=C.is_reverse===1,I.value=C.fixed_balance)},{immediate:!0});const P=async C=>{var V;if(C){B.value=!0;try{console.log("Client ID:",M.selectedSlave.client_id);const r=await de("/copier-slaves/update",{method:"POST",body:{id:M.selectedSlave.id,is_config_identical:z.value,risk_approach:_.value,lot_size:$.value,multiplier:L.value,fixed_balance:I.value,copy_sl:E.value,copy_tp:W.value,is_reverse:h.value,status:!0,is_live:!0}});G.value="Success!",H.value="Slave Updated Successfully!",q.value=!0}catch(r){console.error("API Call Error:",r),K.value="Something Went Wrong!",R.value=((V=r.data)==null?void 0:V.message)||"An error occurred",X.value=!0}finally{B.value=!1}}};pe(()=>_.value,C=>{C!=="FIXL"?$.value="0":L.value="0"});const ie=()=>{window.location.reload()};return(C,V)=>{const r=Ue,m=ye,J=Ve,c=Se,s=De,Y=be;return d(),k(ve,null,[e(se,{width:C.$vuetify.display.smAndDown?"auto":650,"model-value":M.isDialogVisible,"onUpdate:modelValue":Z},{default:l(()=>[e(r,{onClick:V[0]||(V[0]=f=>Z(!1))}),e(Q,null,{default:l(()=>[e(oe,{class:"pt-3"},{default:l(()=>[u("Edit Slave Account")]),_:1}),e(fe),e(we,{class:"ml-3",onSubmit:ke(()=>{},["prevent"])},{default:l(()=>[e(b(D),null,{default:l(()=>[e(n,{cols:"12",class:"ml-2"},{default:l(()=>[t("h4",Ge," Master : "+x(M.slaveDetails.mc_name),1),e(b(D),{class:"d-flex justify-space-between align-center flex-wrap"},{default:l(()=>[e(n,{class:"d-flex align-center"},{default:l(()=>[e(m,{class:"mx-3 my-2",client_name:M.slaveDetails.client.client_name,client_id:M.slaveDetails.client.id,email:M.slaveDetails.client.email,client_pic:M.slaveDetails.client_pic},null,8,["client_name","client_id","email","client_pic"])]),_:1}),e(n,{class:"d-flex align-center flex-column pb-6 mr-6",cols:"auto"},{default:l(()=>{var f;return[e(J,{class:"mb-2 mr-2",client_id:M.slaveDetails.client.id,mt_id:(f=M.slaveDetails.mc_mt5_id)==null?void 0:f.toString(),is_wallet:0},null,8,["client_id","mt_id"]),Qe]}),_:1})]),_:1})]),_:1}),e(n,{cols:"12",class:"ml-2"},{default:l(()=>[He,e(b(D),{class:"d-flex justify-space-between align-center flex-wrap"},{default:l(()=>[e(n,{class:"d-flex align-center"},{default:l(()=>[e(m,{class:"mx-3 my-2",client_name:M.slaveDetails.slaves[0].client.client_name,client_id:M.slaveDetails.slaves[0].client.id,email:M.slaveDetails.slaves[0].client.email,client_pic:M.slaveDetails.slaves[0].client.profile_pic},null,8,["client_name","client_id","email","client_pic"])]),_:1}),e(n,{class:"d-flex align-center flex-column pb-6 mr-6",cols:"auto"},{default:l(()=>{var f;return[e(J,{class:"mb-2 mr-2",client_id:M.slaveDetails.slaves[0].client.id,mt_id:(f=M.slaveDetails.slaves[0].sl_mt5_id)==null?void 0:f.toString(),is_wallet:0},null,8,["client_id","mt_id"]),Je]}),_:1})]),_:1})]),_:1})]),_:1}),e(fe,{class:"mb-2"}),e(b(D),null,{default:l(()=>[e(n,{cols:"12"}),e(n,{cols:"6"},{default:l(()=>[e(c,{modelValue:_.value,"onUpdate:modelValue":V[1]||(V[1]=f=>_.value=f),items:p,"item-title":"text","item-value":"value",label:"Risk Approach"},null,8,["modelValue"])]),_:1}),_.value==="FIXL"?(d(),A(n,{key:0,cols:"5",class:"mr-1"},{default:l(()=>[e(s,{label:"Lot Size",modelValue:$.value,"onUpdate:modelValue":V[2]||(V[2]=f=>$.value=f),type:"number",min:"0",rules:["requiredValidator"in C?C.requiredValidator:b(ae),le]},null,8,["modelValue","rules"])]),_:1})):T("",!0),_.value==="LMUL"||_.value==="BMUL"||_.value==="EMUL"||_.value==="FBMUL"?(d(),A(n,{key:1,cols:"5",class:"mr-1"},{default:l(()=>[e(s,{label:"Multiplier",modelValue:L.value,"onUpdate:modelValue":V[3]||(V[3]=f=>L.value=f),type:"number",min:"0",suffix:"%",rules:["requiredValidator"in C?C.requiredValidator:b(ae),le]},null,8,["modelValue","rules"])]),_:1})):T("",!0),_.value==="FBMUL"?(d(),A(n,{key:2,cols:"6"},{default:l(()=>[e(s,{label:"Fixed Master Balance",modelValue:I.value,"onUpdate:modelValue":V[4]||(V[4]=f=>I.value=f),type:"number",min:"0",rules:["requiredValidator"in C?C.requiredValidator:b(ae),le]},null,8,["modelValue","rules"])]),_:1})):T("",!0)]),_:1}),e(b(D),{class:"ml-2"},{default:l(()=>[e(oe,null,{default:l(()=>[u("Advanced Settings")]),_:1})]),_:1}),e(b(D),{class:"ml-2"},{default:l(()=>[e(n,{cols:"4"},{default:l(()=>[t("div",Ye,[e(ee,{modelValue:E.value,"onUpdate:modelValue":V[5]||(V[5]=f=>E.value=f),label:"Copy Stop Loss"},null,8,["modelValue"])])]),_:1}),e(n,{cols:"4"},{default:l(()=>[t("div",Ze,[e(ee,{modelValue:W.value,"onUpdate:modelValue":V[6]||(V[6]=f=>W.value=f),label:"Copy Take Profit"},null,8,["modelValue"])])]),_:1}),e(n,{cols:"4"},{default:l(()=>[t("div",el,[e(ee,{modelValue:h.value,"onUpdate:modelValue":V[7]||(V[7]=f=>h.value=f),label:"Reverse Trade"},null,8,["modelValue"])])]),_:1})]),_:1}),e(b(D),{class:"ml-2 mt-2 mb-2"},{default:l(()=>[e(n,{cols:"6"},{default:l(()=>[e(w,{class:"me-2",color:"primary",onClick:V[8]||(V[8]=f=>F.value=!0),loading:B.value,disabled:N.value},{default:l(()=>[u(" Update ")]),_:1},8,["loading","disabled"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["width","model-value"]),e(Y,{isDialogVisible:F.value,"onUpdate:isDialogVisible":V[9]||(V[9]=f=>F.value=f),onConfirm:P,"confirmation-question":"Are you sure you want to update the Slave Account?","cancel-title":"Cancelled","confirm-title":"Confirm"},null,8,["isDialogVisible"]),e(se,{modelValue:X.value,"onUpdate:modelValue":V[10]||(V[10]=f=>X.value=f),"max-width":"500"},{default:l(()=>[e(Q,null,{default:l(()=>[e(re,{class:"text-center px-10 py-6"},{default:l(()=>[e(w,{icon:"",variant:"outlined",color:"error",class:"my-4",style:{"block-size":"88px","inline-size":"88px","pointer-events":"none"}},{default:l(()=>[ll]),_:1}),t("h1",tl,x(b(K)),1),t("p",null,x(b(R)),1),e(w,{color:"success",onClick:ie},{default:l(()=>[u("Ok")]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),e(se,{modelValue:q.value,"onUpdate:modelValue":V[12]||(V[12]=f=>q.value=f),"max-width":"500"},{default:l(()=>[e(Q,null,{default:l(()=>[e(re,{class:"text-center px-10 py-6"},{default:l(()=>[e(w,{icon:"",variant:"outlined",color:"success",class:"my-4",style:{"block-size":"88px","inline-size":"88px","pointer-events":"none"}},{default:l(()=>[e(ue,{icon:"tabler-check",size:"38"})]),_:1}),t("h1",al,x(b(G)),1),t("p",null,x(b(H)),1),e(w,{color:"success",onClick:V[11]||(V[11]=f=>ie())},{default:l(()=>[u("OK")]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])],64)}}},qe=U=>(Te("data-v-b7a6b469"),U=U(),$e(),U),il={class:"sticky-card"},ol={class:"ml-4 my-1"},nl=qe(()=>t("div",{class:""}," Master Copier ",-1)),ul={key:0,class:"mt-3"},dl={class:"mt-4"},rl={class:"mt-4"},cl={class:"mt-4"},ml={class:"text-h4 mb-4"},vl=qe(()=>t("span",{class:"text-5xl font-weight-light"},"X",-1)),pl={class:"text-h4 mb-4"},_l={__name:"AddSlaveDialog",props:{isDialogVisible:{type:Boolean,required:!0},slaveDetails:{type:Object,required:!0}},emits:["submit","update:isDialogVisible"],setup(U,{emit:ne}){const z=a(""),p=a([]),_=a(null),L=a(null),E=a(!1),W=[{text:"Fixed Lot",value:"FIXL"},{text:"Lot Multiplier",value:"LMUL"},{text:"Balance Multiplier",value:"BMUL"},{text:"Equity Multiplier",value:"EMUL"},{text:"Fixed Balance Multiplier",value:"FBMUL"}],h=a(null),I=a(0),$=a(!1),F=a(!1),X=a(!1),q=a(0),B=a(null),N=a(!1),K=a(!1),R=a(!1);let G=a(""),H=a(""),M=a(""),S=a("");const Z=a(!1),le=a(null),P=U,ie=ne,C=c=>{ie("update:isDialogVisible",c)};pe([z],()=>{V(),p.value.length===1?(_.value=p.value[0].client_id,L.value=p.value[0].mt5_id):_.value=null},{deep:!0,immediate:!1});const V=async()=>{const c=await de("/client/sorted-mt5-list",{method:"POST",body:{keyword:z.value,page:"",RM:"",category_id:"",group_id:"",deposit_status:"",joined_from:"",joined_to:""},onResponseError({response:s}){console.log(s)}});p.value=c.result.mt5List.data,p.value.length===1&&(_.value=p.value[0].client_id,L.value=p.value[0].mt5_id)};Ae(()=>{switch(h.value){case"FIXL":return"";case"LMUL":return"%";case"BMUL":return"%";default:return"%"}});const r=c=>/^(\d+|\d*\.\d{1,2})$/.test(c.toString())||"Must be a number with up to 2 decimal places";pe(()=>P.slaveDetails,c=>{var s;c&&(le.value=P.slaveDetails.id,E.value=P.slaveDetails.is_config_identical===1,h.value=P.slaveDetails.risk_approach,I.value=P.slaveDetails.multiplier??"0.00",B.value=P.slaveDetails.lot_size,$.value=P.slaveDetails.copy_sl===1,F.value=P.slaveDetails.copy_tp===1,X.value=P.slaveDetails.is_reverse===1,q.value=((s=P.slaveDetails)==null?void 0:s.fixed_balance)??"0.00")},{immediate:!0});const m=async c=>{if(c){Z.value=!0;try{await de("/copier-slaves",{method:"POST",body:{master_id:le.value,sl_mt5_id:L.value,client_id:_.value,is_config_identical:E.value,risk_approach:h.value,lot_size:B.value,multiplier:I.value,fixed_balance:q.value,copy_sl:$.value,copy_tp:F.value,is_reverse:X.value,status:!0,is_live:!0},onResponseError({response:Y}){G.value="Something Went Wrong !",H.value=Y._data.message,Z.value=!1,K.value=!0}})&&(M.value="Success !",S.value="Slave Mapped Successfully !",Z.value=!1,R.value=!0)}catch(s){G.value="Something Went Wrong !",H.value=s.data.message,Z.value=!1,K.value=!0}}},J=async c=>{window.location.reload()};return pe(()=>h.value,c=>{c!=="FIXL"?B.value="0":I.value="0"}),(c,s)=>{const Y=Ue,f=ye,_e=Ve,g=De,v=Se,y=be;return d(),k("section",null,[e(se,{width:c.$vuetify.display.smAndDown?"auto":650,"model-value":P.isDialogVisible,"onUpdate:modelValue":C},{default:l(()=>[e(Y,{onClick:s[0]||(s[0]=o=>C(!1))}),e(Q,{class:""},{default:l(()=>[t("div",il,[e(oe,{class:"pt-3"},{default:l(()=>[u("Add Slave Copier Account")]),_:1}),e(fe)]),e(we,{class:"ml-3",onSubmit:ke(()=>{},["prevent"])},{default:l(()=>[e(D,null,{default:l(()=>[e(n,{cols:"12"},{default:l(()=>[e(oe,null,{default:l(()=>[u("Master Details")]),_:1})]),_:1}),e(n,{cols:"12",class:"ml-2"},{default:l(()=>[t("h4",ol,x(U.slaveDetails.mc_name),1),e(D,{class:"d-flex justify-space-between align-center flex-wrap"},{default:l(()=>[e(n,{class:"d-flex align-center"},{default:l(()=>[e(f,{class:"mx-3 my-2",client_name:U.slaveDetails.client.client_name,client_id:U.slaveDetails.client.id,email:U.slaveDetails.client.email,client_pic:U.slaveDetails.client_pic},null,8,["client_name","client_id","email","client_pic"])]),_:1}),e(n,{class:"d-flex align-center flex-column pb-6 mr-6",cols:"auto"},{default:l(()=>{var o;return[e(_e,{class:"mb-2 mr-2",client_id:U.slaveDetails.client.id,mt_id:(o=U.slaveDetails.mc_mt5_id)==null?void 0:o.toString(),is_wallet:0},null,8,["client_id","mt_id"]),nl]}),_:1})]),_:1})]),_:1})]),_:1}),e(fe,{class:"mb-2"}),e(D,{class:"ml-2"},{default:l(()=>[e(n,{cols:"6"},{default:l(()=>[t("div",null,[e(g,{label:"Search by Slave Name/Email/MT5 ID",modelValue:z.value,"onUpdate:modelValue":s[1]||(s[1]=o=>z.value=o),placeholder:"Search MT5 ID"},null,8,["modelValue"])])]),_:1}),e(n,{cols:"6"},{default:l(()=>[p.value.length===1?(d(),k("div",ul,[e(D,{class:"d-flex justify-space-between align-center flex-wrap"},{default:l(()=>[e(n,{class:"d-flex align-center"},{default:l(()=>[e(f,{class:"mx-3 my-2",client_name:p.value[0].client_name,client_id:p.value[0].client_id,email:p.value[0].email,client_pic:p.value[0].client_pic},null,8,["client_name","client_id","email","client_pic"])]),_:1}),e(n,{class:"d-flex align-center flex-column mr-4",cols:"auto"},{default:l(()=>[e(_e,{class:"mb-2",client_id:p.value[0].client_id,mt_id:p.value[0].mt5_id,is_wallet:0},null,8,["client_id","mt_id"])]),_:1})]),_:1})])):T("",!0)]),_:1})]),_:1}),e(D,null,{default:l(()=>[e(n,{cols:"6",class:"ml-3"},{default:l(()=>[e(v,{modelValue:h.value,"onUpdate:modelValue":s[2]||(s[2]=o=>h.value=o),items:W,"item-title":"text","item-value":"value",label:"Risk Approach","single-line":"",rules:["requiredValidator"in c?c.requiredValidator:b(ae)]},null,8,["modelValue","rules"])]),_:1}),h.value==="FIXL"?(d(),A(n,{key:0,cols:"4",class:""},{default:l(()=>[e(g,{label:"Lot Size",modelValue:B.value,"onUpdate:modelValue":s[3]||(s[3]=o=>B.value=o),type:"number",min:"0",rules:["requiredValidator"in c?c.requiredValidator:b(ae),r]},null,8,["modelValue","rules"])]),_:1})):T("",!0),h.value==="LMUL"||h.value==="BMUL"||h.value==="EMUL"||h.value==="FBMUL"?(d(),A(n,{key:1,cols:"4",class:""},{default:l(()=>[e(g,{label:"Multiplier",modelValue:I.value,"onUpdate:modelValue":s[4]||(s[4]=o=>I.value=o),type:"number",min:"0",suffix:"%",rules:["requiredValidator"in c?c.requiredValidator:b(ae),r]},null,8,["modelValue","rules"])]),_:1})):T("",!0),h.value==="FBMUL"?(d(),A(n,{key:2,cols:"6",class:"ml-3"},{default:l(()=>[e(g,{label:"Fixed Master Balance",modelValue:q.value,"onUpdate:modelValue":s[5]||(s[5]=o=>q.value=o),type:"number",min:"0",rules:["requiredValidator"in c?c.requiredValidator:b(ae),r]},null,8,["modelValue","rules"])]),_:1})):T("",!0)]),_:1}),e(D,{class:"ml-3"},{default:l(()=>[e(oe,null,{default:l(()=>[u("Advanced Settings")]),_:1})]),_:1}),e(D,{class:"ml-2"},{default:l(()=>[e(n,{cols:"4"},{default:l(()=>[t("div",dl,[e(ee,{modelValue:$.value,"onUpdate:modelValue":s[6]||(s[6]=o=>$.value=o),label:"Copy Stop Loss"},null,8,["modelValue"])])]),_:1}),e(n,{cols:"4"},{default:l(()=>[t("div",rl,[e(ee,{modelValue:F.value,"onUpdate:modelValue":s[7]||(s[7]=o=>F.value=o),label:"Copy Take Profit"},null,8,["modelValue"])])]),_:1}),e(n,{cols:"4"},{default:l(()=>[t("div",cl,[e(ee,{modelValue:X.value,"onUpdate:modelValue":s[8]||(s[8]=o=>X.value=o),label:"Reverse Trade"},null,8,["modelValue"])])]),_:1})]),_:1}),e(D,null,{default:l(()=>[e(n,{cols:"6"},{default:l(()=>[e(w,{class:"me-2",color:"primary",disabled:_.value===null,onClick:s[9]||(s[9]=o=>N.value=!0)},{default:l(()=>[u(" Submit ")]),_:1},8,["disabled"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["width","model-value"]),e(y,{isDialogVisible:N.value,"onUpdate:isDialogVisible":s[10]||(s[10]=o=>N.value=o),onConfirm:m,"confirmation-question":"Are you want to map slave account?","cancel-title":"Cancelled","confirm-title":"Cancelled!"},null,8,["isDialogVisible"]),e(se,{modelValue:R.value,"onUpdate:modelValue":s[12]||(s[12]=o=>R.value=o),"max-width":"500"},{default:l(()=>[e(Q,null,{default:l(()=>[e(re,{class:"text-center px-10 py-6"},{default:l(()=>[e(w,{icon:"",variant:"outlined",color:"success",class:"my-4",style:{"block-size":"88px","inline-size":"88px","pointer-events":"none"}},{default:l(()=>[e(ue,{icon:"tabler-check",size:"38"})]),_:1}),t("h1",ml,x(b(M)),1),t("p",null,x(b(S)),1),e(w,{color:"success",onClick:s[11]||(s[11]=o=>J())},{default:l(()=>[u(" OK ")]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),e(se,{modelValue:K.value,"onUpdate:modelValue":s[13]||(s[13]=o=>K.value=o),"max-width":"500"},{default:l(()=>[e(Q,null,{default:l(()=>[e(re,{class:"text-center px-10 py-6"},{default:l(()=>[e(w,{icon:"",variant:"outlined",color:"error",class:"my-4",style:{"block-size":"88px","inline-size":"88px","pointer-events":"none"}},{default:l(()=>[vl]),_:1}),t("h1",pl,x(b(G)),1),t("p",null,x(b(H)),1),e(w,{color:"success",onClick:J},{default:l(()=>[u(" Ok ")]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])])}}},fl=Ee(_l,[["__scopeId","data-v-b7a6b469"]]),gl={class:"sticky-card"},bl={class:"ml-4 my-1"},Vl=t("div",{class:""},"Master Account",-1),yl={class:"mt-4"},xl={class:"mt-4"},hl={class:"mt-4"},Cl=t("span",{class:"text-5xl font-weight-light"},"X",-1),Ml={class:"text-h4 mb-4"},kl={class:"text-h4 mb-4"},Dl={__name:"EditMasterCopier",props:{isDialogVisible:{type:Boolean,required:!0},selectedMaster:{type:Object,required:!1}},emits:["submit","update:isDialogVisible"],setup(U,{emit:ne}){a(""),a([]);const z=a(""),p=a(!1),_=a(""),L=a(null),E=a(!1),W=a(!1),h=a(!1),I=a(!1),$=a(null),F=a(!1),X=a(!1),q=a(!1),B=a(!1);a(null);const N=a(!1);a(null);let K=a(""),R=a(""),G=a(""),H=a("");const M=a(null),S=U,Z=ne,le=[{text:"Fixed Lot",value:"FIXL"},{text:"Lot Multiplier",value:"LMUL"},{text:"Balance Multiplier",value:"BMUL"},{text:"Equity Multiplier",value:"EMUL"},{text:"Fixed Balance Multiplier",value:"FBMUL"}],P=r=>{Z("update:isDialogVisible",r)};Ae(()=>{switch(_.value){case"FIXL":return"";case"LMUL":case"BMUL":case"FBMUL":return"%";default:return""}});const ie=r=>/^(\d+|\d*\.\d{1,2})$/.test(r.toString())||"Must be a number with up to 2 decimal places";pe(()=>S.selectedMaster,r=>{r&&(z.value=r.mc_name||"",p.value=r.is_config_identical===1,_.value=r.risk_approach||"",L.value=r.multiplier||null,M.value=r.lot_size,$.value=r.fixed_balance||null,E.value=r.copy_sl===1,h.value=r.copy_tp===1,I.value=r.is_reverse===1,W.value=r.status===1)},{immediate:!0});const C=async r=>{if(console.log("handleConfirm called with:",r),r){B.value=!0,N.value=!0;try{const m=await de("/copier-masters/update",{method:"POST",body:{id:S.selectedMaster.id,mc_name:z.value||S.selectedMaster.mc_name,performance_matrix:S.selectedMaster.performance_matrix,risk_factor:S.selectedMaster.risk_factor,is_config_identical:p.value,risk_approach:_.value,lot_size:M.value,multiplier:L.value,fixed_balance:$.value,copy_sl:E.value,copy_tp:h.value,is_reverse:I.value,status:S.selectedMaster.status,is_live:S.selectedMaster.is_live},onResponseError({response:J}){console.log("Error response:",J)}});console.log("API response:",m),m&&(G.value="Success!",H.value="Copier Updated Successfully!",B.value=!1,q.value=!0,N.value=!1)}catch(m){console.log("API Error:",m)}}};pe(()=>_.value,r=>{r!=="FIXL"?M.value="0":L.value="0"});const V=()=>{window.location.reload()};return(r,m)=>{const J=Ue,c=ye,s=Ve,Y=De,f=Se,_e=be;return d(),k(ve,null,[u(" < "),e(se,{width:r.$vuetify.display.smAndDown?"auto":650,"model-value":S.isDialogVisible,"onUpdate:modelValue":P},{default:l(()=>[e(J,{onClick:m[0]||(m[0]=g=>P(!1))}),e(Q,null,{default:l(()=>[t("div",gl,[e(oe,{class:"pt-3"},{default:l(()=>[u("Edit Master Account")]),_:1}),e(fe)]),e(fe),e(we,{class:"ml-3",onSubmit:ke(()=>{},["prevent"])},{default:l(()=>[e(D,{class:"mt-2 ml-2"},{default:l(()=>[e(n,{cols:"12",class:"ml-2"},{default:l(()=>{var g;return[t("h4",bl,"Master : "+x((g=S.selectedMaster)==null?void 0:g.mc_name),1),e(D,{class:"d-flex justify-space-between align-center flex-wrap"},{default:l(()=>[e(n,{class:"d-flex align-center"},{default:l(()=>{var v,y,o,te,ce,xe,he;return[e(c,{class:"mx-3 my-2",client_name:(y=(v=S.selectedMaster)==null?void 0:v.client)==null?void 0:y.client_name,client_id:(te=(o=S.selectedMaster)==null?void 0:o.client)==null?void 0:te.id,email:(xe=(ce=S.selectedMaster)==null?void 0:ce.client)==null?void 0:xe.email,client_pic:(he=S.selectedMaster)==null?void 0:he.client_pic},null,8,["client_name","client_id","email","client_pic"])]}),_:1}),e(n,{class:"d-flex align-center flex-column pb-6 mr-6",cols:"auto"},{default:l(()=>{var v,y,o,te;return[e(s,{class:"mb-2 mr-2",client_id:(y=(v=S.selectedMaster)==null?void 0:v.client)==null?void 0:y.id,mt_id:(te=(o=S.selectedMaster)==null?void 0:o.mc_mt5_id)==null?void 0:te.toString(),is_wallet:0},null,8,["client_id","mt_id"]),Vl]}),_:1})]),_:1})]}),_:1}),e(n,{cols:"6"},{default:l(()=>[t("div",null,[e(Y,{label:"Update Copier Name",modelValue:z.value,"onUpdate:modelValue":m[1]||(m[1]=g=>z.value=g)},null,8,["modelValue"])])]),_:1}),e(n,{cols:"6"},{default:l(()=>[e(ee,{"model-value":p.value,modelValue:p.value,"onUpdate:modelValue":m[2]||(m[2]=g=>p.value=g),label:"Set Identical Configuration for all slaves"},null,8,["model-value","modelValue"])]),_:1}),p.value?(d(),A(n,{key:0,cols:"6"},{default:l(()=>[e(f,{modelValue:_.value,"onUpdate:modelValue":m[3]||(m[3]=g=>_.value=g),items:le,"item-title":"text","item-value":"value",label:"Risk Approach"},null,8,["modelValue"])]),_:1})):T("",!0),_.value==="FIXL"?(d(),A(n,{key:1,cols:"5",class:"mr-1"},{default:l(()=>[e(Y,{label:"Lot Size",modelValue:M.value,"onUpdate:modelValue":m[4]||(m[4]=g=>M.value=g),type:"number",min:"0",rules:["requiredValidator"in r?r.requiredValidator:b(ae),ie]},null,8,["modelValue","rules"])]),_:1})):T("",!0),_.value==="LMUL"||_.value==="BMUL"||_.value==="EMUL"||_.value==="FBMUL"?(d(),A(n,{key:2,cols:"5",class:"mr-1"},{default:l(()=>[e(Y,{label:"Multiplier",modelValue:L.value,"onUpdate:modelValue":m[5]||(m[5]=g=>L.value=g),type:"number",min:"0",suffix:"%",rules:["requiredValidator"in r?r.requiredValidator:b(ae),ie]},null,8,["modelValue","rules"])]),_:1})):T("",!0),_.value==="FBMUL"?(d(),A(n,{key:3,cols:"6"},{default:l(()=>[e(Y,{label:"Fixed Master Balance",modelValue:$.value,"onUpdate:modelValue":m[6]||(m[6]=g=>$.value=g),type:"number",min:"0",rules:["requiredValidator"in r?r.requiredValidator:b(ae),ie]},null,8,["modelValue","rules"])]),_:1})):T("",!0)]),_:1}),p.value?(d(),A(D,{key:0,class:"ml-2"},{default:l(()=>[e(oe,null,{default:l(()=>[u("Advanced Settings")]),_:1})]),_:1})):T("",!0),p.value?(d(),A(D,{key:1,class:"ml-2"},{default:l(()=>[e(n,{cols:"4"},{default:l(()=>[t("div",yl,[e(ee,{modelValue:E.value,"onUpdate:modelValue":m[7]||(m[7]=g=>E.value=g),label:"Copy Stop Loss"},null,8,["modelValue"])])]),_:1}),e(n,{cols:"4"},{default:l(()=>[t("div",xl,[e(ee,{modelValue:h.value,"onUpdate:modelValue":m[8]||(m[8]=g=>h.value=g),label:"Copy Take Profit"},null,8,["modelValue"])])]),_:1}),e(n,{cols:"4"},{default:l(()=>[t("div",hl,[e(ee,{modelValue:I.value,"onUpdate:modelValue":m[9]||(m[9]=g=>I.value=g),label:"Reverse Trade"},null,8,["modelValue"])])]),_:1})]),_:1})):T("",!0),e(D,{class:"ml-2 mt-2 mb-2"},{default:l(()=>[e(n,{cols:"6"},{default:l(()=>[e(ee,{modelValue:W.value,"onUpdate:modelValue":m[10]||(m[10]=g=>W.value=g),label:W.value?"Active":"Inactive"},null,8,["modelValue","label"])]),_:1})]),_:1}),e(D,{class:"ml-2 mt-2 mb-2"},{default:l(()=>[e(n,{cols:"6"},{default:l(()=>[e(w,{class:"me-2",color:"primary",onClick:m[11]||(m[11]=g=>F.value=!0),loading:B.value,disabled:N.value},{default:l(()=>[u(" Update ")]),_:1},8,["loading","disabled"])]),_:1})]),_:1})]),_:1}),e(_e,{isDialogVisible:F.value,"onUpdate:isDialogVisible":m[12]||(m[12]=g=>F.value=g),onConfirm:C,"confirmation-question":"Are you sure you want to update the Master copier?","cancel-title":"Cancelled","confirm-title":"Cancelled!"},null,8,["isDialogVisible"]),e(se,{modelValue:X.value,"onUpdate:modelValue":m[13]||(m[13]=g=>X.value=g),"max-width":"500"},{default:l(()=>[e(Q,null,{default:l(()=>[e(re,{class:"text-center px-10 py-6"},{default:l(()=>[e(w,{icon:"",variant:"outlined",color:"error",class:"my-4",style:{"block-size":"88px","inline-size":"88px","pointer-events":"none"}},{default:l(()=>[Cl]),_:1}),t("h1",Ml,x(b(K)),1),t("p",null,x(b(R)),1),e(w,{color:"success",onClick:V},{default:l(()=>[u(" Ok ")]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["width","model-value"]),e(se,{modelValue:q.value,"onUpdate:modelValue":m[15]||(m[15]=g=>q.value=g),"max-width":"500"},{default:l(()=>[e(Q,null,{default:l(()=>[e(re,{class:"text-center px-10 py-6"},{default:l(()=>[e(w,{icon:"",variant:"outlined",color:"success",class:"my-4",style:{"block-size":"88px","inline-size":"88px","pointer-events":"none"}},{default:l(()=>[e(ue,{icon:"tabler-check",size:"38"})]),_:1}),t("h1",kl,x(b(G)),1),t("p",null,x(b(H)),1),e(w,{color:"success",onClick:m[14]||(m[14]=g=>V())},{default:l(()=>[u(" OK ")]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])],64)}}},Sl=U=>(Te("data-v-850bd003"),U=U(),$e(),U),Ul={class:"sticky-card"},wl={key:0},Ll={class:"mt-4 mr-2"},Al={class:"mt-4"},Tl={class:"mt-4"},$l={class:"mt-4"},El={class:"text-h4 mb-4"},Il=Sl(()=>t("span",{class:"text-5xl font-weight-light"},"X",-1)),Bl={class:"text-h4 mb-4"},zl={__name:"AlgoCopierDialog",props:{isDialogVisible:{type:Boolean,required:!0}},emits:["submit","update:isDialogVisible"],setup(U,{emit:ne}){const z=a(""),p=a(""),_=a(null);a(!0);const L=a(null),E=a(!1),W=[{text:"Fixed Lot",value:"FIXL"},{text:"Lot Multiplier",value:"LMUL"},{text:"Balance Multiplier",value:"BMUL"},{text:"Equity Multiplier",value:"EMUL"},{text:"Fixed Balance Multiplier",value:"FBMUL"}],h=a(null),I=a(0),$=a(!1),F=a(!1),X=a(!1),q=a(0),B=a(!1),N=a(!1),K=a(!1);let R=a(""),G=a(""),H=a(""),M=a("");const S=a(!1),Z=a(null),le=a(null),P=U,ie=ne,C=c=>{ie("update:isDialogVisible",c)};pe([z],()=>{V()},{deep:!0,immediate:!1});const V=async()=>{const c=await de("/client/sorted-mt5-list",{method:"POST",body:{keyword:z.value,page:"",RM:"",category_id:"",group_id:"",deposit_status:"",joined_from:"",joined_to:""},onResponseError({response:s}){console.log(s)}});p.value=c.result.mt5List.data,p.value.length===1&&(L.value=p.value[0].client_id,Z.value=p.value[0].mt5_id)};pe([z],()=>{V(),p.value.length===1?(L.value=p.value[0].client_id,Z.value=p.value[0].mt5_id):L.value=null},{deep:!0,immediate:!1});const r=c=>/^(\d+|\d*\.\d{1,2})$/.test(c.toString())||"Must be a number with up to 2 decimal places",m=async c=>{if(c){S.value=!0;try{await de("/copier-masters",{method:"POST",body:{mc_name:_.value,mc_mt5_id:Z.value,performance_matrix:0,risk_factor:0,is_config_identical:E.value,risk_approach:h.value,lot_size:le.value,multiplier:I.value,fixed_balance:q.value,copy_sl:$.value,copy_tp:F.value,is_reverse:X.value,status:!0,is_live:!0,client_id:L.value},onResponseError({response:Y}){R.value="Something Went Wrong !",G.value=Y._data.message,S.value=!1,N.value=!0}})&&(H.value="Success !",M.value="Master Copier Created Successfully !",S.value=!1,K.value=!0)}catch(s){R.value="Something Went Wrong !",G.value=s.data.message,S.value=!1,N.value=!0}}},J=async c=>{window.location.reload()};return(c,s)=>{const Y=Ue,f=De,_e=ye,g=Ve,v=Se,y=be;return d(),k("section",null,[e(se,{width:c.$vuetify.display.smAndDown?"auto":650,"model-value":P.isDialogVisible,"onUpdate:modelValue":C},{default:l(()=>[e(Y,{onClick:s[0]||(s[0]=o=>C(!1))}),e(Q,null,{default:l(()=>[t("div",Ul,[e(oe,{class:"pt-3"},{default:l(()=>[u("Add Master Copier Account")]),_:1}),e(fe)]),e(we,{onSubmit:ke(()=>{},["prevent"])},{default:l(()=>[e(D,{class:"mt-2 ml-2"},{default:l(()=>[e(n,{cols:"6"},{default:l(()=>[t("div",null,[e(f,{label:"Search by Name/Email/MT5 ID",modelValue:z.value,"onUpdate:modelValue":s[1]||(s[1]=o=>z.value=o),placeholder:"Search MT5 ID"},null,8,["modelValue"])])]),_:1}),e(n,{cols:"6",class:"mt-2"},{default:l(()=>[p.value.length===1?(d(),k("div",wl,[e(D,{class:"d-flex justify-space-between align-center flex-wrap"},{default:l(()=>[e(n,{class:"d-flex align-center"},{default:l(()=>[e(_e,{class:"mx-3 my-2",client_name:p.value[0].client_name,client_id:p.value[0].client_id,email:p.value[0].email,client_pic:p.value[0].client_pic},null,8,["client_name","client_id","email","client_pic"])]),_:1}),e(n,{class:"d-flex align-center flex-column",cols:"auto"},{default:l(()=>[e(g,{class:"mb-2",client_id:p.value[0].client_id,mt_id:p.value[0].mt5_id,is_wallet:0},null,8,["client_id","mt_id"])]),_:1})]),_:1})])):T("",!0)]),_:1}),e(n,{cols:"6"},{default:l(()=>[t("div",null,[e(f,{label:"Copier Name",modelValue:_.value,"onUpdate:modelValue":s[2]||(s[2]=o=>_.value=o)},null,8,["modelValue"])])]),_:1}),e(n,{cols:"6"},{default:l(()=>[t("div",Ll,[e(ee,{modelValue:E.value,"onUpdate:modelValue":s[3]||(s[3]=o=>E.value=o),label:"Set Identical Configuration for all slaves"},null,8,["modelValue"])])]),_:1}),E.value?(d(),A(n,{key:0,cols:"6"},{default:l(()=>[e(v,{modelValue:h.value,"onUpdate:modelValue":s[4]||(s[4]=o=>h.value=o),items:W,"item-title":"text","item-value":"value",label:"Risk Approach","single-line":"",rules:["requiredValidator"in c?c.requiredValidator:b(ae)]},null,8,["modelValue","rules"])]),_:1})):T("",!0),h.value==="FIXL"?(d(),A(n,{key:1,cols:"5",class:"mr-1"},{default:l(()=>[e(f,{label:"Lot Size",modelValue:le.value,"onUpdate:modelValue":s[5]||(s[5]=o=>le.value=o),type:"number",min:"0",rules:["requiredValidator"in c?c.requiredValidator:b(ae),r]},null,8,["modelValue","rules"])]),_:1})):T("",!0),h.value==="LMUL"||h.value==="BMUL"||h.value==="EMUL"||h.value==="FBMUL"?(d(),A(n,{key:2,cols:"5",class:"mr-1"},{default:l(()=>[e(f,{label:"Multiplier",modelValue:I.value,"onUpdate:modelValue":s[6]||(s[6]=o=>I.value=o),type:"number",min:"0",suffix:"%",rules:["requiredValidator"in c?c.requiredValidator:b(ae),r]},null,8,["modelValue","rules"])]),_:1})):T("",!0),h.value==="FBMUL"?(d(),A(n,{key:3,cols:"6"},{default:l(()=>[e(f,{label:"Fixed Master Balance",modelValue:q.value,"onUpdate:modelValue":s[7]||(s[7]=o=>q.value=o),type:"number",min:"0",rules:["requiredValidator"in c?c.requiredValidator:b(ae),r]},null,8,["modelValue","rules"])]),_:1})):T("",!0)]),_:1}),E.value?(d(),A(D,{key:0,class:"ml-2"},{default:l(()=>[e(oe,null,{default:l(()=>[u("Advanced Settings")]),_:1})]),_:1})):T("",!0),E.value?(d(),A(D,{key:1,class:"ml-2"},{default:l(()=>[e(n,{cols:"4"},{default:l(()=>[t("div",Al,[e(ee,{modelValue:$.value,"onUpdate:modelValue":s[8]||(s[8]=o=>$.value=o),label:"Copy Stop Loss"},null,8,["modelValue"])])]),_:1}),e(n,{cols:"4"},{default:l(()=>[t("div",Tl,[e(ee,{modelValue:F.value,"onUpdate:modelValue":s[9]||(s[9]=o=>F.value=o),label:"Copy Take Profit"},null,8,["modelValue"])])]),_:1}),e(n,{cols:"4"},{default:l(()=>[t("div",$l,[e(ee,{modelValue:X.value,"onUpdate:modelValue":s[10]||(s[10]=o=>X.value=o),label:"Reverse Trade"},null,8,["modelValue"])])]),_:1})]),_:1})):T("",!0),e(D,{class:"ml-2 mt-2 mb-2"},{default:l(()=>[e(n,{cols:"6"},{default:l(()=>[e(w,{class:"me-2",color:"primary",disabled:!_.value||L.value===null,onClick:s[11]||(s[11]=o=>B.value=!0),loading:S.value},{default:l(()=>[u(" Submit ")]),_:1},8,["disabled","loading"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["width","model-value"]),e(y,{isDialogVisible:B.value,"onUpdate:isDialogVisible":s[12]||(s[12]=o=>B.value=o),onConfirm:m,"confirmation-question":"Are you want to add copier?","cancel-title":"Cancelled","confirm-title":"Cancelled!"},null,8,["isDialogVisible"]),e(se,{modelValue:K.value,"onUpdate:modelValue":s[14]||(s[14]=o=>K.value=o),"max-width":"500"},{default:l(()=>[e(Q,null,{default:l(()=>[e(re,{class:"text-center px-10 py-6"},{default:l(()=>[e(w,{icon:"",variant:"outlined",color:"success",class:"my-4",style:{"block-size":"88px","inline-size":"88px","pointer-events":"none"}},{default:l(()=>[e(ue,{icon:"tabler-check",size:"38"})]),_:1}),t("h1",El,x(b(H)),1),t("p",null,x(b(M)),1),e(w,{color:"success",onClick:s[13]||(s[13]=o=>J())},{default:l(()=>[u(" OK ")]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),e(se,{modelValue:N.value,"onUpdate:modelValue":s[15]||(s[15]=o=>N.value=o),"max-width":"500"},{default:l(()=>[e(Q,null,{default:l(()=>[e(re,{class:"text-center px-10 py-6"},{default:l(()=>[e(w,{icon:"",variant:"outlined",color:"error",class:"my-4",style:{"block-size":"88px","inline-size":"88px","pointer-events":"none"}},{default:l(()=>[Il]),_:1}),t("h1",Bl,x(b(R)),1),t("p",null,x(b(G)),1),e(w,{color:"success",onClick:J},{default:l(()=>[u(" Ok ")]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])])}}},Fl=Ee(zl,[["__scopeId","data-v-850bd003"]]),Le=U=>(Te("data-v-876bfdcf"),U=U(),$e(),U),ql={class:"d-flex align-center justify-space-between"},Rl={class:"flex-grow-1 me-4 mt-2"},Pl={class:"text-right"},Ol={class:"d-flex justify-space-between"},jl={class:"ml-4 my-1"},Xl={class:"d-flex align-center"},Nl={class:"text-body-1"},Wl={class:"d-flex align-center gap-x-2"},Kl={class:"text-body-1"},Gl={class:"d-flex align-center"},Ql={class:"text-body-1"},Hl={class:"d-flex align-center gap-x-2"},Jl={key:0,class:"text-body-1"},Yl={key:1,class:"text-body-1"},Zl={class:"d-flex align-center gap-x-2"},et={class:"text-body-1"},lt={class:"d-flex align-center gap-x-2"},tt={class:"text-body-1"},at={class:"d-flex align-center gap-x-2"},st={class:"text-body-1"},it={class:"d-flex align-center gap-x-2"},ot={class:"text-body-1"},nt={class:"d-flex align-center gap-x-2"},ut={key:0,class:"text-body-1"},dt={key:1,class:"text-body-1"},rt={class:"d-flex align-center gap-x-2"},ct={key:0,class:"text-body-1"},mt={key:1,class:"text-body-1"},vt={class:"d-flex align-center gap-x-2"},pt={key:0,class:"text-body-1"},_t={key:1,class:"text-body-1"},ft=Le(()=>t("td",null,null,-1)),gt={class:"mr-2"},bt={class:"d-flex align-center justify-space-between"},Vt={class:"flex-grow-1 me-4 mt-2"},yt={class:"text-right mt-2 ml-3"},xt={class:"rounded border-1 border-dashed selected-card"},ht={class:"d-flex justify-space-between align-center gap-2 flex-wrap mb-0"},Ct=Le(()=>t("br",null,null,-1)),Mt={class:"app-timeline-meta ml-3 pt-6"},kt={class:"my-2"},Dt={class:"d-flex mr-2"},St={key:0,class:"row mt-2"},Ut={class:"d-flex align-center"},wt={class:"text-body-1"},Lt={class:"d-flex align-center gap-x-2"},At={key:0,class:"text-body-1"},Tt={key:1,class:"text-body-1"},$t={class:"d-flex align-center gap-x-2"},Et={class:"text-body-1"},It={class:"d-flex align-center gap-x-2"},Bt={class:"text-body-1"},zt={class:"d-flex align-center gap-x-2"},Ft={class:"text-body-1"},qt={class:"d-flex align-center gap-x-2"},Rt={class:"text-body-1"},Pt={class:"d-flex align-center gap-x-2"},Ot={key:0,class:"text-body-1"},jt={key:1,class:"text-body-1"},Xt={class:"d-flex align-center gap-x-2"},Nt={key:0,class:"text-body-1"},Wt={key:1,class:"text-body-1"},Kt={class:"d-flex align-center gap-x-2"},Gt={key:0,class:"text-body-1"},Qt={key:1,class:"text-body-1"},Ht=Le(()=>t("td",null,null,-1)),Jt=Le(()=>t("span",{class:"text-5xl font-weight-light"},"X",-1)),Yt={class:"text-h4 mb-4"},Zt={class:"text-h4 mb-4"},ea={__name:"copier-config",setup(U){const ne=a(null),z=a(!1),p=a(!1),_=a(null),L=a(!1),E=a(""),W=a(""),h=a(""),I=a(""),$=a(!1),F=a(!1),X=a(!1);a(!1);const q=a(null),B=a(null),N=a(null),K=a(!1),R=a(null),G=a(!1);a(!1);const H=a(!1);Oe(async()=>{await M()});const M=async()=>{try{const v=await de("/copier-masters",{method:"GET",onResponseError({response:y}){console.error(y)}});q.value=v.data}catch(v){console.error(v)}},S=v=>{ne.value=v.id,B.value=[],C(),X.value=!0};function Z(){z.value=!0}function le(v){R.value=v,G.value=!0}function P(v){_.value=v,p.value=!0}const ie=v=>{R.value=v,L.value=!0},C=async()=>{try{const v=await de(`/copier-masters/${ne.value}/slaves`,{method:"GET",onResponseError({response:y}){console.error(y)}});N.value=v.data,B.value=N.value.slaves,X.value=!1}catch(v){console.error(v)}};function V(){K.value=!0}const r=a({}),m=async v=>{var y,o;if(v){r.value[R.value.id]=!0;try{(await de("/copier-slaves/delete",{method:"POST",body:{id:R.value.id},onResponseError({response:ce}){console.error(ce)}})).status&&(E.value="Deleted!",W.value="Slave Account deleted successfully!",$.value=!0,r.value[slave.id]=!1)}catch(te){r.value[slave.id]=!1,h.value="Something Went Wrong!",I.value=((o=(y=te.response)==null?void 0:y._data)==null?void 0:o.message)||"Error occurred",F.value=!0}}},J=a(null),c=v=>{J.value=J.value===v?null:v},s=a(null),Y=v=>{s.value=s.value===v?null:v},f=async v=>{window.location.reload()},_e=v=>{_.value=v,H.value=!0},g=async v=>{var y,o;if(v){r.value[_.value.id]=!0;try{(await de("/copier-masters/delete",{method:"POST",body:{id:_.value.id},onResponseError({response:ce}){console.error(ce)}})).status&&(E.value="Deleted!",W.value="Master Account deleted successfully!",$.value=!0,r.value[R.value.id]=fasle)}catch(te){h.value="Something Went Wrong!",I.value=((o=(y=te.response)==null?void 0:y._data)==null?void 0:o.message)||"Error occurred",F.value=!0,r.value[R.value.id]=!1}}};return(v,y)=>{const o=ye,te=Ve,ce=be,xe=Fl,he=Dl,Re=fl,Pe=sl;return d(),k(ve,null,[e(Q,null,{default:l(()=>[t("div",ql,[t("div",Rl,[e(oe,null,{default:l(()=>[u("Copier Configuration")]),_:1}),e(Ne,{class:"pb-3"},{default:l(()=>[u("Manage Copier Configuration")]),_:1})]),t("div",Pl,[e(w,{class:"me-2",onClick:Z},{default:l(()=>[u("Add Master")]),_:1})])]),e(fe),e(D,{class:"mb-6 mt-3 mr-2"},{default:l(()=>[e(n,{cols:"6"},{default:l(()=>[e(oe,null,{default:l(()=>[u("MASTER")]),_:1}),q.value?(d(!0),k(ve,{key:0},Me(q.value,(i,Ce)=>(d(),k("div",Ol,[e(n,{cols:"10"},{default:l(()=>[(d(),A(Q,{key:Ce,class:je(["mb-2",{"selected-cards":ne.value===i.id}]),onClick:me=>S(i)},{default:l(()=>[t("h4",jl,x(i.mc_name),1),e(D,{class:"d-flex justify-space-between align-center flex-wrap"},{default:l(()=>[e(n,{class:"d-flex align-center"},{default:l(()=>[e(o,{class:"mx-3 my-2",client_name:i.client.client_name,client_id:i.client.id,email:i.client.email,client_pic:i.client_pic},null,8,["client_name","client_id","email","client_pic"])]),_:2},1024),e(n,{class:"d-flex align-center flex-column pb-6 mr-2",cols:"auto"},{default:l(()=>{var me;return[e(te,{class:"mb-2",client_id:i.client.id,mt_id:(me=i.mc_mt5_id)==null?void 0:me.toString(),is_wallet:0},null,8,["client_id","mt_id"])]}),_:2},1024)]),_:2},1024),J.value===i.id?(d(),A(D,{key:0,class:"mb-4 ml-2 mr-2"},{default:l(()=>[e(ze,{"fixed-header":"",class:"text-no-wrap"},{default:l(()=>[t("tr",null,[t("td",null,[e(O,null,{append:l(()=>[t("div",Xl,[t("div",Nl,x(("formatTime"in v?v.formatTime:b(Ie))(i.created_at)),1)])]),default:l(()=>[e(j,{class:"font-weight-medium me-4 text-overline"},{default:l(()=>[u(" Created Time : ")]),_:1})]),_:2},1024)]),t("td",null,[e(O,null,{append:l(()=>[t("div",Wl,[t("div",Kl,x(i.performance_matrix),1)])]),default:l(()=>[e(j,{class:"font-weight-medium me-4 text-overline"},{default:l(()=>[u(" Performance Matrix : ")]),_:1})]),_:2},1024)])]),t("tr",null,[t("td",null,[e(O,null,{append:l(()=>[t("div",Gl,[t("div",Ql,x(i.risk_factor),1)])]),default:l(()=>[e(j,{class:"font-weight-medium me-4 text-overline"},{default:l(()=>[u(" Risk Factor : ")]),_:1})]),_:2},1024)]),t("td",null,[e(O,null,{append:l(()=>[t("div",Hl,[i.is_config_identical?(d(),k("div",Jl," ACTIVE ")):(d(),k("div",Yl," INACTIVE "))])]),default:l(()=>[e(j,{class:"font-weight-medium me-4 text-overline"},{default:l(()=>[u(" Identity Configuration : ")]),_:1})]),_:2},1024)])]),t("tr",null,[t("td",null,[e(O,null,{append:l(()=>[t("div",Zl,[t("div",et,x(i.risk_approach),1)])]),default:l(()=>[e(j,{class:"font-weight-medium me-4 text-overline"},{default:l(()=>[u(" Risk Approach : ")]),_:1})]),_:2},1024)]),t("td",null,[e(O,null,{append:l(()=>[t("div",lt,[t("div",tt,x(i.lot_size),1)])]),default:l(()=>[e(j,{class:"font-weight-medium me-4 text-overline"},{default:l(()=>[u(" Lot Size : ")]),_:1})]),_:2},1024)])]),t("tr",null,[t("td",null,[e(O,null,{append:l(()=>[t("div",at,[t("div",st,x(i.multiplier)+"% ",1)])]),default:l(()=>[e(j,{class:"font-weight-medium me-4 text-overline"},{default:l(()=>[u(" Multiplier : ")]),_:1})]),_:2},1024)]),t("td",null,[e(O,null,{append:l(()=>[t("div",it,[t("div",ot,x(i.fixed_balance),1)])]),default:l(()=>[e(j,{class:"font-weight-medium me-4 text-overline"},{default:l(()=>[u(" Fixed Balance : ")]),_:1})]),_:2},1024)])]),t("tr",null,[t("td",null,[e(O,null,{append:l(()=>[t("div",nt,[i.copy_sl?(d(),k("div",ut," ACTIVE ")):(d(),k("div",dt," INACTIVE "))])]),default:l(()=>[e(j,{class:"font-weight-medium me-4 text-overline"},{default:l(()=>[u(" Copy Stop Loss : ")]),_:1})]),_:2},1024)]),t("td",null,[e(O,null,{append:l(()=>[t("div",rt,[i.copy_tp?(d(),k("div",ct," ACTIVE ")):(d(),k("div",mt," INACTIVE "))])]),default:l(()=>[e(j,{class:"font-weight-medium me-4 text-overline"},{default:l(()=>[u(" Copy Take Profit : ")]),_:1})]),_:2},1024)])]),t("tr",null,[t("td",null,[e(O,null,{append:l(()=>[t("div",vt,[i.is_reverse?(d(),k("div",pt," ACTIVE ")):(d(),k("div",_t," INACTIVE "))])]),default:l(()=>[e(j,{class:"font-weight-medium me-4 text-overline"},{default:l(()=>[u(" Reverse Trade : ")]),_:1})]),_:2},1024)]),ft])]),_:2},1024)]),_:2},1024)):T("",!0)]),_:2},1032,["class","onClick"]))]),_:2},1024),e(n,{cols:"2"},{default:l(()=>[t("div",gt,[e(ge,{color:"secondary",variant:"outlined",size:"small",class:"d-flex align-center",onClick:me=>c(i.id)},{default:l(()=>[e(ue,{icon:"tabler-info-circle",class:"mr-1"}),u(" Details ")]),_:2},1032,["onClick"]),e(ge,{color:"secondary",variant:"outlined",size:"small",class:"d-flex align-center mt-2",onClick:me=>P(i)},{default:l(()=>[e(ue,{icon:"tabler-edit",class:"mr-2"}),u(" Edit ")]),_:2},1032,["onClick"]),e(ge,{variant:"outlined",size:"small",class:"d-flex align-center mt-2",onClick:me=>_e(i),color:r.value[i.id]?"grey":"secondary",disabled:r.value[i.id]},{default:l(()=>[r.value[i.id]?(d(),A(Be,{key:0,indeterminate:"",size:"20",color:"white"})):(d(),k(ve,{key:1},[e(ue,{icon:"tabler-trash",class:"mr-1"}),u(" Delete ")],64))]),_:2},1032,["onClick","color","disabled"])])]),_:2},1024)]))),256)):(d(),k(ve,{key:1},Me(3,i=>e(Fe,{key:i,type:"table-tbody"})),64))]),_:1}),e(n,{cols:"6"},{default:l(()=>[B.value?(d(),A(Q,{key:0},{default:l(()=>[t("div",bt,[t("div",Vt,[e(oe,null,{default:l(()=>[u("SLAVES")]),_:1})]),t("div",yt,[e(w,{class:"me-2",onClick:V},{default:l(()=>[u("Add Slave")]),_:1})])]),e(n,{cols:"12"},{default:l(()=>[X.value?(d(),k(ve,{key:0},Me(3,i=>e(Fe,{key:i,type:"article"})),64)):T("",!0),B.value?(d(),A(We,{key:1,align:"start",density:"compact","line-inset":"8",side:"end","truncate-line":"start"},{default:l(()=>[(d(!0),k(ve,null,Me(B.value,i=>(d(),A(Ke,{size:"x-small","dot-color":"warning"},{default:l(()=>{var Ce;return[t("div",xt,[t("div",ht,[t("div",null,[e(te,{class:"ml-3 mb-3",client_id:i.client.id,mt_id:(Ce=i.sl_mt5_id)==null?void 0:Ce.toString(),is_wallet:0},null,8,["client_id","mt_id"]),Ct,t("span",Mt,x(("formatDateToMonthShort"in v?v.formatDateToMonthShort:b(Xe))(i.created_at)),1)]),t("div",kt,[e(o,{class:"mx-3 my-2",client_name:i.client.client_name,client_id:i.client.id,email:i.client.email,client_pic:i.client.client_pic},null,8,["client_name","client_id","email","client_pic"]),t("div",Dt,[e(ge,{color:"info",size:"small",class:"ml-3 mt-2",onClick:me=>Y(i.id)},{default:l(()=>[e(ue,{icon:"tabler-info-circle",class:"mr-1"}),u(" Details ")]),_:2},1032,["onClick"]),e(ge,{color:"warning",size:"small",class:"ml-3 mt-2",onClick:me=>le(i)},{default:l(()=>[e(ue,{icon:"tabler-edit"}),u(" Edit ")]),_:2},1032,["onClick"]),e(ge,{color:r.value[i.id]?"grey":"error",size:"small",class:"ml-3 mt-2",onClick:me=>ie(i),disabled:r.value[i.id]},{default:l(()=>[r.value[i.id]?(d(),A(Be,{key:0,indeterminate:"",size:"20",color:"white"})):(d(),k(ve,{key:1},[e(ue,{icon:"tabler-unlink"}),u(" Remove ")],64))]),_:2},1032,["color","onClick","disabled"])])])]),s.value===i.id?(d(),k("div",St,[e(ze,{"fixed-header":"",class:"text-no-wrap"},{default:l(()=>[t("tr",null,[t("td",null,[e(O,null,{append:l(()=>[t("div",Ut,[t("div",wt,x(("formatTime"in v?v.formatTime:b(Ie))(i.created_at)),1)])]),default:l(()=>[e(j,{class:"font-weight-medium me-4 text-overline"},{default:l(()=>[u(" Created Time : ")]),_:1})]),_:2},1024)]),t("td",null,[e(O,null,{append:l(()=>[t("div",Lt,[i.is_config_identical?(d(),k("div",At," ACTIVE ")):(d(),k("div",Tt," INACTIVE "))])]),default:l(()=>[e(j,{class:"font-weight-medium me-4 text-overline"},{default:l(()=>[u(" Identity Configuration : ")]),_:1})]),_:2},1024)])]),t("tr",null,[t("td",null,[e(O,null,{append:l(()=>[t("div",$t,[t("div",Et,x(i.risk_approach),1)])]),default:l(()=>[e(j,{class:"font-weight-medium me-4 text-overline"},{default:l(()=>[u(" Risk Approach : ")]),_:1})]),_:2},1024)]),t("td",null,[e(O,null,{append:l(()=>[t("div",It,[t("div",Bt,x(i.lot_size),1)])]),default:l(()=>[e(j,{class:"font-weight-medium me-4 text-overline"},{default:l(()=>[u(" Lot Size : ")]),_:1})]),_:2},1024)])]),t("tr",null,[t("td",null,[e(O,null,{append:l(()=>[t("div",zt,[t("div",Ft,x(i.multiplier)+"% ",1)])]),default:l(()=>[e(j,{class:"font-weight-medium me-4 text-overline"},{default:l(()=>[u(" Multiplier : ")]),_:1})]),_:2},1024)]),t("td",null,[e(O,null,{append:l(()=>[t("div",qt,[t("div",Rt,x(i.fixed_balance),1)])]),default:l(()=>[e(j,{class:"font-weight-medium me-4 text-overline"},{default:l(()=>[u(" Fixed Balance : ")]),_:1})]),_:2},1024)])]),t("tr",null,[t("td",null,[e(O,null,{append:l(()=>[t("div",Pt,[i.copy_sl?(d(),k("div",Ot," ACTIVE ")):(d(),k("div",jt," INACTIVE "))])]),default:l(()=>[e(j,{class:"font-weight-medium me-4 text-overline"},{default:l(()=>[u(" Copy Stop Loss : ")]),_:1})]),_:2},1024)]),t("td",null,[e(O,null,{append:l(()=>[t("div",Xt,[i.copy_tp?(d(),k("div",Nt," ACTIVE ")):(d(),k("div",Wt," INACTIVE "))])]),default:l(()=>[e(j,{class:"font-weight-medium me-4 text-overline"},{default:l(()=>[u(" Copy Take Profit : ")]),_:1})]),_:2},1024)])]),t("tr",null,[t("td",null,[e(O,null,{append:l(()=>[t("div",Kt,[i.is_reverse?(d(),k("div",Gt," ACTIVE ")):(d(),k("div",Qt," INACTIVE "))])]),default:l(()=>[e(j,{class:"font-weight-medium me-4 text-overline"},{default:l(()=>[u(" Reverse Trade : ")]),_:1})]),_:2},1024)]),Ht])]),_:2},1024)])):T("",!0)])]}),_:2},1024))),256))]),_:1})):T("",!0)]),_:1})]),_:1})):T("",!0)]),_:1})]),_:1})]),_:1}),e(ce,{isDialogVisible:H.value,"onUpdate:isDialogVisible":y[0]||(y[0]=i=>H.value=i),onConfirm:g,"confirmation-question":"Are you sure you want to delete this Master Account?","cancel-title":"Cancel","confirm-title":"Delete!"},null,8,["isDialogVisible"]),e(ce,{isDialogVisible:L.value,"onUpdate:isDialogVisible":y[1]||(y[1]=i=>L.value=i),onConfirm:m,"confirmation-question":"Are you sure you want to delete this Slave Account?","cancel-title":"Cancel","confirm-title":"Delete!"},null,8,["isDialogVisible"]),e(se,{modelValue:F.value,"onUpdate:modelValue":y[2]||(y[2]=i=>F.value=i),"max-width":"500"},{default:l(()=>[e(Q,null,{default:l(()=>[e(re,{class:"text-center px-10 py-6"},{default:l(()=>[e(w,{icon:"",variant:"outlined",color:"error",class:"my-4",style:{"block-size":"88px","inline-size":"88px","pointer-events":"none"}},{default:l(()=>[Jt]),_:1}),t("h1",Yt,x(h.value),1),t("p",null,x(I.value),1),e(w,{color:"success",onClick:f},{default:l(()=>[u("Ok")]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),e(se,{modelValue:$.value,"onUpdate:modelValue":y[4]||(y[4]=i=>$.value=i),"max-width":"500"},{default:l(()=>[e(Q,null,{default:l(()=>[e(re,{class:"text-center px-10 py-6"},{default:l(()=>[e(w,{icon:"",variant:"outlined",color:"success",class:"my-4",style:{"block-size":"88px","inline-size":"88px","pointer-events":"none"}},{default:l(()=>[e(ue,{icon:"tabler-check",size:"38"})]),_:1}),t("h1",Zt,x(E.value),1),t("p",null,x(W.value),1),e(w,{color:"success",onClick:y[3]||(y[3]=i=>f())},{default:l(()=>[u("OK")]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),e(xe,{isDialogVisible:z.value,"onUpdate:isDialogVisible":y[5]||(y[5]=i=>z.value=i)},null,8,["isDialogVisible"]),e(he,{isDialogVisible:p.value,"onUpdate:isDialogVisible":y[6]||(y[6]=i=>p.value=i),selectedMaster:_.value},null,8,["isDialogVisible","selectedMaster"]),e(Re,{isDialogVisible:K.value,"onUpdate:isDialogVisible":y[7]||(y[7]=i=>K.value=i),slaveDetails:N.value},null,8,["isDialogVisible","slaveDetails"]),e(Pe,{isDialogVisible:G.value,"onUpdate:isDialogVisible":y[8]||(y[8]=i=>G.value=i),selectedSlave:R.value,slaveDetails:N.value},null,8,["isDialogVisible","selectedSlave","slaveDetails"])],64)}}},Ya=Ee(ea,[["__scopeId","data-v-876bfdcf"]]);export{Ya as default};
