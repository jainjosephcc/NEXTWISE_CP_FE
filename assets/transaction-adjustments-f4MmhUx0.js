import{h as T}from"./permission-B0BZvmkn.js";import{f as q}from"./formatters-MfVJSZma.js";import{r as s,a5 as j,E as K,w as X,cn as Z,o as i,c as u,d as l,b as t,e as n,F as B,t as g,m as r,f as m,y as D,v as d,h as ee,de as te,ai as le,a$ as ae}from"./index-VIgWIw9z.js";import{_ as oe}from"./CustomTransactionStatusChip-DxFgl5Nk.js";import{_ as se}from"./CustomMT5Chip-C5aiBNV3.js";import{_ as ne}from"./CustomStaffCardChip-CDfRdCbt.js";import{_ as ie}from"./CustomClientCardChip-BCn9bSDU.js";import{_ as re}from"./AppTextField-BaVqu4jK.js";import{_ as me}from"./AppDateTimePicker-B5X2YrUN.js";import{_ as ue}from"./CustomManagerSelectWidget-C2G3CT3W.js";import{_ as de}from"./AppSelect-DUMJkAgj.js";import{_ as ce}from"./CustomPageHeaderWidget-CkWDslyv.js";import"./apiUtils-BQAgA1__.js";import{_ as pe}from"./CLIENT_TransAdjustTicketDialog-BfVFx5BR.js";import{$ as _e}from"./api-BaRI-q-y.js";import{V as fe}from"./VCard-DScfi5So.js";import{V as b}from"./VCardText-DIMXcuil.js";import{V as w}from"./VDivider-C0ssATun.js";import{V as ve,a as C}from"./VRow-BrBOniq2.js";import{V as he}from"./VSpacer-CoWL85k4.js";import{V as k}from"./VChip-D7Zky-hd.js";import{V as Ve}from"./VTable-CM4FBYo2.js";import{V as ye}from"./VPagination-B8Xoioio.js";import{V as Te}from"./VSkeletonLoader-COCwKVaa.js";import"./helpers-DK5QwNv0.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./VImg-BQR-30dM.js";import"./transition-CZ13CYou.js";import"./VList-Bn5a5y5R.js";import"./index-CyI2hWI8.js";import"./ssrBoot-BLlZaoP9.js";import"./createSimpleFunctional-CCI-bGJ3.js";import"./VAvatar-B9FI6N68.js";import"./form-D5earr4N.js";import"./VTextField-Bkm-lU-B.js";/* empty css                   */import"./VCounter-DELH-t7W.js";import"./VField-CGsPVke0.js";import"./easing-CjukEv2V.js";import"./VInput-C2xQUOvp.js";import"./forwardRefs-C-GTDzx5.js";import"./VSelect-BnxhhcdK.js";import"./dialog-transition-BzBIeMyZ.js";import"./VMenu-CyOlJkau.js";import"./VOverlay-DKlk4GO4.js";import"./lazy-fDnYxLbP.js";import"./scopeId-BZPXlNMJ.js";import"./VCheckboxBtn-BbkRNVdL.js";import"./VSelectionControl-BxKTAbpm.js";import"./useApi-3M1a1JP0.js";import"./ConfirmDialog-2HfV989T.js";import"./VDialog-DO1lt7PQ.js";import"./DialogCloseBtn-C-OReFwP.js";import"./VCardTitle-DN6VETOB.js";import"./VForm-Dyjjt9sD.js";import"./VAlert-B5BJM40v.js";import"./index-B3bPRkoL.js";/* empty css              */import"./VSlideGroup-DVSDBfNI.js";const ge={class:"me-3 d-flex gap-3"},be={style:{"inline-size":"15.625rem"}},Ce={class:"me-3 d-flex gap-3"},Ae={style:{"inline-size":"15.625rem"}},Se={class:"app-user-search-filter d-flex align-center flex-wrap gap-4"},De={class:"card-subtitle pt-3"},we=l("th",null,null,-1),ke=l("th",null," NAME/EMAIL ",-1),Me=l("th",null," ASSIGNED RM ",-1),xe=l("th",null," MT5 ID ",-1),Ne=l("th",null," TYPE ",-1),Ee=l("th",null," REQ.AMNT ",-1),Ie=l("th",null," STATUS ",-1),Pe={key:0},Ue={class:"text-caption me-0 ms-0",style:{"padding-left":"2px"}},$e=l("br",null,null,-1),je=l("span",{class:"text-caption text-xs"},"RM NOT MAPPED",-1),Be={key:0},Le={class:"d-flex flex-wrap justify-center justify-sm-space-between gap-y-2 mt-2"},Ht={__name:"transaction-adjustments",setup(Oe){const c=s(""),p=s(""),M=s(20),_=s(1),L=s(null),O=s(null),f=s(null),x=s(null),v=s(null),h=s(null),V=s(null),y=s(null),R=[{title:"All",value:null},{title:"All Credit In",value:"6"},{title:"LS Credit In",value:"0"},{title:"NLS Credit In",value:"1"},{title:"Credit Out",value:"2"},{title:"Adjustments",value:"3"},{title:"IB Commission",value:"4"}],z=[{title:"All",value:null},{title:"Pending",value:"0"},{title:"On Hold",value:"1"},{title:"Rejected",value:"2"},{title:"Approved",value:"3"}],N=async()=>{const a=await _e("/transactions/trans-adj-listing",{method:"POST",body:{page:_.value,manager:f.value,from_date:h.value,to_date:V.value,mt5id:p.value,keyword:c.value,ta_type:y.value,ta_status:"0"},onResponseError({response:o}){console.log(o)}});v.value=a},E=j(()=>{var a;return((a=v.value)==null?void 0:a.transaction_details.data)||[]}),A=j(()=>{var a;return((a=v.value)==null?void 0:a.transaction_details.total)||0});K(async()=>{N()}),X([_,M,L,O,f,y,c,p,h,V],()=>{N()},{deep:!0,immediate:!1}),Z(()=>{}),s(!1);const S=s(!1),I=s(null);function F(a){console.log(a),I.value=a,S.value=!0}return(a,o)=>{const Q=ce,P=de,W=ue,U=me,$=re,G=ie,H=ne,J=se,Y=oe;return i(),u(B,null,[l("section",null,[t(Q),t(fe,{class:"mb-6"},{default:n(()=>[t(b,{class:"py-4"},{default:n(()=>[g(" PENDING TRANSACTION ADJUSTMENTS ")]),_:1}),t(w),t(b,null,{default:n(()=>[t(ve,null,{default:n(()=>[t(C,{cols:"12",sm:"3"},{default:n(()=>[t(P,{modelValue:x.value,"onUpdate:modelValue":o[0]||(o[0]=e=>x.value=e),label:"Transaction Status",placeholder:"Transaction Status",items:z,clearable:"","clear-icon":"tabler-x"},null,8,["modelValue"])]),_:1}),t(C,{cols:"12",sm:"2"},{default:n(()=>[t(P,{modelValue:y.value,"onUpdate:modelValue":o[1]||(o[1]=e=>y.value=e),label:"Transaction Types",placeholder:"Transaction Type",items:R,clearable:"","clear-icon":"tabler-x"},null,8,["modelValue"])]),_:1}),("hasAccess"in a?a.hasAccess:r(T))("view_all_clients")||("hasAccess"in a?a.hasAccess:r(T))("view_my_team_clients")?(i(),m(W,{key:0,modelValue:f.value,"onUpdate:modelValue":o[2]||(o[2]=e=>f.value=e)},null,8,["modelValue"])):D("",!0),t(C,{cols:"12",sm:"2"},{default:n(()=>[t(U,{modelValue:h.value,"onUpdate:modelValue":o[3]||(o[3]=e=>h.value=e),label:"From Date",placeholder:"Select date",clearable:"","clear-icon":"tabler-x"},null,8,["modelValue"])]),_:1}),t(C,{cols:"12",sm:"2"},{default:n(()=>[t(U,{modelValue:V.value,"onUpdate:modelValue":o[4]||(o[4]=e=>V.value=e),label:"To Date",placeholder:"Select date",clearable:"","clear-icon":"tabler-x"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),t(w),t(b,{class:"d-flex flex-wrap gap-4"},{default:n(()=>[l("div",ge,[l("div",be,[t($,{modelValue:c.value,"onUpdate:modelValue":o[5]||(o[5]=e=>c.value=e),placeholder:"Search client by name/email"},null,8,["modelValue"])])]),l("div",Ce,[l("div",Ae,[t($,{modelValue:p.value,"onUpdate:modelValue":o[6]||(o[6]=e=>p.value=e),placeholder:"Search MT5 ID"},null,8,["modelValue"])])]),t(he),l("div",Se,[l("p",De,"TOTAL LISTED COUNT : "+d(A.value?A.value:0),1)])]),_:1}),t(w),v.value?(i(),m(Ve,{key:0,height:"800",class:"text-no-wrap"},{default:n(()=>[l("thead",null,[l("tr",null,[we,ke,Me,xe,Ne,Ee,Ie,("hasAccess"in a?a.hasAccess:r(T))("view_transaction_adjustment_details_page")?(i(),u("th",Pe," VIEW ")):D("",!0)])]),l("tbody",null,[E.value?(i(!0),u(B,{key:0},ee(E.value,e=>(i(),u("tr",{class:"",key:e.transaction_id},[l("td",Ue,[t(k,{size:"x-small"},{default:n(()=>[g(" #"+d(e.transaction_id),1)]),_:2},1024),$e,g(" "+d(("formatDateToMonthShort"in a?a.formatDateToMonthShort:r(q))(e.created_at)),1)]),l("td",null,[t(G,{client_id:e.client_id,client_name:e.client_name,email:e.email},null,8,["client_id","client_name","email"])]),l("td",null,[e.manager_id?(i(),m(H,{key:0,rm_id:e.manager_id,rm_name:e.rm_name},null,8,["rm_id","rm_name"])):(i(),m(k,{key:1,size:"x-small",variant:"outlined"},{default:n(()=>[je]),_:1}))]),l("td",null,[t(J,{client_id:e.client_id,mt_id:e.mt_id,is_wallet:e.is_wallet},null,8,["client_id","mt_id","is_wallet"])]),l("td",null,[t(k,{size:"small",class:"pr-3 pl-3 pt-1 pb-1"},{default:n(()=>[g(d(e.transaction_type),1)]),_:2},1024)]),l("td",null,d(("formatCurrency"in a?a.formatCurrency:r(te))(e.amount)),1),l("td",null,[t(Y,{trans_status:e.status},null,8,["trans_status"])]),("hasAccess"in a?a.hasAccess:r(T))("view_transaction_adjustment_details_page")?(i(),u("td",Be,[t(le,{color:"secondary",size:"x-small",variant:"elevated",class:"px-2 me-2 rounded",icon:"tabler-file-description",onClick:Re=>F(e)},null,8,["onClick"])])):D("",!0)]))),128)):(i(),m(ae,{key:1,indeterminate:"",color:"primary"}))])]),_:1})):(i(),m(Te,{key:1,type:"table-tbody"})),t(b,{class:"pt-2"},{default:n(()=>[l("div",Le,[t(ye,{modelValue:_.value,"onUpdate:modelValue":o[7]||(o[7]=e=>_.value=e),"total-visible":a.$vuetify.display.smAndDown?3:5,length:Math.ceil(A.value/M.value)},null,8,["modelValue","total-visible","length"])])]),_:1})]),_:1})]),t(pe,{isDialogVisible:S.value,"onUpdate:isDialogVisible":o[8]||(o[8]=e=>S.value=e),selectedTransaction:I.value},null,8,["isDialogVisible","selectedTransaction"])],64)}}};export{Ht as default};
