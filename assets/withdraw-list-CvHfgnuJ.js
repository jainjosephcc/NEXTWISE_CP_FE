import{h as y}from"./permission-DuwGuxYB.js";import{f as le}from"./formatters-MfVJSZma.js";import{r as s,a5 as B,E as ae,w as oe,cn as se,o as n,c as u,d as l,b as t,e as i,F as O,t as A,m as r,f as m,y as g,v as c,h as ie,de as ne,ai as re,a$ as me}from"./index-D1wpZbIu.js";import{_ as de}from"./CLIENT_WithdrawTicketDialog-CKnH4qTY.js";import{_ as ue}from"./CustomTransactionStatusChip-XG8Oq3yW.js";import{_ as ce}from"./CustomMT5Chip-Dt59m9Qy.js";import{_ as pe}from"./CustomStaffCardChip-BOUVfebu.js";import{_ as _e}from"./CustomClientCardChip-3g29Npaq.js";import{_ as fe}from"./AppTextField--9boQEHq.js";import{_ as he}from"./AppDateTimePicker-DGJHSBNa.js";import{_ as ve}from"./CustomManagerSelectWidget-BPAERI_t.js";import{_ as Ve}from"./AppSelect-Ba94vubz.js";import{_ as we}from"./CustomPageHeaderWidget-BDoC-uMD.js";import{b as ye,w as k}from"./apiUtils-D_3FMlLA.js";import{$ as ge}from"./api-CZThb0As.js";import{V as Te}from"./VCard-DKDRkIoH.js";import{V as T}from"./VCardText-VyBmJXPn.js";import{V as M}from"./VDivider-5x_iBr5U.js";import{V as be,a as b}from"./VRow-BvUGedaW.js";import{V as Se}from"./VSpacer-4nysU2Pe.js";import{V as R}from"./VChip-D0lTDIMf.js";import{V as Ce}from"./VTable-Bm5-Lsq_.js";import{V as De}from"./VPagination-BxLpmNeY.js";import{V as Ae}from"./VSkeletonLoader-BKmj1uWh.js";import"./helpers-DK5QwNv0.js";import"./ConfirmDialog-C3KTWwEA.js";import"./VDialog-BHrtIyf0.js";import"./VOverlay-BDv7FBdx.js";import"./easing-CjukEv2V.js";import"./lazy-BUdACFqA.js";import"./scopeId-DuQ8HD0W.js";import"./transition-DI64r8B2.js";import"./forwardRefs-C-GTDzx5.js";import"./dialog-transition-CyYFvHTT.js";import"./AppTextarea-B-pRGOv4.js";import"./form-C-VBVvQU.js";import"./VTextarea-Fo-SiG6F.js";/* empty css                   */import"./VCounter-D0lpfgDN.js";import"./index-qHcCSCd7.js";import"./VField-BKmLkQ-8.js";import"./VInput-BRlakMdJ.js";import"./VImg-CZeKFoIy.js";import"./DialogCloseBtn-DI4p19x4.js";import"./md5-B0uU80qf.js";import"./_commonjsHelpers-Cpj98o6Y.js";import"./VCardTitle-dZh1ieqJ.js";import"./createSimpleFunctional-CHDm7OKT.js";import"./VAvatar-BdL9cLqL.js";import"./VForm-HpC9CO4V.js";import"./VAlert-BhNyLbL1.js";import"./VList-DMQ33AEG.js";import"./ssrBoot-bsSlj0BA.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./VTextField-75lvywKs.js";import"./VSelect-Dl7trU0N.js";import"./VMenu-Co6aMytZ.js";import"./VCheckboxBtn-CtpXaLKT.js";import"./VSelectionControl-DyTeC7vw.js";import"./useApi-Bq6kd8Rt.js";import"./index-B3bPRkoL.js";/* empty css              */import"./VSlideGroup-Cf_Wy7Ht.js";const ke={class:"me-3 d-flex gap-3"},Me={style:{"inline-size":"15.625rem"}},xe={class:"me-3 d-flex gap-3"},Ee={style:{"inline-size":"15.625rem"}},We={class:"app-user-search-filter d-flex align-center flex-wrap gap-4"},Ne={class:"card-subtitle pt-3"},Pe=l("th",{class:"px-0 py-0"},null,-1),Ue=l("th",null," NAME | EMAIL ",-1),$e=l("th",null," ASSIGNED RM ",-1),Ie=l("th",null," TO ",-1),Le=l("th",null," REQ.AMNT ",-1),Be=l("th",null," METHOD ",-1),Oe=l("th",null," STATUS ",-1),Re={key:0},Fe={class:"text-caption me-0 ms-0 px-0 py-0",style:{"padding-left":"2px"}},ze=l("br",null,null,-1),He=l("span",{class:"text-caption text-xs"},"RM NOT MAPPED",-1),je={key:0},Qe={class:"d-flex flex-wrap justify-center justify-sm-space-between gap-y-2 mt-2"},ol={__name:"withdraw-list",setup(Ge){const p=s(""),_=s(""),F=s(null),S=s(null),z=s(null),f=s(null),h=s(null),v=s(null),x=s(null),V=s(null),H=s(null);s(null);const E=s(20),w=s(1),j=s(null),Q=s(null),d=s(null),G=[{title:"All",value:null},{title:"Pending",value:"0"},{title:"On Hold",value:"1"},{title:"Rejected",value:"2"},{title:"Approved",value:"3"},{title:"Cancelled",value:"6"}],W=async()=>{d.value=null;const a=await ge("/transactions/withdraw-listing",{method:"POST",body:{page:w.value,withdraw_status:"0",currency:x.value,withdraw_method:V.value,manager:v.value,keyword:p.value,mt5id:_.value,from_date:f.value,to_date:h.value},onResponseError({response:o}){console.log(o)}});d.value=a},N=B(()=>{var a;return((a=d.value)==null?void 0:a.transaction_details.data)||[]}),C=B(()=>{var a;return((a=d.value)==null?void 0:a.transaction_details.total)||0});ae(async()=>{await W(),await ye()}),oe([w,E,v,f,h,_,F,S,z,x,V,H,p,j,Q],()=>{W()},{deep:!0,immediate:!1}),se(()=>{}),s(!1);const D=s(!1),P=s(null);function q(a){P.value=a,D.value=!0}return(a,o)=>{const J=we,U=Ve,K=ve,$=he,I=fe,X=_e,Y=pe,Z=ce,ee=ue,te=de;return n(),u(O,null,[l("section",null,[t(J),t(Te,{class:"mb-6"},{default:i(()=>[t(T,{class:"py-4"},{default:i(()=>[A(" PENDING WITHDRAW LIST ")]),_:1}),t(M),t(T,null,{default:i(()=>[t(be,null,{default:i(()=>[t(b,{cols:"12",sm:"3"},{default:i(()=>[t(U,{modelValue:S.value,"onUpdate:modelValue":o[0]||(o[0]=e=>S.value=e),label:"Withdraw Status",placeholder:"Withdraw Status",items:G,clearable:"","clear-icon":"tabler-x"},null,8,["modelValue"])]),_:1}),r(k)&&r(k).length>1?(n(),m(b,{key:0,cols:"12",sm:"3"},{default:i(()=>[t(U,{modelValue:V.value,"onUpdate:modelValue":o[1]||(o[1]=e=>V.value=e),label:"Withdraw Method",placeholder:"Withdraw Method",items:r(k),clearable:"","clear-icon":"tabler-x"},null,8,["modelValue","items"])]),_:1})):g("",!0),("hasAccess"in a?a.hasAccess:r(y))("view_all_clients")||("hasAccess"in a?a.hasAccess:r(y))("view_my_team_clients")?(n(),m(K,{key:1,modelValue:v.value,"onUpdate:modelValue":o[2]||(o[2]=e=>v.value=e)},null,8,["modelValue"])):g("",!0),t(b,{cols:"12",sm:"2"},{default:i(()=>[t($,{modelValue:f.value,"onUpdate:modelValue":o[3]||(o[3]=e=>f.value=e),label:"From Date",placeholder:"Select date",clearable:"","clear-icon":"tabler-x"},null,8,["modelValue"])]),_:1}),t(b,{cols:"12",sm:"2"},{default:i(()=>[t($,{modelValue:h.value,"onUpdate:modelValue":o[4]||(o[4]=e=>h.value=e),label:"To Date",placeholder:"Select date",clearable:"","clear-icon":"tabler-x"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),t(M),t(T,{class:"d-flex flex-wrap gap-4"},{default:i(()=>[l("div",ke,[l("div",Me,[t(I,{modelValue:p.value,"onUpdate:modelValue":o[5]||(o[5]=e=>p.value=e),placeholder:"Search client by name/email"},null,8,["modelValue"])])]),l("div",xe,[l("div",Ee,[t(I,{modelValue:_.value,"onUpdate:modelValue":o[6]||(o[6]=e=>_.value=e),placeholder:"Search MT5 ID"},null,8,["modelValue"])])]),t(Se),l("div",We,[l("p",Ne,"TOTAL LISTED COUNT : "+c(C.value?C.value:0),1)])]),_:1}),t(M),d.value?(n(),m(Ce,{key:0,height:"800",class:"text-no-wrap"},{default:i(()=>[l("thead",null,[l("tr",null,[Pe,Ue,$e,Ie,Le,Be,Oe,("hasAccess"in a?a.hasAccess:r(y))("view_withdraw_details_page")?(n(),u("th",Re," VIEW ")):g("",!0)])]),l("tbody",null,[N.value?(n(!0),u(O,{key:0},ie(N.value,e=>{var L;return n(),u("tr",{class:"",key:e.transaction_id},[l("td",Fe,[t(R,{size:"x-small"},{default:i(()=>[A(" #"+c(e.transaction_id),1)]),_:2},1024),ze,A(" "+c(("formatDateToMonthShort"in a?a.formatDateToMonthShort:r(le))(e.created_at)),1)]),l("td",null,[t(X,{client_id:e.c_id,client_name:e.c_name,email:e.c_email},null,8,["client_id","client_name","email"])]),l("td",null,[e.manager_id?(n(),m(Y,{key:0,rm_id:e.manager_id,rm_name:e.rm_name},null,8,["rm_id","rm_name"])):(n(),m(R,{key:1,size:"x-small",variant:"outlined"},{default:i(()=>[He]),_:1}))]),l("td",null,[t(Z,{client_id:e.c_id,mt_id:(L=e.from)==null?void 0:L.toString(),is_wallet:e.is_wallet},null,8,["client_id","mt_id","is_wallet"])]),l("td",null,c(("formatCurrency"in a?a.formatCurrency:r(ne))(e.amount_req)),1),l("td",null,c(e.withdraw_method),1),l("td",null,[t(ee,{trans_status:e.status},null,8,["trans_status"])]),("hasAccess"in a?a.hasAccess:r(y))("view_withdraw_details_page")?(n(),u("td",je,[t(re,{color:"secondary",size:"x-small",variant:"elevated",class:"px-2 me-2 rounded",icon:"tabler-file-description",onClick:qe=>q(e)},null,8,["onClick"])])):g("",!0)])}),128)):(n(),m(me,{key:1,indeterminate:"",color:"primary"}))])]),_:1})):(n(),m(Ae,{key:1,type:"table-tbody"})),t(T,{class:"pt-2"},{default:i(()=>[l("div",Qe,[t(De,{modelValue:w.value,"onUpdate:modelValue":o[7]||(o[7]=e=>w.value=e),"total-visible":a.$vuetify.display.smAndDown?3:5,length:Math.ceil(C.value/E.value)},null,8,["modelValue","total-visible","length"])])]),_:1})]),_:1})]),t(te,{isDialogVisible:D.value,"onUpdate:isDialogVisible":o[8]||(o[8]=e=>D.value=e),selectedTransaction:P.value},null,8,["isDialogVisible","selectedTransaction"])],64)}}};export{ol as default};
