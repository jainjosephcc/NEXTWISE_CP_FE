import{h as z}from"./permission-DuwGuxYB.js";import{_ as X}from"./ConfirmDialog-C3KTWwEA.js";import{_ as G}from"./DialogCloseBtn-DI4p19x4.js";import{$ as L}from"./api-CZThb0As.js";import{V as A,a as H}from"./VCard-DKDRkIoH.js";import{V as J}from"./VCardTitle-dZh1ieqJ.js";import{V as Q}from"./VDivider-5x_iBr5U.js";import{V as Y}from"./VImg-CZeKFoIy.js";import{V as R}from"./VChip-D0lTDIMf.js";import{V as P}from"./VSpacer-4nysU2Pe.js";import{a as Z}from"./VRow-BvUGedaW.js";import{r as n,w as ee,o as c,c as O,b as s,e as l,t as r,F as q,h as te,f,d as a,v as m,y as _,m as i,ai as p,aV as D,a0 as se}from"./index-D1wpZbIu.js";import{V as $}from"./VDialog-BHrtIyf0.js";import{V as N}from"./VCardText-VyBmJXPn.js";var le={VITE_API_BASE_URL:"https://nextwiseapi.metacopier.app/api",BASE_URL:"/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const ae={class:"border rounded"},oe={class:"d-flex align-center gap-4 pa-6 position-relative flex-column flex-sm-row"},ie=["href"],ne={class:"d-flex w-100 flex-column flex-md-row"},re={class:"d-flex flex-column gap-y-2"},ce={class:"text-h6"},de={class:"d-flex align-center text-no-wrap gap-4 text-body-1"},ue={class:"text-disabled"},fe=["href"],pe={class:"d-inline-block text-primary"},me={class:"text-h4 mb-4"},_e=a("span",{class:"text-5xl font-weight-light"},"X",-1),ve={class:"text-h4 mb-4"},Ue={__name:"ClientDocumentViewDialog",props:{clientDocs:{type:Object,required:!1},isDialogVisible:{type:Boolean,required:!0},docVerificationStatus:{type:Number,required:!0},clientId:{type:Number,required:!0}},emits:["submit","update:isDialogVisible"],setup(U,{emit:M}){const d=U,v=n(!1),V=n(!1),j=n(!1),E=n(!1),B=n(!1),I=n(!1),g=n(!1);let y=n(""),h=n("");const b=n(!1);let C=n(""),x=n("");const W=M,F=async o=>{o&&(v.value=!1,j.value=!0,E.value=!0,await L("/client/client-doc/approve",{method:"POST",body:{client_id:d.clientId},onResponseError({response:u}){isSubmitLoading.value=!1,isDisabled.value=!1,C.value="Something Went Wrong !",x.value=u._data.message,b.value=!0}})&&(y.value="Documents Approved !",h.value="Client Docs Approved Successfully !",g.value=!0,isSubmitLoading.value=!1,isDisabled.value=!1))},K=async o=>{o&&(V.value=!1,B.value=!0,I.value=!0,await L("/client/client-doc/reject",{method:"POST",body:{client_id:d.clientId},onResponseError({response:u}){isDisabled.value=!1,C.value="Something Went Wrong !",x.value=u._data.message,b.value=!0}})&&(y.value="Documents Rejected !",h.value="Client Docs Rejected Successfully !",g.value=!0))};ee(d,()=>{});const T=async o=>{window.location.reload()},w=o=>{W("update:isDialogVisible",o)},k=(o,t,u)=>`${le.VITE_S3_BASE_URL}/userdocs/${o}/${t}/${u}`;return(o,t)=>{const u=G,S=X;return c(),O(q,null,[s($,{width:o.$vuetify.display.smAndDown?"auto":600,"model-value":d.isDialogVisible,"onUpdate:modelValue":w},{default:l(()=>[s(u,{onClick:t[0]||(t[0]=e=>w(!1))}),s(A,{class:"pb-6"},{default:l(()=>[s(J,{class:"pt-3"},{default:l(()=>[r("Uploaded Documents")]),_:1}),s(Q),(c(!0),O(q,null,te(U.clientDocs,e=>(c(),f(H,{key:e.id},{default:l(()=>[a("div",ae,[a("div",oe,[a("a",{target:"_blank",href:k(e.client_id,e.doc_type,e.doc_path)},[s(Y,{width:"140",src:k(e.client_id,e.doc_type,e.doc_path)},null,8,["src"])],8,ie),a("div",ne,[a("div",re,[a("h6",ce,m(e.doc_type==="poa"?"Proof of Address":"Proof of Identity"),1),a("div",de,[a("div",ue,[r(" Doc : "),a("a",{target:"_blank",href:k(e.client_id,e.doc_type,e.doc_path)},[a("span",pe,m(e.doc_path),1)],8,fe)]),e.status===0?(c(),f(R,{key:0,color:"warning",label:"",size:"small"},{default:l(()=>[r("Pending Review")]),_:1})):_("",!0),e.status===3?(c(),f(R,{key:1,color:"success",label:"",size:"small"},{default:l(()=>[r("Approved")]),_:1})):_("",!0),e.status===2?(c(),f(R,{key:2,color:"error",label:"",size:"small"},{default:l(()=>[r("Rejected")]),_:1})):_("",!0)])]),s(P)])])])]),_:2},1024))),128)),d.docVerificationStatus!==3?(c(),f(Z,{key:0,cols:"12",class:"d-flex gap-4 float-end align-content-end end pe-6 pt-9"},{default:l(()=>[s(P),("hasAccess"in o?o.hasAccess:i(z))("process_client_document")&&d.docVerificationStatus!==3?(c(),f(p,{key:0,loading:i(j),disabled:i(E),onClick:t[1]||(t[1]=e=>v.value=!0)},{default:l(()=>[r(" Approve Client Docs ")]),_:1},8,["loading","disabled"])):_("",!0),("hasAccess"in o?o.hasAccess:i(z))("process_client_document")&&d.docVerificationStatus!==2?(c(),f(p,{key:1,loading:i(B),disabled:i(I),onClick:t[2]||(t[2]=e=>V.value=!0),color:"error"},{default:l(()=>[r(" Reject Client Docs ")]),_:1},8,["loading","disabled"])):_("",!0),s(p,{onClick:t[3]||(t[3]=e=>w(!1)),type:"reset",color:"secondary",variant:"tonal"},{default:l(()=>[r(" Cancel ")]),_:1})]),_:1})):_("",!0)]),_:1})]),_:1},8,["width","model-value"]),s(S,{isDialogVisible:i(v),"onUpdate:isDialogVisible":t[4]||(t[4]=e=>D(v)?v.value=e:null),onConfirm:F,"confirmation-question":"Are you sure you want to approve the documents of this client?","cancel-title":"Cancelled","confirm-title":"Cancelled!"},null,8,["isDialogVisible"]),s(S,{isDialogVisible:i(V),"onUpdate:isDialogVisible":t[5]||(t[5]=e=>D(V)?V.value=e:null),onConfirm:K,"confirmation-question":"Are you sure you want to reject the documents of this client?","cancel-title":"Cancelled","confirm-title":"Cancelled!"},null,8,["isDialogVisible"]),s($,{modelValue:i(g),"onUpdate:modelValue":t[7]||(t[7]=e=>D(g)?g.value=e:null),"max-width":"500"},{default:l(()=>[s(A,null,{default:l(()=>[s(N,{class:"text-center px-10 py-6"},{default:l(()=>[s(p,{icon:"",variant:"outlined",color:"success",class:"my-4",style:{"block-size":"88px","inline-size":"88px","pointer-events":"none"}},{default:l(()=>[s(se,{icon:"tabler-check",size:"38"})]),_:1}),a("h1",me,m(i(y)),1),a("p",null,m(i(h)),1),s(p,{color:"success",onClick:t[6]||(t[6]=e=>T())},{default:l(()=>[r(" OK ")]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),s($,{modelValue:i(b),"onUpdate:modelValue":t[8]||(t[8]=e=>D(b)?b.value=e:null),"max-width":"500"},{default:l(()=>[s(A,null,{default:l(()=>[s(N,{class:"text-center px-10 py-6"},{default:l(()=>[s(p,{icon:"",variant:"outlined",color:"error",class:"my-4",style:{"block-size":"88px","inline-size":"88px","pointer-events":"none"}},{default:l(()=>[_e]),_:1}),a("h1",ve,m(i(C)),1),a("p",null,m(i(x)),1),s(p,{color:"success",onClick:T},{default:l(()=>[r(" Ok ")]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])],64)}}};export{Ue as _};
