import{_ as ne}from"./AppTextField-C3KG0Fdx.js";import{_ as _e}from"./DialogCloseBtn-CGSccGdU.js";import{V as Q}from"./VCard-DZWvGmgS.js";import{V as I}from"./VCardText-U-O62k8O.js";import{V as ve}from"./VForm-CCOcmvzZ.js";import{V as ge}from"./VTable-3BS_25Ta.js";import{V as j}from"./VCheckbox-DdjbjdGp.js";import{r as c,a4 as W,w as F,o as f,f as M,e as t,b as e,d as a,v as y,m as o,aV as h,c as C,F as z,h as ee,ah as G,t as U,bc as B,bd as E,b3 as T,b1 as L,b2 as O,bm as K,bl as re,db as be,dc as he,dd as Ve,a as te,y as X,$ as D,b8 as we}from"./index-JJLVR7gw.js";import{V as ye}from"./VDialog-v0wQo-Em.js";import{g as xe}from"./girl-using-mobile-Ck2tBuuN.js";import{a as P,V as ae}from"./VRow-CgtR2C0a.js";import{V as ie}from"./VSpacer-CYQf44YG.js";import{V as q}from"./VAvatar-yCqntSJd.js";import{a as Ue}from"./formatters-MfVJSZma.js";import{_ as $e}from"./TablePagination-BFyhAbK4.js";import{_ as ke}from"./AppSelect-Dk8olbt1.js";import{_ as De}from"./AddNewUserDrawer-Z55V7FIW.js";import{u as Ce}from"./useApi-7LUECuUp.js";import{c as Pe}from"./createUrl-Cg98pNjW.js";import{$ as oe}from"./api-BTN9-S1a.js";import{V as Re}from"./VDivider-DXXBACNJ.js";import{V as Ae}from"./VDataTableServer-K98bBkqh.js";import{V as Me}from"./VImg-KnL00SIm.js";import{V as Se}from"./VChip-Dj7sIaLu.js";import{V as Be}from"./VMenu-D0jACTlk.js";import{V as Ee,a as Y,b as Z}from"./VList-oRE7i2Tp.js";import"./form-C0qhxlI3.js";import"./VTextField-D_u6fdPg.js";/* empty css                   */import"./VCounter-QpKNLAUU.js";import"./index-GgA-9tW3.js";import"./transition-C2_fb7u_.js";import"./VField-CtxTuAgP.js";import"./easing-CjukEv2V.js";import"./VInput-DlxzUbVk.js";import"./forwardRefs-C-GTDzx5.js";import"./createSimpleFunctional-C_BTfS6z.js";import"./VCardTitle-BiC992U8.js";import"./VCheckboxBtn-XGtVXTYy.js";import"./VSelectionControl-DEc2CGt5.js";import"./VOverlay-yE6I3_jC.js";import"./lazy-amXKMzDk.js";import"./scopeId-ClaAXU-I.js";import"./dialog-transition-OOY4pNuk.js";/* empty css              */import"./helpers-DK5QwNv0.js";import"./VPagination-idud2wyG.js";import"./VSelect-DolNbEcz.js";import"./validators-DpYrMFzk.js";import"./AppDrawerHeaderSection-JCBIJ82I.js";import"./vue3-perfect-scrollbar.esm-BkibdV_6.js";import"./VNavigationDrawer-DHnzltOU.js";import"./ssrBoot-BZxQaRBH.js";import"./index-B3bPRkoL.js";import"./VDataTable-N4vKJlpm.js";import"./filter-Bc_LYVY7.js";import"./VSlideGroup-Cz4KrcLa.js";const Te={class:"text-h4 text-center mb-2"},Le=a("p",{class:"text-body-1 text-center mb-6"}," Set Role Permissions ",-1),ze=a("h5",{class:"text-h5 my-6"}," Role Permissions ",-1),Ie=a("td",null,[a("h6",{class:"text-h6"}," Administrator Access ")],-1),Ne={colspan:"3"},je={class:"d-flex justify-end"},Fe={class:"text-h6"},Oe={class:"d-flex justify-end"},qe={class:"d-flex justify-end"},Qe={class:"d-flex justify-end"},We={class:"d-flex align-center justify-center gap-4"},Ge={__name:"AddEditRoleDialog",props:{rolePermissions:{type:Object,required:!1,default:()=>({name:"",permissions:[]})},isDialogVisible:{type:Boolean,required:!0}},emits:["update:isDialogVisible","update:rolePermissions"],setup(N,{emit:$}){const p=N,_=$,i=c([{name:"User Management",read:!1,write:!1,create:!1},{name:"Content Management",read:!1,write:!1,create:!1},{name:"Disputes Management",read:!1,write:!1,create:!1},{name:"Database Management",read:!1,write:!1,create:!1},{name:"Financial Management",read:!1,write:!1,create:!1},{name:"Reporting",read:!1,write:!1,create:!1},{name:"API Control",read:!1,write:!1,create:!1},{name:"Repository Management",read:!1,write:!1,create:!1},{name:"Payroll",read:!1,write:!1,create:!1}]),b=c(!1),V=c(""),d=c(),v=W(()=>{let n=0;return i.value.forEach(u=>{Object.entries(u).forEach(([k,R])=>{k!=="name"&&R&&n++})}),n}),w=W(()=>v.value>0&&v.value<i.value.length*3);F(b,n=>{i.value=i.value.map(u=>({...u,read:n,write:n,create:n}))}),F(w,()=>{w.value||(b.value=!1)}),F(i,()=>{v.value===i.value.length*3&&(b.value=!0)},{deep:!0}),F(p,()=>{p.rolePermissions&&p.rolePermissions.permissions.length&&(V.value=p.rolePermissions.name,i.value=i.value.map(n=>{var k;const u=(k=p.rolePermissions)==null?void 0:k.permissions.find(R=>R.name===n.name);return u?{...n,...u}:n}))});const r=()=>{var u;const n={name:V.value,permissions:i.value};_("update:rolePermissions",n),_("update:isDialogVisible",!1),b.value=!1,(u=d.value)==null||u.reset()},x=()=>{var n;_("update:isDialogVisible",!1),b.value=!1,(n=d.value)==null||n.reset()};return(n,u)=>{const k=_e,R=ne;return f(),M(ye,{width:n.$vuetify.display.smAndDown?"auto":900,"model-value":p.isDialogVisible,"onUpdate:modelValue":x},{default:t(()=>[e(k,{onClick:x}),e(Q,{class:"pa-sm-10 pa-2"},{default:t(()=>[e(I,null,{default:t(()=>[a("h4",Te,y(p.rolePermissions.name?"Edit":"Add New")+" Role ",1),Le,e(o(ve),{ref_key:"refPermissionForm",ref:d},{default:t(()=>[e(R,{modelValue:o(V),"onUpdate:modelValue":u[0]||(u[0]=m=>h(V)?V.value=m:null),label:"Role Name",placeholder:"Enter Role Name"},null,8,["modelValue"]),ze,e(ge,{class:"permission-table text-no-wrap mb-6"},{default:t(()=>[a("tr",null,[Ie,a("td",Ne,[a("div",je,[e(j,{modelValue:o(b),"onUpdate:modelValue":u[1]||(u[1]=m=>h(b)?b.value=m:null),indeterminate:o(w),"onUpdate:indeterminate":u[2]||(u[2]=m=>h(w)?w.value=m:null),label:"Select All"},null,8,["modelValue","indeterminate"])])])]),(f(!0),C(z,null,ee(o(i),m=>(f(),C("tr",{key:m.name},[a("td",null,[a("h6",Fe,y(m.name),1)]),a("td",null,[a("div",Oe,[e(j,{modelValue:m.read,"onUpdate:modelValue":A=>m.read=A,label:"Read"},null,8,["modelValue","onUpdate:modelValue"])])]),a("td",null,[a("div",qe,[e(j,{modelValue:m.write,"onUpdate:modelValue":A=>m.write=A,label:"Write"},null,8,["modelValue","onUpdate:modelValue"])])]),a("td",null,[a("div",Qe,[e(j,{modelValue:m.create,"onUpdate:modelValue":A=>m.create=A,label:"Create"},null,8,["modelValue","onUpdate:modelValue"])])])]))),128))]),_:1}),a("div",We,[e(G,{onClick:r},{default:t(()=>[U(" Submit ")]),_:1}),e(G,{color:"secondary",variant:"tonal",onClick:x},{default:t(()=>[U(" Cancel ")]),_:1})])]),_:1},512)]),_:1})]),_:1})]),_:1},8,["width","model-value"])}}},He={class:"text-body-1"},Je={class:"v-avatar-group"},Ke={class:"d-flex justify-space-between align-center"},Xe={class:"text-h5"},Ye={class:"d-flex align-center"},Ze=["onClick"],et=["src"],tt=a("div",{class:"text-end"},[U(" Add new role,"),a("br"),U(" if it doesn't exist. ")],-1),at={__name:"RoleCards",setup(N){const $=c([{role:"Administrator",users:[B,E,T,L],details:{name:"Administrator",permissions:[{name:"User Management",read:!0,write:!0,create:!0},{name:"Disputes Management",read:!0,write:!0,create:!0},{name:"API Control",read:!0,write:!0,create:!0}]}},{role:"Manager",users:[B,E,T,L,O,K,re],details:{name:"Manager",permissions:[{name:"Reporting",read:!0,write:!0,create:!1},{name:"Payroll",read:!0,write:!0,create:!0},{name:"User Management",read:!0,write:!0,create:!0}]}},{role:"Users",users:[B,E,T,L,O],details:{name:"Users",permissions:[{name:"User Management",read:!0,write:!1,create:!1},{name:"Content Management",read:!0,write:!1,create:!1},{name:"Disputes Management",read:!0,write:!1,create:!1},{name:"Database Management",read:!0,write:!1,create:!1}]}},{role:"Support",users:[B,E,T,L,O,K],details:{name:"Support",permissions:[{name:"Repository Management",read:!0,write:!0,create:!1},{name:"Content Management",read:!0,write:!0,create:!1},{name:"Database Management",read:!0,write:!0,create:!1}]}},{role:"Restricted User",users:[B,E,T,L,O,K,re,be,he,Ve],details:{name:"Restricted User",permissions:[{name:"User Management",read:!0,write:!1,create:!1},{name:"Content Management",read:!0,write:!1,create:!1},{name:"Disputes Management",read:!0,write:!1,create:!1},{name:"Database Management",read:!0,write:!1,create:!1}]}}]),p=c(!1),_=c(),i=c(!1),b=V=>{p.value=!0,_.value=V};return(V,d)=>{const v=te("IconBtn"),w=Ge;return f(),C(z,null,[e(ae,null,{default:t(()=>[(f(!0),C(z,null,ee(o($),r=>(f(),M(P,{key:r.role,cols:"12",sm:"6",lg:"4"},{default:t(()=>[e(Q,null,{default:t(()=>[e(I,{class:"d-flex align-center pb-4"},{default:t(()=>[a("div",He," Total "+y(r.users.length)+" users ",1),e(ie),a("div",Je,[(f(!0),C(z,null,ee(r.users,(x,n)=>(f(),C(z,{key:x},[r.users.length>4&&r.users.length!==4&&n<3?(f(),M(q,{key:0,size:"40",image:x},null,8,["image"])):X("",!0),r.users.length===4?(f(),M(q,{key:1,size:"40",image:x},null,8,["image"])):X("",!0)],64))),128)),r.users.length>4?(f(),M(q,{key:0,color:V.$vuetify.theme.current.dark?"#373B50":"#EEEDF0"},{default:t(()=>[a("span",null," +"+y(r.users.length-3),1)]),_:2},1032,["color"])):X("",!0)])]),_:2},1024),e(I,null,{default:t(()=>[a("div",Ke,[a("div",null,[a("h5",Xe,y(r.role),1),a("div",Ye,[a("a",{href:"javascript:void(0)",onClick:x=>b(r.details)}," Edit Role ",8,Ze)])]),e(v,null,{default:t(()=>[e(D,{icon:"tabler-copy",class:"text-high-emphasis"})]),_:1})])]),_:2},1024)]),_:2},1024)]),_:2},1024))),128)),e(P,{cols:"12",sm:"6",lg:"4"},{default:t(()=>[e(Q,{class:"h-100",ripple:!1},{default:t(()=>[e(ae,{"no-gutters":"",class:"h-100"},{default:t(()=>[e(P,{cols:"5",class:"d-flex flex-column justify-end align-center mt-5"},{default:t(()=>[a("img",{width:"85",src:o(xe)},null,8,et)]),_:1}),e(P,{cols:"7"},{default:t(()=>[e(I,{class:"d-flex flex-column align-end justify-end gap-4"},{default:t(()=>[e(G,{size:"small",onClick:d[0]||(d[0]=r=>i.value=!0)},{default:t(()=>[U(" Add New Role ")]),_:1}),tt]),_:1})]),_:1})]),_:1})]),_:1}),e(w,{"is-dialog-visible":o(i),"onUpdate:isDialogVisible":d[1]||(d[1]=r=>h(i)?i.value=r:null)},null,8,["is-dialog-visible"])]),_:1})]),_:1}),e(w,{"is-dialog-visible":o(p),"onUpdate:isDialogVisible":d[2]||(d[2]=r=>h(p)?p.value=r:null),"role-permissions":o(_),"onUpdate:rolePermissions":d[3]||(d[3]=r=>h(_)?_.value=r:null)},null,8,["is-dialog-visible","role-permissions"])],64)}}},st={class:"d-flex gap-2 align-center"},lt=a("p",{class:"text-body-1 mb-0"}," Show ",-1),rt={class:"d-flex align-center flex-wrap gap-4"},ot={class:"d-flex align-center gap-x-4"},nt={key:1},it={class:"d-flex flex-column"},dt={class:"text-base"},ut={class:"text-sm"},mt={class:"d-flex align-center gap-x-2"},ct={class:"text-capitalize text-high-emphasis text-body-1"},pt={class:"text-body-1 text-high-emphasis text-capitalize"},ft={__name:"UserList",async setup(N){let $,p;const _=c(""),i=c(),b=c(),V=c(),d=c(10),v=c(1),w=c(),r=c(),x=g=>{var l,S;w.value=(l=g.sortBy[0])==null?void 0:l.key,r.value=(S=g.sortBy[0])==null?void 0:S.order},n=[{title:"User",key:"user"},{title:"Role",key:"role"},{title:"Plan",key:"plan"},{title:"Billing",key:"billing"},{title:"Status",key:"status"},{title:"Actions",key:"actions",sortable:!1}],{data:u,execute:k}=([$,p]=we(()=>Ce(Pe("/apps/users",{query:{q:_,status:V,plan:b,role:i,itemsPerPage:d,page:v,sortBy:w,orderBy:r}}))),$=await $,p(),$),R=W(()=>u.value.users),m=W(()=>u.value.totalUsers),A=[{title:"Admin",value:"admin"},{title:"Author",value:"author"},{title:"Editor",value:"editor"},{title:"Maintainer",value:"maintainer"},{title:"Subscriber",value:"subscriber"}],H=g=>{const l=g.toLowerCase();return l==="subscriber"?{color:"primary",icon:"tabler-user"}:l==="author"?{color:"warning",icon:"tabler-settings"}:l==="maintainer"?{color:"success",icon:"tabler-chart-donut"}:l==="editor"?{color:"info",icon:"tabler-pencil"}:l==="admin"?{color:"error",icon:"tabler-device-laptop"}:{color:"primary",icon:"tabler-user"}},de=g=>{const l=g.toLowerCase();return l==="pending"?"warning":l==="active"?"success":l==="inactive"?"secondary":"primary"},J=c(!1),ue=async g=>{await oe("/apps/users",{method:"POST",body:g}),k()},se=async g=>{await oe(`/apps/users/${g}`,{method:"DELETE"}),k()};return(g,l)=>{const S=ke,me=ne,ce=te("RouterLink"),le=te("IconBtn"),pe=$e;return f(),C("section",null,[e(Q,null,{default:t(()=>[e(I,{class:"d-flex flex-wrap gap-4"},{default:t(()=>[a("div",st,[lt,e(S,{"model-value":o(d),items:[{value:10,title:"10"},{value:25,title:"25"},{value:50,title:"50"},{value:100,title:"100"},{value:-1,title:"All"}],style:{"inline-size":"5.5rem"},"onUpdate:modelValue":l[0]||(l[0]=s=>d.value=parseInt(s,10))},null,8,["model-value"])]),e(ie),a("div",rt,[e(me,{modelValue:o(_),"onUpdate:modelValue":l[1]||(l[1]=s=>h(_)?_.value=s:null),placeholder:"Search User",style:{"inline-size":"15.625rem"}},null,8,["modelValue"]),e(S,{modelValue:o(i),"onUpdate:modelValue":l[2]||(l[2]=s=>h(i)?i.value=s:null),placeholder:"Select Role",items:A,clearable:"","clear-icon":"tabler-x",style:{"inline-size":"10rem"}},null,8,["modelValue"])])]),_:1}),e(Re),e(Ae,{"items-per-page":o(d),"onUpdate:itemsPerPage":l[4]||(l[4]=s=>h(d)?d.value=s:null),page:o(v),"onUpdate:page":l[5]||(l[5]=s=>h(v)?v.value=s:null),"items-per-page-options":[{value:10,title:"10"},{value:20,title:"20"},{value:50,title:"50"},{value:-1,title:"$vuetify.dataFooter.itemsPerPageAll"}],items:o(R),"items-length":o(m),headers:n,class:"text-no-wrap","show-select":"","onUpdate:options":x},{"item.user":t(({item:s})=>[a("div",ot,[e(q,{size:"34",variant:s.avatar?void 0:"tonal",color:s.avatar?void 0:H(s.role).color},{default:t(()=>[s.avatar?(f(),M(Me,{key:0,src:s.avatar},null,8,["src"])):(f(),C("span",nt,y(("avatarText"in g?g.avatarText:o(Ue))(s.fullName)),1))]),_:2},1032,["variant","color"]),a("div",it,[a("h6",dt,[e(ce,{to:{name:"apps-user-view-id",params:{id:s.id}},class:"font-weight-medium text-link"},{default:t(()=>[U(y(s.fullName),1)]),_:2},1032,["to"])]),a("div",ut,y(s.email),1)])])]),"item.role":t(({item:s})=>[a("div",mt,[e(D,{size:22,icon:H(s.role).icon,color:H(s.role).color},null,8,["icon","color"]),a("div",ct,y(s.role),1)])]),"item.plan":t(({item:s})=>[a("div",pt,y(s.currentPlan),1)]),"item.status":t(({item:s})=>[e(Se,{color:de(s.status),size:"small",label:"",class:"text-capitalize"},{default:t(()=>[U(y(s.status),1)]),_:2},1032,["color"])]),"item.actions":t(({item:s})=>[e(le,{onClick:fe=>se(s.id)},{default:t(()=>[e(D,{icon:"tabler-trash"})]),_:2},1032,["onClick"]),e(le,null,{default:t(()=>[e(D,{icon:"tabler-eye"})]),_:1}),e(G,{icon:"",variant:"text",color:"medium-emphasis"},{default:t(()=>[e(D,{icon:"tabler-dots-vertical"}),e(Be,{activator:"parent"},{default:t(()=>[e(Ee,null,{default:t(()=>[e(Y,{to:{name:"apps-user-view-id",params:{id:s.id}}},{prepend:t(()=>[e(D,{icon:"tabler-eye"})]),default:t(()=>[e(Z,null,{default:t(()=>[U("View")]),_:1})]),_:2},1032,["to"]),e(Y,{link:""},{prepend:t(()=>[e(D,{icon:"tabler-pencil"})]),default:t(()=>[e(Z,null,{default:t(()=>[U("Edit")]),_:1})]),_:1}),e(Y,{onClick:fe=>se(s.id)},{prepend:t(()=>[e(D,{icon:"tabler-trash"})]),default:t(()=>[e(Z,null,{default:t(()=>[U("Delete")]),_:1})]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024)]),_:2},1024)]),bottom:t(()=>[e(pe,{page:o(v),"onUpdate:page":l[3]||(l[3]=s=>h(v)?v.value=s:null),"items-per-page":o(d),"total-items":o(m)},null,8,["page","items-per-page","total-items"])]),_:1},8,["items-per-page","page","items-per-page-options","items","items-length"])]),_:1}),e(De,{isDrawerOpen:o(J),"onUpdate:isDrawerOpen":l[6]||(l[6]=s=>h(J)?J.value=s:null),onUserData:ue},null,8,["isDrawerOpen"])])}}},_t=a("h4",{class:"text-h4 mb-1"}," Roles List ",-1),vt=a("p",{class:"text-body-1 mb-0"}," A role provided access to predefined menus and features so that depending on assigned role an administrator can have access to what he need ",-1),gt=a("h4",{class:"text-h4 mb-1 mt-6"}," Total users with their roles ",-1),bt=a("p",{class:"text-body-1 mb-0"}," Find all of your companyâ€™s administrator accounts and their associate roles. ",-1),ya={__name:"index",setup(N){return($,p)=>(f(),M(ae,null,{default:t(()=>[e(P,{cols:"12"},{default:t(()=>[_t,vt]),_:1}),e(P,{cols:"12"},{default:t(()=>[e(at)]),_:1}),e(P,{cols:"12"},{default:t(()=>[gt,bt]),_:1}),e(P,{cols:"12"},{default:t(()=>[e(ft)]),_:1})]),_:1}))}};export{ya as default};
