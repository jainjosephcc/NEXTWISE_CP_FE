import{r as K}from"./validators-DpYrMFzk.js";import{r as o,E as X,o as D,f as L,e as l,b as e,b0 as H,m as A,ah as f,t as w,b9 as se,ba as ae,d as a,$ as ie,v as S,c as W,F as N,h as le,y as ve}from"./index-JiK_MWJ9.js";import{_ as J}from"./ConfirmDialog-CImc2dHV.js";import{_ as ne}from"./AppTextarea-CT_9uWRx.js";import{_ as Q}from"./AppTextField-DwceRF1z.js";import{_ as re}from"./AppSelect-CfgfDHHL.js";import{_ as Y}from"./DialogCloseBtn-dlJmgPOI.js";import{$ as O}from"./api-wE93wIMu.js";import{_ as ue}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{V as E,a as oe}from"./VCard-C_R7hSZu.js";import{V as Z}from"./VForm-CE-k84KN.js";import{V as I,a as v}from"./VRow-DcfChc3a.js";import{V as z}from"./VDialog-BldaqJjN.js";import{V as F}from"./VCardText-DxS0I0_1.js";import{V as j}from"./VCardTitle-D4KXAsEB.js";import{a as ge,b as _e,V as Ve}from"./VList-Dlz-Yjq0.js";import{V as be}from"./VChip-LXx84AeF.js";import{V as te}from"./VSkeletonLoader-CJ48hQXm.js";import"./helpers-DK5QwNv0.js";import"./form-KTljIkDW.js";import"./VTextarea-a8N9DBGN.js";/* empty css                   */import"./VCounter-BfvrGfZv.js";import"./index-BluCuHcE.js";import"./transition-Bref35qS.js";import"./VField-uySpVFbK.js";import"./easing-CjukEv2V.js";import"./VInput-BlKbvnNP.js";import"./forwardRefs-C-GTDzx5.js";import"./VImg-BIMJWdw_.js";import"./VTextField-DyzuL7G8.js";import"./VSelect-DtGzLhSn.js";import"./dialog-transition-PQIddCIO.js";import"./VMenu-BK7cWoAk.js";import"./VOverlay-Bhx_dkBk.js";import"./lazy-DgJxH81m.js";import"./scopeId-DQ1Gph4y.js";import"./VCheckboxBtn-BYpk2bQ-.js";import"./VSelectionControl-rF_9ErQo.js";import"./VAvatar-C3czt143.js";import"./index-B3bPRkoL.js";import"./createSimpleFunctional-BcQORArf.js";/* empty css              */import"./ssrBoot-DxW6z2IS.js";import"./VDivider-BRZJMS0Y.js";import"./VSlideGroup-m9bzUaex.js";const ye=g=>(se("data-v-691b02f6"),g=g(),ae(),g),Ce=ye(()=>a("div",{class:"d-flex flex-wrap justify-space-between flex-column rounded bg-var-theme-background flex-sm-row gap-6 pa-6 mb-6"},[a("div",null,[a("div",{class:"d-flex align-center app-logo"},[a("h6",{class:"app-logo-title"}," Edit Permission")])])],-1)),xe={__name:"EditPermissionListDialog",props:{isDialogVisible:{type:Boolean,required:!0}},emits:["submit","update:isDialogVisible"],setup(g,{emit:$}){const d=o(!1),_=o(""),V=o(""),U=o(!1),b=o({permission:[]}),h=o([]),k=o(""),C=g,P=$,B=u=>{P("update:isDialogVisible",u)},T=()=>{console.log("Confirmed")},q=async()=>{try{const u=await O("/getStaffGroupPermissions/0",{method:"GET"});u&&u.permission?(b.value=u.permission,h.value=u.permission):console.error("Staff groups data not found:",u)}catch(u){console.error("Error fetching staff group list:",u)}};return X(async()=>{await q()}),(u,s)=>{const t=Y,M=re,y=Q,n=ne,i=J;return D(),L(z,{width:u.$vuetify.display.smAndDown?"auto":800,"model-value":C.isDialogVisible,"onUpdate:modelValue":B},{default:l(()=>[e(t,{onClick:s[0]||(s[0]=p=>B(!1))}),e(E,{class:"pa-6 pa-sm-10"},{default:l(()=>[Ce,e(Z,{onSubmit:H(()=>{},["prevent"])},{default:l(()=>[e(I,null,{default:l(()=>[e(M,{modelValue:k.value,"onUpdate:modelValue":s[1]||(s[1]=p=>k.value=p),items:h.value,"item-title":"category_name","item-value":"cat_id",label:"Permission Category",placeholder:"Select Category","single-line":"",rules:["requiredValidator"in u?u.requiredValidator:A(K)]},null,8,["modelValue","items","rules"]),e(v,{cols:"12"},{default:l(()=>[e(y,{modelValue:_.value,"onUpdate:modelValue":s[2]||(s[2]=p=>_.value=p),label:"Permission Name",placeholder:""},null,8,["modelValue"])]),_:1}),e(v,{cols:"12"},{default:l(()=>[e(n,{modelValue:V.value,"onUpdate:modelValue":s[3]||(s[3]=p=>V.value=p),label:"Permission Description",placeholder:""},null,8,["modelValue"])]),_:1})]),_:1}),e(I,null,{default:l(()=>[e(v,{cols:"6"},{default:l(()=>[e(f,{class:"me-2",loading:U.value,color:"primary",onClick:s[4]||(s[4]=p=>d.value=!0)},{default:l(()=>[w(" Update ")]),_:1},8,["loading"])]),_:1})]),_:1})]),_:1}),e(i,{isDialogVisible:d.value,"onUpdate:isDialogVisible":s[5]||(s[5]=p=>d.value=p),onConfirm:T,"confirmation-question":"Are you sure you want to add this team?","cancel-title":"Cancelled","confirm-title":"Confirmed!"},null,8,["isDialogVisible"])]),_:1})]),_:1},8,["width","model-value"])}}},De=ue(xe,[["__scopeId","data-v-691b02f6"]]),we=a("div",{class:"d-flex flex-wrap justify-space-between flex-column rounded bg-var-theme-background flex-sm-row gap-6 pa-6 mb-6"},[a("div",null,[a("div",{class:"d-flex align-center app-logo"},[a("h6",{class:"app-logo-title"},"Add Permission")])])],-1),Se={class:"text-h4 mb-4"},he=a("span",{class:"text-5xl font-weight-light"},"X",-1),ke={class:"text-h4 mb-4"},$e={__name:"AddPermissionLIstDialog",props:{isDialogVisible:{type:Boolean,required:!0}},emits:["submit","update:isDialogVisible"],setup(g,{emit:$}){const d=o(""),_=o(""),V=o("");o(!1),o(!1);const U=o([]);o(null);const b=o(null),h=o({permission:[]}),k=[{text:"Active",value:1},{text:"Inactive",value:0}],C=o(!1),P=o(!1),B=o(null),T=o(!1),q=o(!1);let u=o(""),s=o(""),t=o(""),M=o("");const y=g,n=$,i=m=>{n("update:isDialogVisible",m)},p=async()=>{try{const m=await O("/getStaffGroupPermissions/0",{method:"GET"});m&&m.permission?(h.value=m.permission,U.value=m.permission):console.error("Staff groups data not found:",m)}catch(m){console.error("Error fetching staff group list:",m)}},G=async m=>{if(m){C.value=!0;try{await O("/addStaffPermissions",{method:"POST",body:{permission_name:_.value,category:d.value,description:V.value,status:b.value},onResponseError({response:R}){u.value="Something Went Wrong !",s.value=R._data.message,C.value=!1,T.value=!0}})&&(t.value="Success !",M.value=" Staff Permission Created Successfully !",C.value=!1,q.value=!0)}catch(r){u.value="Something Went Wrong !",s.value=r.data.message,C.value=!1,T.value=!0}}},x=async m=>{window.location.reload()};function me(){B.value=!0,P.value=!0}return X(async()=>{await p()}),(m,r)=>{const R=Y,ee=re,ce=Q,pe=ne,fe=J;return D(),L(z,{width:m.$vuetify.display.smAndDown?"auto":800,"model-value":y.isDialogVisible,"onUpdate:modelValue":i},{default:l(()=>[e(R,{onClick:r[0]||(r[0]=c=>i(!1))}),e(E,{class:"pa-6 pa-sm-10"},{default:l(()=>[we,e(Z,{onSubmit:H(()=>{},["prevent"])},{default:l(()=>[e(I,null,{default:l(()=>[e(v,{cols:"12"},{default:l(()=>[e(ee,{modelValue:d.value,"onUpdate:modelValue":r[1]||(r[1]=c=>d.value=c),items:U.value,"item-title":"category_name","item-value":"cat_id",label:"Permission Category",placeholder:"Select Category","single-line":"",rules:["requiredValidator"in m?m.requiredValidator:A(K)]},null,8,["modelValue","items","rules"])]),_:1}),e(v,{cols:"12"},{default:l(()=>[e(ce,{modelValue:_.value,"onUpdate:modelValue":r[2]||(r[2]=c=>_.value=c),label:"Permission Name",placeholder:""},null,8,["modelValue"])]),_:1}),e(v,{cols:"12"},{default:l(()=>[e(pe,{modelValue:V.value,"onUpdate:modelValue":r[3]||(r[3]=c=>V.value=c),label:"Permission Description",placeholder:""},null,8,["modelValue"])]),_:1}),e(v,{cols:"6"},{default:l(()=>[e(ee,{modelValue:b.value,"onUpdate:modelValue":r[4]||(r[4]=c=>b.value=c),items:k,"item-title":"text","item-value":"value",label:"Status","single-line":""},null,8,["modelValue"])]),_:1})]),_:1}),e(I,null,{default:l(()=>[e(v,{cols:"6"},{default:l(()=>[e(f,{class:"me-2",color:"primary",onClick:r[5]||(r[5]=c=>me()),loading:C.value},{default:l(()=>[w(" Submit ")]),_:1},8,["loading"])]),_:1})]),_:1})]),_:1}),e(fe,{isDialogVisible:P.value,"onUpdate:isDialogVisible":r[6]||(r[6]=c=>P.value=c),onConfirm:G,"confirmation-question":"Are you sure you want to add this Permission?","cancel-title":"Cancelled","confirm-title":"Confirmed!"},null,8,["isDialogVisible"]),e(z,{modelValue:q.value,"onUpdate:modelValue":r[8]||(r[8]=c=>q.value=c),"max-width":"500"},{default:l(()=>[e(E,null,{default:l(()=>[e(F,{class:"text-center px-10 py-6"},{default:l(()=>[e(f,{icon:"",variant:"outlined",color:"success",class:"my-4",style:{"block-size":"88px","inline-size":"88px","pointer-events":"none"}},{default:l(()=>[e(ie,{icon:"tabler-check",size:"38"})]),_:1}),a("h1",Se,S(A(t)),1),a("p",null,S(A(M)),1),e(f,{color:"success",onClick:r[7]||(r[7]=c=>x())},{default:l(()=>[w(" OK ")]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),e(z,{modelValue:T.value,"onUpdate:modelValue":r[9]||(r[9]=c=>T.value=c),"max-width":"500"},{default:l(()=>[e(E,null,{default:l(()=>[e(F,{class:"text-center px-10 py-6"},{default:l(()=>[e(f,{icon:"",variant:"outlined",color:"error",class:"my-4",style:{"block-size":"88px","inline-size":"88px","pointer-events":"none"}},{default:l(()=>[he]),_:1}),a("h1",ke,S(A(u)),1),a("p",null,S(A(s)),1),e(f,{color:"success",onClick:x},{default:l(()=>[w(" Ok ")]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["width","model-value"])}}},de=g=>(se("data-v-6defe129"),g=g(),ae(),g),Pe=de(()=>a("div",{class:"d-flex flex-wrap justify-space-between flex-column rounded bg-var-theme-background flex-sm-row gap-6 pa-6 mb-6"},[a("div",null,[a("div",{class:"d-flex align-center app-logo"},[a("h6",{class:"app-logo-title"}," Add Category")])])],-1)),Ae={class:"text-h4 mb-4"},Ee=de(()=>a("span",{class:"text-5xl font-weight-light"},"X",-1)),Ue={class:"text-h4 mb-4"},Te={__name:"AddCategoryPermissionDialog",props:{isDialogVisible:{type:Boolean,required:!0}},emits:["submit","update:isDialogVisible"],setup(g,{emit:$}){const d=o(""),_=o(!1),V=o(!1),U=o(null),b=o(!1),h=o(!1);let k=o(""),C=o(""),P=o(""),B=o("");const T=g,q=$,u=y=>{q("update:isDialogVisible",y)},s=async y=>{if(y){_.value=!0;try{await O("/addStaffPcategory",{method:"POST",body:{category_name:d.value},onResponseError({response:i}){k.value="Something Went Wrong !",C.value=i._data.message,_.value=!1,b.value=!0}})&&(P.value="Success !",B.value="Permission Category Created Successfully !",_.value=!1,h.value=!0)}catch(n){k.value="Something Went Wrong !",C.value=n.data.message,_.value=!1,b.value=!0}}},t=async y=>{window.location.reload()};function M(){d.value===null?U.value=!1:(U.value=!0,V.value=!0)}return(y,n)=>{const i=Y,p=Q,G=J;return D(),L(z,{width:y.$vuetify.display.smAndDown?"auto":800,"model-value":T.isDialogVisible,"onUpdate:modelValue":u},{default:l(()=>[e(i,{onClick:n[0]||(n[0]=x=>u(!1))}),e(E,{class:"pa-6 pa-sm-10"},{default:l(()=>[Pe,e(Z,{onSubmit:H(()=>{},["prevent"])},{default:l(()=>[e(I,null,{default:l(()=>[e(v,{cols:"12"},{default:l(()=>[e(p,{modelValue:d.value,"onUpdate:modelValue":n[1]||(n[1]=x=>d.value=x),label:"Permission Category",placeholder:"",rules:["requiredValidator"in y?y.requiredValidator:A(K)]},null,8,["modelValue","rules"])]),_:1})]),_:1}),e(I,null,{default:l(()=>[e(v,{cols:"6"},{default:l(()=>[e(f,{class:"me-2",color:"primary",onClick:n[2]||(n[2]=x=>M()),loading:_.value},{default:l(()=>[w(" Submit ")]),_:1},8,["loading"])]),_:1})]),_:1})]),_:1}),e(G,{isDialogVisible:V.value,"onUpdate:isDialogVisible":n[3]||(n[3]=x=>V.value=x),onConfirm:s,"confirmation-question":"Are you sure you want to add this Category?","cancel-title":"Cancelled","confirm-title":"Confirmed!"},null,8,["isDialogVisible"]),e(z,{modelValue:h.value,"onUpdate:modelValue":n[5]||(n[5]=x=>h.value=x),"max-width":"500"},{default:l(()=>[e(E,null,{default:l(()=>[e(F,{class:"text-center px-10 py-6"},{default:l(()=>[e(f,{icon:"",variant:"outlined",color:"success",class:"my-4",style:{"block-size":"88px","inline-size":"88px","pointer-events":"none"}},{default:l(()=>[e(ie,{icon:"tabler-check",size:"38"})]),_:1}),a("h1",Ae,S(A(P)),1),a("p",null,S(A(B)),1),e(f,{color:"success",onClick:n[4]||(n[4]=x=>t())},{default:l(()=>[w(" OK ")]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),e(z,{modelValue:b.value,"onUpdate:modelValue":n[6]||(n[6]=x=>b.value=x),"max-width":"500"},{default:l(()=>[e(E,null,{default:l(()=>[e(F,{class:"text-center px-10 py-6"},{default:l(()=>[e(f,{icon:"",variant:"outlined",color:"error",class:"my-4",style:{"block-size":"88px","inline-size":"88px","pointer-events":"none"}},{default:l(()=>[Ee]),_:1}),a("h1",Ue,S(A(k)),1),a("p",null,S(A(C)),1),e(f,{color:"success",onClick:t},{default:l(()=>[w(" Ok ")]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["width","model-value"])}}},Me=ue(Te,[["__scopeId","data-v-6defe129"]]),Ie={class:"d-flex mb-6"},Be={class:"d-flex align-center justify-space-between"},qe={class:"d-flex align-center justify-space-between mb-3"},Le={key:0},El={__name:"staff-permission-management",setup(g){const $=o(null),d=o(null),_=o(null),V=o(null),U=o(null),b=o(!1),h=o(!1),k=o(!1),C=async()=>{try{const s=await O("/getStaffGroupPermissions/0",{method:"GET"});if(s&&s.permission){if($.value=s.permission,$.value.length>0){const t=$.value[0];U.value=t.cat_id,V.value=t.category_name,_.value=t.cat_id,await P(t.cat_id)}}else console.error("Staff groups data not found:",s)}catch(s){console.error("Error fetching staff group list:",s)}},P=async s=>{if(!s){console.error("Category ID is not set");return}try{const t=await O(`/getStaffPermissions/${s}`,{method:"GET",onResponseError({response:M}){console.error("Error response:",M)}});t&&t.permission?d.value=t.permission:console.error("Failed to fetch permission list or empty response")}catch(t){console.error("Error fetching permission list:",t)}};X(()=>{C()});const B=(s,t)=>{d.value=null,U.value=s,V.value=t,P(s)};function T(){b.value=!0}function q(){h.value=!0}function u(){k.value=!0}return(s,t)=>{const M=Me,y=$e,n=De;return D(),W(N,null,[a("section",null,[a("div",Ie,[e(I,null,{default:l(()=>[e(v,{cols:"12"},{default:l(()=>[e(E,null,{default:l(()=>[e(F,null,{default:l(()=>[a("div",Be,[a("div",null,[e(j,null,{default:l(()=>[w(" Staff Permission Management ")]),_:1})]),a("div",null,[e(f,{class:"me-2",onClick:t[0]||(t[0]=i=>T())},{default:l(()=>[w(" Add Category")]),_:1}),e(f,{class:"me-2",onClick:t[1]||(t[1]=i=>q())},{default:l(()=>[w("Add Permission")]),_:1})])])]),_:1})]),_:1})]),_:1})]),_:1})]),e(I,null,{default:l(()=>[e(v,{cols:"4"},{default:l(()=>[e(E,null,{default:l(()=>[e(oe,null,{default:l(()=>[e(j,null,{default:l(()=>[w(" CATEGORIES ")]),_:1})]),_:1}),e(F,null,{default:l(()=>[$.value?(D(),L(Ve,{key:0,class:"card-list"},{default:l(()=>[(D(!0),W(N,null,le($.value,i=>(D(),L(ge,{key:i.cat_id,value:i.cat_id,onClick:p=>B(i.cat_id,i.category_name)},{prepend:l(()=>[e(be,{label:!1,color:"success"},{default:l(()=>[w("#"+S(i.cat_id),1)]),_:2},1024),e(_e,{class:"font-weight-medium me-2"},{default:l(()=>[w(S(i.category_name),1)]),_:2},1024)]),_:2},1032,["value","onClick"]))),128))]),_:1})):(D(),L(te,{key:1,type:"table-tbody"}))]),_:1})]),_:1})]),_:1}),e(v,{cols:"8"},{default:l(()=>[e(E,{class:"flex-grow-1"},{default:l(()=>[e(oe,null,{default:l(()=>[e(E,null,{default:l(()=>[e(j,null,{default:l(()=>[a("div",qe,[d.value?(D(),W("div",Le,S(V.value),1)):ve("",!0)])]),_:1}),d.value?(D(),L(I,{key:0},{default:l(()=>[(D(!0),W(N,null,le(d.value,(i,p)=>(D(),L(v,{cols:"6",key:i.id},{default:l(()=>[e(I,null,{default:l(()=>[e(v,null,{default:l(()=>[a("strong",null,S(i.permission_name),1),a("div",null,S(i.description),1)]),_:2},1024),e(f,{icon:"tabler-edit",variant:"text",color:"info",class:"me-2",onClick:t[2]||(t[2]=G=>u())}),e(f,{icon:"tabler-trash",variant:"text",color:"info"})]),_:2},1024)]),_:2},1024))),128))]),_:1})):(D(),L(te,{key:1,type:"table-tbody"}))]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),e(M,{isDialogVisible:b.value,"onUpdate:isDialogVisible":t[3]||(t[3]=i=>b.value=i)},null,8,["isDialogVisible"]),e(y,{isDialogVisible:h.value,"onUpdate:isDialogVisible":t[4]||(t[4]=i=>h.value=i)},null,8,["isDialogVisible"]),e(n,{isDialogVisible:k.value,"onUpdate:isDialogVisible":t[5]||(t[5]=i=>k.value=i)},null,8,["isDialogVisible"])],64)}}};export{El as default};
