import{h as V}from"./permission-B0BZvmkn.js";import{f as Q}from"./formatters-MfVJSZma.js";import{r as s,a5 as P,E as H,w as q,cn as G,o as n,c as d,d as t,b as l,e as i,F as $,t as b,m as r,f as m,y as w,v as y,h as J,de as K,ai as X,a$ as Y}from"./index-VIgWIw9z.js";import{_ as Z}from"./CustomTransactionStatusChip-DxFgl5Nk.js";import{_ as ee}from"./CustomMT5Chip-C5aiBNV3.js";import{_ as te}from"./CustomStaffCardChip-CDfRdCbt.js";import{_ as le}from"./CustomClientCardChip-BCn9bSDU.js";import{_ as ae}from"./AppTextField-BaVqu4jK.js";import{_ as oe}from"./AppDateTimePicker-B5X2YrUN.js";import{_ as se}from"./CustomManagerSelectWidget-C2G3CT3W.js";import{_ as ne}from"./CustomPageHeaderWidget-CkWDslyv.js";import"./apiUtils-BQAgA1__.js";import{_ as ie}from"./CLIENT_InternalTransactionDialog-D2i8ZNxm.js";import{$ as re}from"./api-BaRI-q-y.js";import{V as me}from"./VCard-DScfi5So.js";import{V as g}from"./VCardText-DIMXcuil.js";import{V as A}from"./VDivider-C0ssATun.js";import{V as de,a as U}from"./VRow-BrBOniq2.js";import{V as ce}from"./VSpacer-CoWL85k4.js";import{V as R}from"./VChip-D7Zky-hd.js";import{V as ue}from"./VTable-CM4FBYo2.js";import{V as _e}from"./VPagination-B8Xoioio.js";import{V as pe}from"./VSkeletonLoader-COCwKVaa.js";import"./helpers-DK5QwNv0.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./VImg-BQR-30dM.js";import"./transition-CZ13CYou.js";import"./VList-Bn5a5y5R.js";import"./index-CyI2hWI8.js";import"./ssrBoot-BLlZaoP9.js";import"./createSimpleFunctional-CCI-bGJ3.js";import"./VAvatar-B9FI6N68.js";import"./form-D5earr4N.js";import"./VTextField-Bkm-lU-B.js";/* empty css                   */import"./VCounter-DELH-t7W.js";import"./VField-CGsPVke0.js";import"./easing-CjukEv2V.js";import"./VInput-C2xQUOvp.js";import"./forwardRefs-C-GTDzx5.js";import"./AppSelect-DUMJkAgj.js";import"./VSelect-BnxhhcdK.js";import"./dialog-transition-BzBIeMyZ.js";import"./VMenu-CyOlJkau.js";import"./VOverlay-DKlk4GO4.js";import"./lazy-fDnYxLbP.js";import"./scopeId-BZPXlNMJ.js";import"./VCheckboxBtn-BbkRNVdL.js";import"./VSelectionControl-BxKTAbpm.js";import"./useApi-3M1a1JP0.js";import"./DialogCloseBtn-C-OReFwP.js";import"./VDialog-DO1lt7PQ.js";import"./index-B3bPRkoL.js";import"./VCardTitle-DN6VETOB.js";/* empty css              */import"./VSlideGroup-DVSDBfNI.js";const fe={class:"me-3 d-flex gap-3"},he={style:{"inline-size":"15.625rem"}},ve={class:"me-3 d-flex gap-3"},Ve={style:{"inline-size":"15.625rem"}},ye={class:"app-user-search-filter d-flex align-center flex-wrap gap-4"},ge={class:"card-subtitle pt-3"},Te=t("th",null,null,-1),Ce=t("th",null," NAME/EMAIL ",-1),be=t("th",null," MAPPED RM ",-1),we=t("th",null," FROM ",-1),Ae=t("th",null," TO ",-1),De=t("th",null," TRNS.AMNT ",-1),Se=t("th",null," STATUS ",-1),ke={key:0},Me={class:"text-caption me-0 ms-0",style:{"padding-left":"2px"}},xe=t("br",null,null,-1),Ne=t("span",{class:"text-caption text-xs"},"RM NOT MAPPED",-1),Ee={key:0},Pe={class:"d-flex flex-wrap justify-center justify-sm-space-between gap-y-2 mt-2"},It={__name:"internal-transactions",setup($e){const c=s(""),u=s(""),D=s(20),_=s(1),B=s(null),I=s(null),p=s(null),f=s(null),h=s(null),v=s(null),S=async()=>{const a=await re("/transactions/internal-listing",{method:"POST",body:{page:_.value,manager:p.value,from_date:h.value,to_date:v.value,mt5id:u.value,keyword:c.value},onResponseError({response:o}){console.log(o)}});f.value=a},k=P(()=>{var a;return((a=f.value)==null?void 0:a.transaction_details.data)||[]}),T=P(()=>{var a;return((a=f.value)==null?void 0:a.transaction_details.total)||0});H(async()=>{S()}),q([_,D,B,I,p,c,u,h,v],()=>{S()},{deep:!0,immediate:!1}),G(()=>{}),s(!1);const C=s(!1),M=s(null);function L(a){M.value=a,C.value=!0}return(a,o)=>{const O=ne,F=se,x=oe,N=ae,z=le,W=te,E=ee,j=Z;return n(),d($,null,[t("section",null,[l(O),l(me,{class:"mb-6"},{default:i(()=>[l(g,{class:"py-4"},{default:i(()=>[b(" INTERNAL TRANSACTIONS ")]),_:1}),l(A),l(g,null,{default:i(()=>[l(de,null,{default:i(()=>[("hasAccess"in a?a.hasAccess:r(V))("view_all_clients")||("hasAccess"in a?a.hasAccess:r(V))("view_my_team_clients")?(n(),m(F,{key:0,modelValue:p.value,"onUpdate:modelValue":o[0]||(o[0]=e=>p.value=e)},null,8,["modelValue"])):w("",!0),l(U,{cols:"12",sm:"2"},{default:i(()=>[l(x,{modelValue:h.value,"onUpdate:modelValue":o[1]||(o[1]=e=>h.value=e),label:"From Date",placeholder:"Select date",clearable:"","clear-icon":"tabler-x"},null,8,["modelValue"])]),_:1}),l(U,{cols:"12",sm:"2"},{default:i(()=>[l(x,{modelValue:v.value,"onUpdate:modelValue":o[2]||(o[2]=e=>v.value=e),label:"To Date",placeholder:"Select date",clearable:"","clear-icon":"tabler-x"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),l(A),l(g,{class:"d-flex flex-wrap gap-4"},{default:i(()=>[t("div",fe,[t("div",he,[l(N,{modelValue:c.value,"onUpdate:modelValue":o[3]||(o[3]=e=>c.value=e),placeholder:"Search client by name/email"},null,8,["modelValue"])])]),t("div",ve,[t("div",Ve,[l(N,{modelValue:u.value,"onUpdate:modelValue":o[4]||(o[4]=e=>u.value=e),placeholder:"Search MT5 ID"},null,8,["modelValue"])])]),l(ce),t("div",ye,[t("p",ge,"TOTAL LISTED COUNT : "+y(T.value?T.value:0),1)])]),_:1}),l(A),f.value?(n(),m(ue,{key:0,height:"800",class:"text-no-wrap"},{default:i(()=>[t("thead",null,[t("tr",null,[Te,Ce,be,we,Ae,De,Se,("hasAccess"in a?a.hasAccess:r(V))("view_internal_transfer_details_page")?(n(),d("th",ke," VIEW ")):w("",!0)])]),t("tbody",null,[k.value?(n(!0),d($,{key:0},J(k.value,e=>(n(),d("tr",{class:"",key:e.transaction_id},[t("td",Me,[l(R,{size:"x-small"},{default:i(()=>[b(" #"+y(e.transaction_id),1)]),_:2},1024),xe,b(" "+y(("formatDateToMonthShort"in a?a.formatDateToMonthShort:r(Q))(e.created_at)),1)]),t("td",null,[l(z,{client_id:e.client_id,client_name:e.client_name,email:e.email},null,8,["client_id","client_name","email"])]),t("td",null,[e.manager_id?(n(),m(W,{key:0,rm_id:e.manager_id,rm_name:e.rm_name},null,8,["rm_id","rm_name"])):(n(),m(R,{key:1,size:"x-small",variant:"outlined"},{default:i(()=>[Ne]),_:1}))]),t("td",null,[l(E,{client_id:e.client_id,mt_id:e.from_mt_id,is_wallet:e.from_mt_wallet},null,8,["client_id","mt_id","is_wallet"])]),t("td",null,[l(E,{client_id:e.client_id,mt_id:e.to_mt_id,is_wallet:e.to_mt_wallet},null,8,["client_id","mt_id","is_wallet"])]),t("td",null,y(("formatCurrency"in a?a.formatCurrency:r(K))(e.trans_amount)),1),t("td",null,[l(j,{trans_status:e.status},null,8,["trans_status"])]),("hasAccess"in a?a.hasAccess:r(V))("view_internal_transfer_details_page")?(n(),d("td",Ee,[l(X,{color:"secondary",size:"x-small",variant:"elevated",class:"px-2 me-2 rounded",icon:"tabler-file-description",onClick:Ue=>L(e)},null,8,["onClick"])])):w("",!0)]))),128)):(n(),m(Y,{key:1,indeterminate:"",color:"primary"}))])]),_:1})):(n(),m(pe,{key:1,type:"table-tbody"})),l(g,{class:"pt-2"},{default:i(()=>[t("div",Pe,[l(_e,{modelValue:_.value,"onUpdate:modelValue":o[5]||(o[5]=e=>_.value=e),"total-visible":a.$vuetify.display.smAndDown?3:5,length:Math.ceil(T.value/D.value)},null,8,["modelValue","total-visible","length"])])]),_:1})]),_:1})]),l(ie,{isDialogVisible:C.value,"onUpdate:isDialogVisible":o[6]||(o[6]=e=>C.value=e),selectedTransaction:M.value},null,8,["isDialogVisible","selectedTransaction"])],64)}}};export{It as default};
