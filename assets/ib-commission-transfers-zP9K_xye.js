import{f as K}from"./formatters-MfVJSZma.js";import{r,E as X,o as m,c as g,b as l,e as s,m as i,aV as y,d as e,t as n,f as b,F as N,h as z,v as u,de as h,y as E,ai as C,a0 as H}from"./index-VIgWIw9z.js";import{_ as J}from"./ConfirmDialog-2HfV989T.js";import{_ as Q}from"./CustomMT5Chip-C5aiBNV3.js";import{_ as Y}from"./CustomStaffCardChip-CDfRdCbt.js";import{$ as R}from"./api-BaRI-q-y.js";import{V as I,b as Z}from"./VCard-DScfi5So.js";import{V as $}from"./VDialog-DO1lt7PQ.js";import{V as w}from"./VCardTitle-DN6VETOB.js";import{V as ee}from"./VDivider-C0ssATun.js";import{V}from"./VChip-D7Zky-hd.js";import{V as te}from"./VTable-CM4FBYo2.js";import{V as le}from"./VSkeletonLoader-COCwKVaa.js";import{V as O}from"./VCardText-DIMXcuil.js";import"./helpers-DK5QwNv0.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./VImg-BQR-30dM.js";import"./transition-CZ13CYou.js";import"./permission-B0BZvmkn.js";import"./VList-Bn5a5y5R.js";import"./index-CyI2hWI8.js";import"./ssrBoot-BLlZaoP9.js";import"./createSimpleFunctional-CCI-bGJ3.js";import"./VAvatar-B9FI6N68.js";import"./index-B3bPRkoL.js";import"./VOverlay-DKlk4GO4.js";import"./easing-CjukEv2V.js";import"./lazy-fDnYxLbP.js";import"./scopeId-BZPXlNMJ.js";import"./forwardRefs-C-GTDzx5.js";import"./dialog-transition-BzBIeMyZ.js";import"./VSlideGroup-DVSDBfNI.js";const oe={class:"d-flex align-center justify-space-between"},ae=e("div",null,null,-1),se=e("thead",null,[e("tr",null,[e("th",null," #ID "),e("th",null," CLIENT "),e("th",null," MANAGER "),e("th",null," MT5 ACCOUNT "),e("th",null,[n(" Total Commission"),e("br"),n(" Earned ")]),e("th",null,[n(" Commission Already"),e("br"),n(" Withdrawn ")]),e("th",null,[n(" Available"),e("br"),n(" Commission ")]),e("th",null,[n(" Request "),e("br"),n("Amount ")]),e("th",null," Status ")])],-1),ne={class:"text-caption me-0 ms-0"},re=e("br",null,null,-1),ie={style:{"text-align":"center"}},ue={class:"text-h4 mb-4"},me=e("span",{class:"text-5xl font-weight-light"},"X",-1),ce={class:"text-h4 mb-4"},Ge={__name:"ib-commission-transfers",setup(de){const W=r(null),A=r(null),S=r(null),D=r(!1),T=r(!1),M=r(null),d=r(!1);r(!1);const c=r(!1),p=r(!1);let _=r(""),v=r(""),k=r(""),x=r("");const U=r("");X(async()=>{await q()});const q=async()=>{W.value=1;try{const o=await R(`/getIbwithdrawList?page=/${W.value}`,{method:"GET",onResponseError({response:a}){console.error("Error response:",a)}});o?(A.value=o,S.value=A.value.withdraw_lists.data):console.error("Failed to fetch group list or empty response")}catch(o){console.error("Error fetching group list:",o)}},F=async o=>{if(o)try{await R("/approveIbCommission1111",{method:"POST",body:{adjustment_id:M.value,action:1},onResponseError({response:f}){_.value="Something Went Wrong !",v.value=f._data.message,d.value=!1,c.value=!0}})&&(k.value="Success !",x.value="Approved Successfully !",d.value=!1,p.value=!0)}catch(a){_.value="Something Went Wrong !",v.value=a.data.message,d.value=!1,c.value=!0}},j=async o=>{window.location.reload()},P=async o=>{if(o)try{await R("/approveIbCommission1111",{method:"POST",body:{adjustment_id:M.value,action:U.value},onResponseError({response:f}){_.value="Something Went Wrong !",v.value=f._data.message,d.value=!1,c.value=!0}})&&(k.value="Success !",x.value="Rejected Successfully !",d.value=!1,p.value=!0)}catch(a){_.value="Something Went Wrong !",v.value=a.data.message,d.value=!1,c.value=!0}};return(o,a)=>{const f=Y,G=Q,B=J;return m(),g("section",null,[l(I,null,{default:s(()=>[e("div",oe,[e("div",null,[l(w,null,{default:s(()=>[n("IB Transfer")]),_:1}),l(Z,{class:"pb-3"},{default:s(()=>[n("Manage IB Transfer")]),_:1})]),ae]),l(ee),i(S)?(m(),b(te,{key:0,height:"800",class:"text-no-wrap"},{default:s(()=>[se,e("tbody",null,[(m(!0),g(N,null,z(i(S),t=>{var L;return m(),g("tr",null,[e("td",ne,[l(V,{size:"x-small"},{default:s(()=>[n(" #"+u(t.id),1)]),_:2},1024),re,n(" "+u(("formatDateToMonthShort"in o?o.formatDateToMonthShort:i(K))(t.created_at)),1)]),e("td",null,[l(f,{rm_id:t.id,rm_name:t.client_name,rm_email:t.email},null,8,["rm_id","rm_name","rm_email"])]),e("td",null,[l(f,{rm_id:t.id,rm_name:t.rm_name,rm_email:t.rm_email},null,8,["rm_id","rm_name","rm_email"])]),e("td",ie,[l(G,{client_id:t.client_id,mt_id:(L=t.mt_id)==null?void 0:L.toString(),is_wallet:t.is_wallet},null,8,["client_id","mt_id","is_wallet"])]),e("td",null,u(("formatCurrency"in o?o.formatCurrency:i(h))(t.total_commission)),1),e("td",null,u(("formatCurrency"in o?o.formatCurrency:i(h))(t.total_Ib_withdraw)),1),e("td",null,u(("formatCurrency"in o?o.formatCurrency:i(h))(t.total_commission-t.total_Ib_withdraw)),1),e("td",null,u(("formatCurrency"in o?o.formatCurrency:i(h))(t.amount)),1),e("td",null,[t.status===3?(m(),b(V,{key:0,label:!1,color:"success"},{default:s(()=>[n(" Approved ")]),_:1})):E("",!0),t.status===2?(m(),b(V,{key:1,label:!1,color:"error"},{default:s(()=>[n(" Rejected ")]),_:1})):E("",!0),t.status===0?(m(),b(V,{key:2,label:!1,color:"warning"},{default:s(()=>[n(" Requested ")]),_:1})):E("",!0)])])}),256))])]),_:1})):(m(),g(N,{key:1},z(3,t=>l(le,{key:t,type:"table-tbody"})),64))]),_:1}),l(B,{isDialogVisible:i(D),"onUpdate:isDialogVisible":a[0]||(a[0]=t=>y(D)?D.value=t:null),onConfirm:F,"confirmation-question":"Do you want to approve the transfer?","cancel-title":"Cancelled","confirm-title":"Cancelled!"},null,8,["isDialogVisible"]),l(B,{isDialogVisible:i(T),"onUpdate:isDialogVisible":a[1]||(a[1]=t=>y(T)?T.value=t:null),onConfirm:P,"confirmation-question":"Do you want to reject the transfer?","cancel-title":"Cancelled","confirm-title":"Cancelled!"},null,8,["isDialogVisible"]),l($,{modelValue:i(p),"onUpdate:modelValue":a[3]||(a[3]=t=>y(p)?p.value=t:null),"max-width":"500"},{default:s(()=>[l(I,null,{default:s(()=>[l(O,{class:"text-center px-10 py-6"},{default:s(()=>[l(C,{icon:"",variant:"outlined",color:"success",class:"my-4",style:{"block-size":"88px","inline-size":"88px","pointer-events":"none"}},{default:s(()=>[l(H,{icon:"tabler-check",size:"38"})]),_:1}),e("h1",ue,u(i(k)),1),e("p",null,u(i(x)),1),l(C,{color:"success",onClick:a[2]||(a[2]=t=>j())},{default:s(()=>[n(" OK ")]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),l($,{modelValue:i(c),"onUpdate:modelValue":a[4]||(a[4]=t=>y(c)?c.value=t:null),"max-width":"500"},{default:s(()=>[l(I,null,{default:s(()=>[l(O,{class:"text-center px-10 py-6"},{default:s(()=>[l(C,{icon:"",variant:"outlined",color:"error",class:"my-4",style:{"block-size":"88px","inline-size":"88px","pointer-events":"none"}},{default:s(()=>[me]),_:1}),e("h1",ce,u(i(_)),1),e("p",null,u(i(v)),1),l(C,{color:"success",onClick:j},{default:s(()=>[n(" Ok ")]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])])}}};export{Ge as default};
