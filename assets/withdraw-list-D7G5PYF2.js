import{h as g}from"./permission-CLsC86kj.js";import{f as ae}from"./formatters-MfVJSZma.js";import{r as s,a4 as B,E as oe,w as se,cn as ie,o as n,c,d as t,b as l,e as i,F as O,t as A,m as r,f as m,y as T,v as d,h as ne,de as R,ah as re,a$ as me}from"./index-BWmc9D7q.js";import{_ as de}from"./CLIENT_WithdrawTicketDialog-e4nW7aGd.js";import{_ as ue}from"./CustomTransactionStatusChip-CHUuBUgz.js";import{_ as ce}from"./CustomMT5Chip-tOVjs2Sd.js";import{_ as pe}from"./CustomStaffCardChip-dN_6K7C9.js";import{_ as _e}from"./CustomClientCardChip-BrwyFZ-m.js";import{_ as fe}from"./AppTextField-BUftseOH.js";import{_ as he}from"./AppDateTimePicker-w5bYxSn7.js";import{_ as ve}from"./CustomManagerSelectWidget-C2ODLXpO.js";import{_ as Ve}from"./AppSelect-sCpAkh9g.js";import{_ as we}from"./CustomPageHeaderWidget-Ctx_j3YG.js";import{b as ye,w as M}from"./apiUtils-Ded8RcMC.js";import{$ as ge}from"./api-BR-notFO.js";import{V as Te}from"./VCard-DwAIWTtj.js";import{V as b}from"./VCardText-CCICqem6.js";import{V as k}from"./VDivider-eIfErnx6.js";import{V as be,a as C}from"./VRow-DQHCymE-.js";import{V as Ce}from"./VSpacer-BARnLNym.js";import{V as F}from"./VChip-DAx_VQqV.js";import{V as Se}from"./VTable-CAE3d_eS.js";import{V as De}from"./VPagination-BOskaTss.js";import{V as Ae}from"./VSkeletonLoader-BFhdcpH-.js";import"./helpers-DK5QwNv0.js";import"./ConfirmDialog-DGr_TjOb.js";import"./VDialog-BxUFRItq.js";import"./VOverlay-CTb-qo5Z.js";import"./easing-CjukEv2V.js";import"./lazy-BF-e1s-n.js";import"./scopeId-Bm9Jyer5.js";import"./transition-D8fUkAQ0.js";import"./forwardRefs-C-GTDzx5.js";import"./dialog-transition-C1Gkv31q.js";import"./AppTextarea-BtM6UT60.js";import"./form-D7AxQydL.js";import"./VTextarea-2O8Ra1CI.js";/* empty css                   */import"./VCounter-DTrH-dp4.js";import"./index-cSpuP_mh.js";import"./VField-DbMgx1pq.js";import"./VInput-CvX9XyKe.js";import"./VImg-DgAVN1eN.js";import"./DialogCloseBtn-DL3IhstY.js";import"./md5-B0uU80qf.js";import"./_commonjsHelpers-Cpj98o6Y.js";import"./VCardTitle-BiBDmMHg.js";import"./createSimpleFunctional-CZq7WqvO.js";import"./VAvatar-B-7-bjFK.js";import"./VForm-CZ013UaL.js";import"./VAlert-Bj2yoEH3.js";import"./VList-BzFiGpDN.js";import"./ssrBoot-DYCHNUBn.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./VTextField-NjFwxG9Q.js";import"./VSelect-KF-FMU3V.js";import"./VMenu-Df012LrC.js";import"./VCheckboxBtn-BE-1U6Bp.js";import"./VSelectionControl-zLuTyjSK.js";import"./useApi-DxPB8i99.js";import"./index-B3bPRkoL.js";/* empty css              */import"./VSlideGroup-OoRwW790.js";const Me={class:"me-3 d-flex gap-3"},ke={style:{"inline-size":"15.625rem"}},xe={class:"me-3 d-flex gap-3"},Ee={style:{"inline-size":"15.625rem"}},We={class:"app-user-search-filter d-flex align-center flex-wrap gap-4"},Pe={class:"card-subtitle pt-3"},Ne=t("th",{class:"px-0 py-0"},null,-1),Ue=t("th",null," NAME | EMAIL ",-1),$e=t("th",null," ASSIGNED RM ",-1),Ie=t("th",null," TO ",-1),Le=t("th",null," REQ.AMNT ",-1),Be=t("th",null," APP.AMNT ",-1),Oe=t("th",null," METHOD ",-1),Re=t("th",null," STATUS ",-1),Fe={key:0},ze={class:"text-caption me-0 ms-0 px-0 py-0",style:{"padding-left":"2px"}},He=t("br",null,null,-1),je=t("span",{class:"text-caption text-xs"},"RM NOT MAPPED",-1),Qe={key:0},qe={class:"d-flex flex-wrap justify-center justify-sm-space-between gap-y-2 mt-2"},sl={__name:"withdraw-list",setup(Ge){const p=s(""),_=s(""),z=s(null),f=s(null),H=s(null),h=s(null),v=s(null),V=s(null),x=s(null),w=s(null),j=s(null);s(null);const E=s(20),y=s(1),Q=s(null),q=s(null),u=s(null),G=[{title:"All",value:null},{title:"Pending",value:"0"},{title:"On Hold",value:"1"},{title:"Rejected",value:"2"},{title:"Approved",value:"3"},{title:"Cancelled",value:"6"}],W=async()=>{u.value=null;const a=await ge("/transactions/withdraw-listing",{method:"POST",body:{page:y.value,withdraw_status:f.value,currency:x.value,withdraw_method:w.value,manager:V.value,keyword:p.value,mt5id:_.value,from_date:h.value,to_date:v.value},onResponseError({response:o}){console.log(o)}});u.value=a},P=B(()=>{var a;return((a=u.value)==null?void 0:a.transaction_details.data)||[]}),S=B(()=>{var a;return((a=u.value)==null?void 0:a.transaction_details.total)||0});oe(async()=>{await W(),await ye()}),se([y,E,V,h,v,_,z,f,H,x,w,j,p,Q,q],()=>{W()},{deep:!0,immediate:!1}),ie(()=>{}),s(!1);const D=s(!1),N=s(null);function J(a){N.value=a,D.value=!0}return(a,o)=>{const K=we,U=Ve,X=ve,$=he,I=fe,Y=_e,Z=pe,ee=ce,te=ue,le=de;return n(),c(O,null,[t("section",null,[l(K),l(Te,{class:"mb-6"},{default:i(()=>[l(b,{class:"py-4"},{default:i(()=>[A(" WITHDRAW LIST ")]),_:1}),l(k),l(b,null,{default:i(()=>[l(be,null,{default:i(()=>[l(C,{cols:"12",sm:"3"},{default:i(()=>[l(U,{modelValue:f.value,"onUpdate:modelValue":o[0]||(o[0]=e=>f.value=e),label:"Withdraw Status",placeholder:"Withdraw Status",items:G,clearable:"","clear-icon":"tabler-x"},null,8,["modelValue"])]),_:1}),r(M)&&r(M).length>1?(n(),m(C,{key:0,cols:"12",sm:"3"},{default:i(()=>[l(U,{modelValue:w.value,"onUpdate:modelValue":o[1]||(o[1]=e=>w.value=e),label:"Withdraw Method",placeholder:"Withdraw Method",items:r(M),clearable:"","clear-icon":"tabler-x"},null,8,["modelValue","items"])]),_:1})):T("",!0),("hasAccess"in a?a.hasAccess:r(g))("view_all_clients")||("hasAccess"in a?a.hasAccess:r(g))("view_my_team_clients")?(n(),m(X,{key:1,modelValue:V.value,"onUpdate:modelValue":o[2]||(o[2]=e=>V.value=e)},null,8,["modelValue"])):T("",!0),l(C,{cols:"12",sm:"2"},{default:i(()=>[l($,{modelValue:h.value,"onUpdate:modelValue":o[3]||(o[3]=e=>h.value=e),label:"From Date",placeholder:"Select date",clearable:"","clear-icon":"tabler-x"},null,8,["modelValue"])]),_:1}),l(C,{cols:"12",sm:"2"},{default:i(()=>[l($,{modelValue:v.value,"onUpdate:modelValue":o[4]||(o[4]=e=>v.value=e),label:"To Date",placeholder:"Select date",clearable:"","clear-icon":"tabler-x"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),l(k),l(b,{class:"d-flex flex-wrap gap-4"},{default:i(()=>[t("div",Me,[t("div",ke,[l(I,{modelValue:p.value,"onUpdate:modelValue":o[5]||(o[5]=e=>p.value=e),placeholder:"Search client by name/email"},null,8,["modelValue"])])]),t("div",xe,[t("div",Ee,[l(I,{modelValue:_.value,"onUpdate:modelValue":o[6]||(o[6]=e=>_.value=e),placeholder:"Search MT5 ID"},null,8,["modelValue"])])]),l(Ce),t("div",We,[t("p",Pe,"TOTAL LISTED COUNT : "+d(S.value?S.value:0),1)])]),_:1}),l(k),u.value?(n(),m(Se,{key:0,height:"800",class:"text-no-wrap"},{default:i(()=>[t("thead",null,[t("tr",null,[Ne,Ue,$e,Ie,Le,Be,Oe,Re,("hasAccess"in a?a.hasAccess:r(g))("view_withdraw_details_page")?(n(),c("th",Fe," VIEW ")):T("",!0)])]),t("tbody",null,[P.value?(n(!0),c(O,{key:0},ne(P.value,e=>{var L;return n(),c("tr",{class:"",key:e.transaction_id},[t("td",ze,[l(F,{size:"x-small"},{default:i(()=>[A(" #"+d(e.transaction_id),1)]),_:2},1024),He,A(" "+d(("formatDateToMonthShort"in a?a.formatDateToMonthShort:r(ae))(e.created_at)),1)]),t("td",null,[l(Y,{client_id:e.c_id,client_name:e.c_name,email:e.c_email},null,8,["client_id","client_name","email"])]),t("td",null,[e.manager_id?(n(),m(Z,{key:0,rm_id:e.manager_id,rm_name:e.rm_name},null,8,["rm_id","rm_name"])):(n(),m(F,{key:1,size:"x-small",variant:"outlined"},{default:i(()=>[je]),_:1}))]),t("td",null,[l(ee,{client_id:e.c_id,mt_id:(L=e.from)==null?void 0:L.toString(),is_wallet:e.is_wallet},null,8,["client_id","mt_id","is_wallet"])]),t("td",null,d(("formatCurrency"in a?a.formatCurrency:r(R))(e.amount_req)),1),t("td",null,d(("formatCurrency"in a?a.formatCurrency:r(R))(e.amount_app)),1),t("td",null,d(e.withdraw_method),1),t("td",null,[l(te,{trans_status:e.status},null,8,["trans_status"])]),("hasAccess"in a?a.hasAccess:r(g))("view_withdraw_details_page")?(n(),c("td",Qe,[l(re,{color:"secondary",size:"x-small",variant:"elevated",class:"px-2 me-2 rounded",icon:"tabler-file-description",onClick:Je=>J(e)},null,8,["onClick"])])):T("",!0)])}),128)):(n(),m(me,{key:1,indeterminate:"",color:"primary"}))])]),_:1})):(n(),m(Ae,{key:1,type:"table-tbody"})),l(b,{class:"pt-2"},{default:i(()=>[t("div",qe,[l(De,{modelValue:y.value,"onUpdate:modelValue":o[7]||(o[7]=e=>y.value=e),"total-visible":a.$vuetify.display.smAndDown?3:5,length:Math.ceil(S.value/E.value)},null,8,["modelValue","total-visible","length"])])]),_:1})]),_:1})]),l(le,{isDialogVisible:D.value,"onUpdate:isDialogVisible":o[8]||(o[8]=e=>D.value=e),selectedTransaction:N.value},null,8,["isDialogVisible","selectedTransaction"])],64)}}};export{sl as default};
