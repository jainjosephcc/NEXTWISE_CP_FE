import{b as Re}from"./formatters-MfVJSZma.js";import{r as n,w as ee,E as _e,o as h,c as te,b as e,e as t,t as i,d as l,v as d,m as g,de as me,b0 as ge,ah as b,$ as S,F as ie,f as I,h as Se,y as G,bB as we,bg as Ae,x as ve,dq as Be,aV as ne}from"./index-B7DVBXb6.js";import{h as de}from"./permission-BvJbWOm-.js";import{_ as fe}from"./ConfirmDialog-CHCp6S9v.js";import{_ as be}from"./AppTextField-SOmV41uD.js";import{_ as Ue}from"./CustomMT5Chip-Cpw9joKl.js";import{_ as pe}from"./DialogCloseBtn-ByKsG3KU.js";import{m as re}from"./md5-B0uU80qf.js";import{$ as ae}from"./api-iWVA-fzn.js";import{V as Q}from"./VCard-DwrpuyUm.js";import{V as Ee}from"./VCardTitle-vKV3lDGn.js";import{V as Z}from"./VDivider-CxEbendv.js";import{V as ye}from"./VTable-THd5MxoR.js";import{V as Ve}from"./VForm-ufWByZ4U.js";import{V as M}from"./VCardText-Cz0O4UdD.js";import{V as se,a as O}from"./VRow-BrVMZuB9.js";import{V as he,a as ue}from"./VRadioGroup-CYHlhA3j.js";import{V as J}from"./VDialog-BiIRwhKC.js";import{_ as $e}from"./CustomTransactionStatusChip-OwrPJhy7.js";import{V as H}from"./VChip-B1ab4KKX.js";import{a as j,b as W,d as ke}from"./VList-D72edMu7.js";import{V as oe}from"./VAvatar-Ra1G3_lq.js";import{V as Oe}from"./VImg-BjgCukri.js";const qe=l("thead",null,[l("tr",null,[l("th",null,"MT5 ID"),l("th",null,"MT5 GROUP"),l("th",null,"TOTAL LB GIVEN"),l("th",null,"TOTAL NLB GIVEN")])],-1),Ne={class:"text-h4 mb-4"},ze=l("span",{class:"text-5xl font-weight-light"},"X",-1),Le={class:"text-h4 mb-4"},Ie={__name:"ApproveDepositTicketDialog",props:{selectedTransaction:{type:Object,required:!1},isDialogVisible:{type:Boolean,required:!0},transaction_id:{type:Number,default:null},amount:{type:Number,default:0}},emits:["update:isDialogVisible"],setup(Y,{emit:le}){const s=n(0),T=n(""),R=n(""),D=n(""),q=n([]),B=n(!1),C=n(!1),U=n(!1),A=n(""),N=n(""),F=n(""),w=n(""),$=n(!1),V=n(!0),L=n(0);let K=n(""),E=n("");n("");const f=Y,p=le,y=o=>{p("update:isDialogVisible",o)},r=async()=>{if(f.transaction_id!==void 0&&f.transaction_id!==null)try{const o=await ae(`getRequestBonusData/${f.transaction_id}`,{method:"GET",onResponseError({response:a}){console.log("API error response:",a)}});o&&Array.isArray(o.bonus_data)?q.value=o.bonus_data:console.error("Failed to fetch bonus or empty response")}catch(o){console.error("Error fetching bonus data:",o)}},X=async o=>{var x;if(o){$.value=!0;var a=String(f.selectedTransaction.client_id),_=String(f.selectedTransaction.mt_id),u=String(f.selectedTransaction.transaction_id);K.value=a+_+u,E.value=re(K.value);try{const v=await ae("/approveClientDepositTicketWithBonus",{method:"POST",body:{transId:u,approvedAmt:L.value,checksum:E.value,bonus_percentage:R.value,bonus_amount:D.value,bonus_type:s.value,action:1,comment:"DEPOSIT APP. CRM"},onResponseError({response:m}){A.value="Something Went Wrong!",N.value=m._data.message||"Unknown error",$.value=!1,C.value=!0}});v&&v.Success?(F.value="Approved!",w.value=v.message||"Deposit Request Approved Successfully!",U.value=!0):(A.value="Unexpected Response!",N.value=v.message||"The response format was not as expected.",C.value=!0)}catch(v){A.value="Something Went Wrong!",N.value=((x=v.data)==null?void 0:x.message)||"Unknown error",C.value=!0}finally{$.value=!1}}};ee(()=>f.transaction_id,async o=>{o!=null&&await r()}),ee([R,L],([o,a])=>{a&&o?D.value=a*(o/100):D.value="",a>0?V.value=!1:V.value=!0}),ee(()=>f.amount,o=>{o&&(T.value=o)}),_e(async()=>{f.transaction_id!==void 0&&f.transaction_id!==null&&await r(),f.amount!==void 0&&f.amount!==null&&(T.value=f.amount,L.value=f.amount)});const z=()=>{window.location.reload()};return(o,a)=>{const _=pe,u=Ue,x=be,v=fe;return h(),te(ie,null,[e(J,{width:o.$vuetify.display.smAndDown?"auto":800,"model-value":f.isDialogVisible,"onUpdate:modelValue":y},{default:t(()=>[e(_,{onClick:a[0]||(a[0]=m=>y(!1))}),e(Q,null,{default:t(()=>[e(Ee,null,{default:t(()=>[i("Approve / Reject Credit In Ticket")]),_:1}),e(Z),e(ye,{class:"text-no-wrap"},{default:t(()=>{var m,c,P;return[qe,l("tbody",null,[l("tr",null,[l("td",null,[e(u,{client_id:f.selectedTransaction.client_id,is_wallet:f.selectedTransaction.is_wallet,mt_id:f.selectedTransaction.mt_id},null,8,["client_id","is_wallet","mt_id"])]),l("td",null,d((m=q.value[0])==null?void 0:m.mt_group_name),1),l("td",null,d(("formatCurrency"in o?o.formatCurrency:g(me))((c=q.value[0])==null?void 0:c.total_l_bonus)),1),l("td",null,d(("formatCurrency"in o?o.formatCurrency:g(me))((P=q.value[0])==null?void 0:P.total_nl_bonus)),1)])])]}),_:1}),e(Z),e(Ve,{onSubmit:ge(()=>{},["prevent"])},{default:t(()=>[e(M,null,{default:t(()=>[e(se,null,{default:t(()=>[e(O,{cols:"6"},{default:t(()=>[e(x,{modelValue:T.value,"onUpdate:modelValue":a[1]||(a[1]=m=>T.value=m),label:"Requested Amount",suffix:"USD",disabled:""},null,8,["modelValue"])]),_:1}),e(O,{cols:"6"},{default:t(()=>[e(x,{modelValue:L.value,"onUpdate:modelValue":a[2]||(a[2]=m=>L.value=m),label:"Amount to be Approved",prefix:"$",type:"number"},null,8,["modelValue"])]),_:1})]),_:1}),e(se,null,{default:t(()=>[e(O,{cols:"12"},{default:t(()=>[e(he,{modelValue:s.value,"onUpdate:modelValue":a[3]||(a[3]=m=>s.value=m),inline:""},{default:t(()=>[e(ue,{label:"Losable Bonus",value:"0"}),e(ue,{label:"Non-losable Bonus",value:"1"})]),_:1},8,["modelValue"])]),_:1}),e(O,{cols:"4"},{default:t(()=>[e(x,{modelValue:R.value,"onUpdate:modelValue":a[4]||(a[4]=m=>R.value=m),label:"Bonus Percentage",suffix:"%"},null,8,["modelValue"])]),_:1}),e(O,{cols:"4"},{default:t(()=>[e(x,{modelValue:D.value,"onUpdate:modelValue":a[5]||(a[5]=m=>D.value=m),label:"Bonus Amount",suffix:"USD",disabled:""},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(M,{class:"d-flex justify-end gap-3"},{default:t(()=>[e(b,{color:"success",class:"me-2",loading:$.value,disabled:V.value,onClick:a[6]||(a[6]=m=>B.value=!0)},{default:t(()=>[i(" Approve Deposit "),e(S,{end:"",icon:"tabler-discount-check-filled"})]),_:1},8,["loading","disabled"]),e(b,{color:"secondary",onClick:a[7]||(a[7]=m=>y(!1))},{default:t(()=>[e(S,{start:"",icon:"tabler-circle-minus"}),i(" Cancel ")]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["width","model-value"]),e(v,{isDialogVisible:B.value,"onUpdate:isDialogVisible":a[8]||(a[8]=m=>B.value=m),onConfirm:X,"confirmation-question":"Do you want to approve this deposit?","cancel-title":"Cancelled","confirm-title":"Cancelled!"},null,8,["isDialogVisible"]),e(J,{modelValue:U.value,"onUpdate:modelValue":a[9]||(a[9]=m=>U.value=m),"max-width":"500"},{default:t(()=>[e(Q,null,{default:t(()=>[e(M,{class:"text-center px-10 py-6"},{default:t(()=>[e(b,{icon:"",variant:"outlined",color:"success",class:"my-4",style:{"block-size":"88px","inline-size":"88px","pointer-events":"none"}},{default:t(()=>[e(S,{icon:"tabler-check",size:"38"})]),_:1}),l("h1",Ne,d(F.value),1),l("p",null,d(w.value),1),e(b,{color:"success",onClick:z},{default:t(()=>[i(" OK ")]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),e(J,{modelValue:C.value,"onUpdate:modelValue":a[11]||(a[11]=m=>C.value=m),"max-width":"500"},{default:t(()=>[e(Q,null,{default:t(()=>[e(M,{class:"text-center px-10 py-6"},{default:t(()=>[e(b,{icon:"",variant:"outlined",color:"error",class:"my-4",style:{"block-size":"88px","inline-size":"88px","pointer-events":"none"}},{default:t(()=>[ze]),_:1}),l("h1",Le,d(A.value),1),l("p",null,d(N.value),1),e(b,{color:"success",onClick:a[10]||(a[10]=m=>C.value=!1)},{default:t(()=>[i(" OK ")]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])],64)}}},Me=l("thead",null,[l("tr",null,[l("th",null,"TOTAL LOSABLE BONUS GIVEN"),l("th",null,"TOTAL NON-LOSABLE BONUS GIVEN"),l("th",null,"GROUP")])],-1),Pe={class:"text-h4 mb-4"},je=l("span",{class:"text-5xl font-weight-light"},"X",-1),We={class:"text-h4 mb-4"},Ge={__name:"EditRequestBonusDialog",props:{isDialogVisible:{type:Boolean,required:!0},transaction_id:{type:Number,default:null},amount:{type:Number,default:0},selectedTransaction:{type:Object,default:()=>({})}},emits:["update:isDialogVisible"],setup(Y,{emit:le}){const s=n("0"),T=n(""),R=n(""),D=n(""),q=n(!1),B=n(!1),C=n(!1),U=n(""),A=n(""),N=n(""),F=n(""),w=n(!1),$=n(!1),V=n(""),L=n(""),K=n([]),E=n(!1),f=n(!1),p=Y,y=le,r=_=>{y("update:isDialogVisible",_)},X=async()=>{if(p.transaction_id!==void 0&&p.transaction_id!==null)try{const _=await ae(`getRequestBonusData/${p.transaction_id}`,{method:"GET",onResponseError({response:u}){console.log("API error response:",u)}});_&&Array.isArray(_.bonus_data)?K.value=_.bonus_data:console.error("Failed to fetch bonus or empty response")}catch(_){console.error("Error fetching bonus data:",_)}},z=async _=>{var u,x;if(_){w.value=!0;const v=String(p.selectedTransaction.client_id),m=String(p.selectedTransaction.mt_id),c=String(p.transaction_id);V.value=v+m+c,L.value=re(V.value).toString();try{const P=await ae("/processBonusRequest",{method:"POST",body:{trans_id:p.transaction_id,action:1,checksum:L.value,bonus_percentage:R.value,bonus_amount:D.value,bonus_type:s.value},onResponseError({response:ce}){U.value="Something Went Wrong !",A.value=ce._data.message}});if(P&&P.success)N.value="Success !",F.value=P.message||"Bonus Added to account",$.value=!0;else throw new Error(P.message||"Failed to process bonus request")}catch(P){U.value="Something Went Wrong !",A.value=((x=(u=P.response)==null?void 0:u.data)==null?void 0:x.message)||P.message}finally{w.value=!1}C.value=!0}},o=async _=>{var u;if(_){f.value=!0;const x=String(p.selectedTransaction.client_id),v=String(p.selectedTransaction.mt_id),m=String(p.transaction_id);V.value=x+v+m,L.value=re(V.value).toString();try{const c=await ae("/processBonusRequest",{method:"POST",body:{trans_id:p.transaction_id,action:0,checksum:L.value,bonus_percentage:R.value,bonus_amount:D.value,bonus_type:s.value},onResponseError({response:P}){U.value="Something Went Wrong !",A.value=P._data.message,f.value=!1,B.value=!0}});c&&c.success?(N.value="Rejected!",F.value=c.message||"Bonus Request Rejected Successfully!",C.value=!0):(U.value="Unexpected Response!",A.value=c.message||"The response format was not as expected.",B.value=!0)}catch(c){U.value="Something Went Wrong!",A.value=((u=c.data)==null?void 0:u.message)||"Unknown error",B.value=!0}finally{f.value=!1}C.value=!0}};ee(()=>p.transaction_id,async _=>{_!=null&&await X()}),ee([T,R],([_,u])=>{_&&u?D.value=_*(u/100):D.value=""}),ee(()=>p.isDialogVisible,_=>{_&&(R.value=p.selectedTransaction.bonus_percentage||"",D.value=R.value?(R.value/10).toFixed(2):"",T.value=p.amount||"")}),_e(async()=>{p.transaction_id!==void 0&&p.transaction_id!==null&&await X(),p.amount!==void 0&&p.amount!==null&&(T.value=p.amount)});const a=()=>{window.location.reload()};return(_,u)=>{const x=pe,v=be,m=fe;return h(),te(ie,null,[e(J,{width:_.$vuetify.display.smAndDown?"auto":800,"model-value":p.isDialogVisible,"onUpdate:modelValue":r},{default:t(()=>[e(x,{onClick:u[0]||(u[0]=c=>r(!1))}),e(Q,null,{default:t(()=>[e(M,null,{default:t(()=>[K.value.length?(h(),I(ye,{key:0,class:"text-no-wrap"},{default:t(()=>[Me,l("tbody",null,[(h(!0),te(ie,null,Se(K.value,c=>(h(),te("tr",{key:c.mt_id},[l("td",null,d(c.total_l_bonus),1),l("td",null,d(c.total_nl_bonus),1),l("td",null,d(c.mt_group_name),1)]))),128))])]),_:1})):G("",!0)]),_:1}),e(Z),e(Ve,{onSubmit:ge(()=>{},["prevent"])},{default:t(()=>[e(M,null,{default:t(()=>[e(se,null,{default:t(()=>[e(O,{cols:"12"},{default:t(()=>[e(he,{modelValue:s.value,"onUpdate:modelValue":u[1]||(u[1]=c=>s.value=c),inline:""},{default:t(()=>[e(ue,{label:"Losable Bonus",value:"0"}),e(ue,{label:"Non-losable Bonus",value:"1"})]),_:1},8,["modelValue"])]),_:1}),e(O,{cols:"4"},{default:t(()=>[e(v,{modelValue:T.value,"onUpdate:modelValue":u[2]||(u[2]=c=>T.value=c),label:"DEPOSITED AMOUNT",disabled:""},null,8,["modelValue"])]),_:1}),e(O,{cols:"4"},{default:t(()=>[e(v,{modelValue:R.value,"onUpdate:modelValue":u[3]||(u[3]=c=>R.value=c),label:"Bonus Percentage",suffix:"%"},null,8,["modelValue"])]),_:1}),e(O,{cols:"4"},{default:t(()=>[e(v,{modelValue:D.value,"onUpdate:modelValue":u[4]||(u[4]=c=>D.value=c),label:"Bonus Amount",suffix:"USD"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(M,{class:"d-flex justify-end gap-3"},{default:t(()=>[e(b,{color:"info",class:"me-2",loading:w.value,disabled:w.value,onClick:u[5]||(u[5]=c=>q.value=!0)},{default:t(()=>[i(" Approve "),e(S,{end:"",icon:"tabler-discount-check-filled"})]),_:1},8,["loading","disabled"]),e(b,{color:"error",loading:f.value,disabled:w.value,class:"me-2",onClick:u[6]||(u[6]=c=>E.value=!0)},{default:t(()=>[i(" Reject "),e(S,{end:"",icon:"tabler-circle-x"})]),_:1},8,["loading","disabled"])]),_:1})]),_:1})]),_:1})]),_:1},8,["width","model-value"]),e(m,{isDialogVisible:q.value,"onUpdate:isDialogVisible":u[7]||(u[7]=c=>q.value=c),onConfirm:z,"confirmation-question":"Do you want to  Approve this Bonus?","cancel-title":"Cancelled","confirm-title":"Cancelled!"},null,8,["isDialogVisible"]),e(m,{isDialogVisible:E.value,"onUpdate:isDialogVisible":u[8]||(u[8]=c=>E.value=c),onConfirm:o,"confirmation-question":"Are you sure to Reject this Bonus?","cancel-title":"Cancelled","confirm-title":"Cancelled!"},null,8,["isDialogVisible"]),e(J,{modelValue:C.value,"onUpdate:modelValue":u[9]||(u[9]=c=>C.value=c),"max-width":"500"},{default:t(()=>[e(Q,null,{default:t(()=>[e(M,{class:"text-center px-10 py-6"},{default:t(()=>[e(b,{icon:"",variant:"outlined",color:"success",class:"my-4",style:{"block-size":"88px","inline-size":"88px","pointer-events":"none"}},{default:t(()=>[e(S,{icon:"tabler-check",size:"38"})]),_:1}),l("h1",Pe,d(N.value),1),l("p",null,d(F.value),1),e(b,{color:"success",onClick:a},{default:t(()=>[i(" OK ")]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),e(J,{modelValue:B.value,"onUpdate:modelValue":u[11]||(u[11]=c=>B.value=c),"max-width":"500"},{default:t(()=>[e(Q,null,{default:t(()=>[e(M,{class:"text-center px-10 py-6"},{default:t(()=>[e(b,{icon:"",variant:"outlined",color:"error",class:"my-4",style:{"block-size":"88px","inline-size":"88px","pointer-events":"none"}},{default:t(()=>[je]),_:1}),l("h1",We,d(U.value),1),l("p",null,d(A.value),1),e(b,{color:"success",onClick:u[10]||(u[10]=c=>B.value=!1)},{default:t(()=>[i(" OK ")]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])],64)}}},Fe=l("thead",null,[l("tr",null,[l("th",null,"TOTAL LOSABLE BONUS GIVEN"),l("th",null,"TOTAL NON-LOSABLE BONUS GIVEN"),l("th",null,"GROUP")])],-1),Ke={class:"text-h4 mb-4"},He=l("span",{class:"text-5xl font-weight-light"},"X",-1),Xe={class:"text-h4 mb-4"},Qe={__name:"AddRequestBonusDialog",props:{selectedTransaction:{type:Object,required:!1},isDialogVisible:{type:Boolean,required:!0},transaction_id:{type:Number,default:null},amount:{type:Number,default:0}},emits:["update:isDialogVisible"],setup(Y,{emit:le}){const s=n("0"),T=n(""),R=n(""),D=n(""),q=n([]),B=n(!1),C=n(!1),U=n(!1),A=n(""),N=n(""),F=n(""),w=n(""),$=n(!1),V=Y,L=le,K=y=>{L("update:isDialogVisible",y)},E=async()=>{if(V.transaction_id!==void 0&&V.transaction_id!==null)try{const y=await ae(`getRequestBonusData/${V.transaction_id}`,{method:"GET",onResponseError({response:r}){console.log("API error response:",r)}});y&&Array.isArray(y.bonus_data)?q.value=y.bonus_data:console.error("Failed to fetch bonus or empty response")}catch(y){console.error("Error fetching bonus data:",y)}},f=async y=>{var r,X;if(y){$.value=!0;try{await ae("/submitBonusRequest",{method:"POST",body:{trans_id:V.transaction_id,bonus_percentage:R.value,bonus_type:s.value},onResponseError({response:o}){A.value="Something Went Wrong !",N.value=o._data.message,$.value=!1,C.value=!0}})&&(F.value="Success !",w.value="Bonus Requested Successfully !",$.value=!1,U.value=!0)}catch(z){A.value="Something Went Wrong !",N.value=((X=(r=z.response)==null?void 0:r.data)==null?void 0:X.message)||z.message,$.value=!1,C.value=!0}}};ee(()=>V.transaction_id,async y=>{y!=null&&await E()}),ee([T,R],([y,r])=>{y&&r?D.value=y*(r/100):D.value=""}),ee(()=>V.amount,y=>{T.value=y??""}),_e(async()=>{V.transaction_id!==void 0&&V.transaction_id!==null&&await E(),V.amount!==void 0&&V.amount!==null&&(T.value=V.amount)});const p=()=>{window.location.reload()};return(y,r)=>{const X=pe,z=be,o=fe;return h(),te(ie,null,[e(J,{width:y.$vuetify.display.smAndDown?"auto":800,"model-value":V.isDialogVisible,"onUpdate:modelValue":K},{default:t(()=>[e(X,{onClick:r[0]||(r[0]=a=>K(!1))}),e(Q,null,{default:t(()=>[e(M,null,{default:t(()=>[q.value.length?(h(),I(ye,{key:0,class:"text-no-wrap"},{default:t(()=>[Fe,l("tbody",null,[(h(!0),te(ie,null,Se(q.value,a=>(h(),te("tr",{key:a.mt_id},[l("td",null,d(a.total_l_bonus),1),l("td",null,d(a.total_nl_bonus),1),l("td",null,d(a.mt_group_name),1)]))),128))])]),_:1})):G("",!0)]),_:1}),e(Z),e(Ve,{onSubmit:ge(()=>{},["prevent"])},{default:t(()=>[e(M,null,{default:t(()=>[e(se,null,{default:t(()=>[e(O,{cols:"12"},{default:t(()=>[e(he,{modelValue:s.value,"onUpdate:modelValue":r[1]||(r[1]=a=>s.value=a),inline:""},{default:t(()=>[e(ue,{label:"Losable Bonus",value:"0"}),e(ue,{label:"Non-losable Bonus",value:"1"})]),_:1},8,["modelValue"])]),_:1}),e(O,{cols:"4"},{default:t(()=>[e(z,{modelValue:T.value,"onUpdate:modelValue":r[2]||(r[2]=a=>T.value=a),label:"DEPOSITED AMOUNT"},null,8,["modelValue"])]),_:1}),e(O,{cols:"4"},{default:t(()=>[e(z,{modelValue:R.value,"onUpdate:modelValue":r[3]||(r[3]=a=>R.value=a),label:"Bonus Percentage",suffix:"%"},null,8,["modelValue"])]),_:1}),e(O,{cols:"4"},{default:t(()=>[e(z,{modelValue:D.value,"onUpdate:modelValue":r[4]||(r[4]=a=>D.value=a),label:"Bonus Amount",suffix:"USD"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(M,{class:"d-flex justify-end gap-3"},{default:t(()=>[e(b,{color:"info",class:"me-2",loading:$.value,disabled:$.value,onClick:r[5]||(r[5]=a=>B.value=!0)},{default:t(()=>[i(" Request Bonus "),e(S,{end:"",icon:"tabler-discount-check-filled"})]),_:1},8,["loading","disabled"]),e(b,{color:"secondary",onClick:r[6]||(r[6]=a=>K(!1))},{default:t(()=>[e(S,{start:"",icon:"tabler-circle-minus"}),i("Cancel ")]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["width","model-value"]),e(o,{isDialogVisible:B.value,"onUpdate:isDialogVisible":r[7]||(r[7]=a=>B.value=a),onConfirm:f,"confirmation-question":"Do you want to request bonus?","cancel-title":"Cancelled","confirm-title":"Cancelled!"},null,8,["isDialogVisible"]),e(J,{modelValue:U.value,"onUpdate:modelValue":r[8]||(r[8]=a=>U.value=a),"max-width":"500"},{default:t(()=>[e(Q,null,{default:t(()=>[e(M,{class:"text-center px-10 py-6"},{default:t(()=>[e(b,{icon:"",variant:"outlined",color:"success",class:"my-4",style:{"block-size":"88px","inline-size":"88px","pointer-events":"none"}},{default:t(()=>[e(S,{icon:"tabler-check",size:"38"})]),_:1}),l("h1",Ke,d(F.value),1),l("p",null,d(w.value),1),e(b,{color:"success",onClick:p},{default:t(()=>[i(" OK ")]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),e(J,{modelValue:C.value,"onUpdate:modelValue":r[10]||(r[10]=a=>C.value=a),"max-width":"500"},{default:t(()=>[e(Q,null,{default:t(()=>[e(M,{class:"text-center px-10 py-6"},{default:t(()=>[e(b,{icon:"",variant:"outlined",color:"error",class:"my-4",style:{"block-size":"88px","inline-size":"88px","pointer-events":"none"}},{default:t(()=>[He]),_:1}),l("h1",Xe,d(A.value),1),l("p",null,d(N.value),1),e(b,{color:"success",onClick:r[9]||(r[9]=a=>C.value=!1)},{default:t(()=>[i(" OK ")]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])],64)}}},Je={__name:"CustomBonusStatusChip",props:{bonus_status:{type:Number,required:!0}},setup(Y){const le=T=>{switch(T){case 0:return"Bonus Requested";case 1:return"On Hold";case 2:return"Bonus Rejected";case 3:return"Bonus Approved";case 4:return"Bonus not Requested";default:return"Unknown"}},s=T=>{switch(T){case 0:return"primary";case 1:return"warning";case 2:return"error";case 3:return"success";case 4:return"secondary";default:return"Unknown"}};return(T,R)=>(h(),I(H,{label:"",color:s(Y.bonus_status),size:"small"},{default:t(()=>[i(d(le(Y.bonus_status)),1)]),_:1},8,["color"]))}},Ye={class:"d-flex flex-wrap justify-space-between flex-column rounded bg-var-theme-background flex-sm-row gap-6 pa-6 mb-6"},Ze=l("div",{class:"d-flex align-center app-logo mb-6"},[l("h6",{class:"app-logo-title"}," Deposit Ticket Details ")],-1),et={class:"d-flex flex-column"},tt={class:"d-flex align-center"},lt={class:"text-body-1"},at={class:"d-flex align-center gap-x-2"},st={class:"text-body-1"},nt={class:"d-flex align-center gap-x-2"},ot={class:"text-body-1"},it={class:"d-flex align-center gap-x-2"},ut={class:"text-body-1"},dt=l("h6",{class:"font-weight-medium me-4 text-overline mb-4"}," Deposited To: ",-1),rt={class:"d-flex align-center cursor-pointer outlined"},ct={key:1,class:"tabler-wallet v-icon notranslate v-theme--light"},mt={class:"text-base ms-2 text-h5"},ft=l("div",{class:"v-spacer"},null,-1),pt=l("h6",{class:"font-weight-medium me-4 text-overline mb-4"}," Details: ",-1),vt={class:"d-flex align-center"},_t={class:"text-body-1"},gt={class:"d-flex align-center"},bt={class:"text-body-1"},yt={class:"d-flex align-center"},Vt={class:"text-body-1"},ht={class:"d-flex align-center"},Tt={class:"text-body-1"},xt={class:"d-flex align-center"},Dt={class:"text-body-1"},Ct={class:"d-flex align-center"},wt={class:"text-body-1"},kt={class:"d-flex align-center"},St={class:"text-body-1"},Rt={class:"d-flex align-center"},At={class:"text-body-1"},Bt={class:"d-flex align-center"},Ut={class:"text-body-1"},Et={key:0,class:"d-flex justify-space-between flex-wrap flex-column flex-sm-row"},$t=l("div",{class:"mb-6 mb-sm-0"},null,-1),Ot={class:"w-100"},qt=l("td",{class:"font-weight-medium me-4 text-overline"}," Deal Id : ",-1),Nt={class:"font-weight-medium me-4 text-overline"},zt=l("td",{class:"font-weight-medium me-4 text-overline"}," Approved at : ",-1),Lt={class:"font-weight-medium me-4 text-overline"},It={class:"w-100"},Mt=l("td",{class:"font-weight-medium me-4 text-overline"}," Approved Amount : ",-1),Pt={class:"text-h4 mb-4"},jt=l("span",{class:"text-5xl font-weight-light"},"X",-1),Wt={class:"text-h4 mb-4"},pl={__name:"CLIENT_DepositTicketDialog",props:{selectedTransaction:{type:Object,required:!1},isDialogVisible:{type:Boolean,required:!0}},emits:["submit","update:isDialogVisible"],setup(Y,{emit:le}){const s=Y,T=le,R=n(structuredClone(we(s.selectedTransaction))),D=n(0);let q=n(""),B=n("");n("");const C=n(!1),U=n(!1),A=n(!1),N=n(!1),F=n(!1),w=n(!1),$=n(!1),V=n(!1);let L=n(""),K=n("");const E=n(!1);let f=n(""),p=n("");const y=async o=>{var x;if(o){w.value=!0;var a=String(s.selectedTransaction.client_id),_=String(s.selectedTransaction.mt_id),u=String(s.selectedTransaction.transaction_id);q.value=a+_+u,B.value=re(q.value);try{const v=await ae("/approveClientDepositTicket",{method:"POST",body:{transId:u,approvedAmt:D.value,checksum:B.value,action:1,comment:"DEPOSIT APP. CRM"},onResponseError({response:m}){f.value="Something Went Wrong!",p.value=m._data.message||"Unknown error",w.value=!1,E.value=!0}});v&&v.Success?(L.value="Approved!",K.value=v.message||"Deposit Request Approved Successfully!",V.value=!0):(f.value="Unexpected Response!",p.value=v.message||"The response format was not as expected.",E.value=!0)}catch(v){f.value="Something Went Wrong!",p.value=((x=v.data)==null?void 0:x.message)||"Unknown error",E.value=!0}finally{w.value=!1}}},r=async o=>{var x;if(o){$.value=!0;var a=String(s.selectedTransaction.client_id),_=String(s.selectedTransaction.mt_id),u=String(s.selectedTransaction.transaction_id);q.value=a+_+u,B.value=re(q.value);try{const v=await ae("/approveClientDepositTicket",{method:"POST",body:{transId:u,approvedAmt:D.value,checksum:B.value,action:0,comment:"DEPOSIT REJECTED"},onResponseError({response:m}){f.value="Something Went Wrong!",p.value=m._data.message||"Unknown error",$.value=!1,E.value=!0}});v&&v.Success?(L.value="Rejected!",K.value=v.result||"Deposit Request Rejected Successfully!",V.value=!0):(f.value="Unexpected Response!",p.value=v.message||"The response format was not as expected.",E.value=!0)}catch(v){f.value="Something Went Wrong!",p.value=((x=v.data)==null?void 0:x.message)||"Unknown error",E.value=!0}finally{$.value=!1}}};ee(s,()=>{R.value=structuredClone(we(s.selectedTransaction)),D.value=s.selectedTransaction.amount_in_usd});const X=async o=>{window.location.reload()},z=o=>{T("update:isDialogVisible",o)};return(o,a)=>{var P,ce,Te,xe,De,Ce;const _=pe,u=$e,x=fe,v=Qe,m=Ge,c=Ie;return h(),te(ie,null,[e(J,{width:o.$vuetify.display.smAndDown?"auto":800,"model-value":s.isDialogVisible,"onUpdate:modelValue":z},{default:t(()=>[e(_,{onClick:a[0]||(a[0]=k=>z(!1))}),e(Q,{class:"pa-6 pa-sm-10"},{default:t(()=>[l("div",Ye,[l("div",null,[Ze,e(j,{class:"p-0 m-0"},{prepend:t(()=>[e(oe,{color:"secondary",size:"35",variant:"tonal",rounded:"",icon:"tabler-user-square-rounded"})]),default:t(()=>[e(W,{class:"font-weight-medium ms-0 ps-0 text-h5"},{default:t(()=>[i(d(s.selectedTransaction.client_name),1)]),_:1}),e(ke,null,{default:t(()=>[i(d(s.selectedTransaction.email),1)]),_:1})]),_:1}),s.selectedTransaction.manager_id!=null?(h(),I(j,{key:0,class:"p-0 m-0"},{prepend:t(()=>[e(oe,{color:"secondary",size:"35",variant:"tonal",rounded:"",icon:"tabler-user-hexagon"})]),default:t(()=>[e(W,{class:"font-weight-medium ms-0 ps-0"},{default:t(()=>[i(d(s.selectedTransaction.rm_name),1)]),_:1}),e(ke,null,{default:t(()=>[i(" Relationship Manager ")]),_:1})]),_:1})):G("",!0)]),l("div",et,[e(j,null,{prepend:t(()=>[e(oe,{size:"38",color:"secondary",variant:"tonal",class:"me-1",rounded:""},{default:t(()=>[e(S,{icon:"tabler-ticket",size:"22"})]),_:1})]),append:t(()=>[l("div",tt,[l("div",lt,[e(H,{variant:"outlined"},{default:t(()=>[i(" #"+d(s.selectedTransaction.transaction_id),1)]),_:1})])])]),default:t(()=>[e(W,{class:"font-weight-medium me-4 text-overline"},{default:t(()=>[i(" TICKET ID ")]),_:1})]),_:1}),e(j,null,{prepend:t(()=>[e(oe,{size:"38",color:"secondary",variant:"tonal",class:"me-1",rounded:""},{default:t(()=>[e(S,{icon:"tabler-calendar-month",size:"22"})]),_:1})]),append:t(()=>[l("div",at,[l("div",st,[e(H,{variant:"outlined"},{default:t(()=>[i(d(("formatDate"in o?o.formatDate:g(Re))(s.selectedTransaction.created_at)),1)]),_:1})])])]),default:t(()=>[e(W,{class:"font-weight-medium me-4 text-overline"},{default:t(()=>[i(" CREATED ON ")]),_:1})]),_:1}),e(j,null,{prepend:t(()=>[e(oe,{size:"38",color:"secondary",variant:"tonal",class:"me-1",rounded:""},{default:t(()=>[e(S,{icon:"tabler-clock-hour-4",size:"22"})]),_:1})]),append:t(()=>[l("div",nt,[l("div",ot,[e(H,{variant:"outlined"},{default:t(()=>[i(d(("formatTime"in o?o.formatTime:g(Ae))(s.selectedTransaction.created_at)),1)]),_:1})])])]),default:t(()=>[e(W,{class:"font-weight-medium me-4 text-overline"},{default:t(()=>[i(" CREATED TIME ")]),_:1})]),_:1}),e(j,null,{prepend:t(()=>[e(oe,{size:"38",color:"secondary",variant:"tonal",class:"me-1",rounded:""},{default:t(()=>[e(S,{icon:"tabler-activity",size:"22"})]),_:1})]),append:t(()=>[l("div",it,[l("div",ut,[e(u,{trans_status:s.selectedTransaction.status},null,8,["trans_status"])])])]),default:t(()=>[e(W,{class:"font-weight-medium me-4 text-overline"},{default:t(()=>[i(" DEPOSIT STATUS ")]),_:1})]),_:1})])]),e(se,null,{default:t(()=>[e(O,{class:"text-no-wrap"},{default:t(()=>[dt,l("li",rt,[e(oe,{rounded:"",size:"25",color:"primary",variant:"tonal",class:"p-2"},{default:t(()=>[s.selectedTransaction.is_wallet===0?(h(),I(Oe,{key:0,src:"/images/mt5.png",style:{width:"10px",padding:"5px"}})):(h(),te("i",ct))]),_:1}),l("div",mt,d(s.selectedTransaction.mt_id),1),ft])]),_:1}),e(O,{class:"text-no-wrap"},{default:t(()=>[pt,e(j,{class:"my-0 py-0"},{append:t(()=>[l("div",vt,[l("div",_t,[e(H,{variant:"outlined"},{default:t(()=>[i(d(s.selectedTransaction.mt_group_name),1)]),_:1})])])]),default:t(()=>[e(W,{class:"font-weight-medium me-4 text-overline"},{default:t(()=>[i(" MT GROUP ")]),_:1})]),_:1}),e(j,{class:"my-0 py-0"},{append:t(()=>[l("div",gt,[l("div",bt,[e(H,{variant:"outlined"},{default:t(()=>[i(d(s.selectedTransaction.deposit_method),1)]),_:1})])])]),default:t(()=>[e(W,{class:"font-weight-medium me-4 text-overline"},{default:t(()=>[i(" Deposit Method ")]),_:1})]),_:1}),e(j,{class:"my-0 py-0"},{append:t(()=>[l("div",yt,[l("div",Vt,[e(H,{variant:"outlined"},{default:t(()=>[i(d(s.selectedTransaction.currency),1)]),_:1})])])]),default:t(()=>[e(W,{class:"font-weight-medium me-4 text-overline"},{default:t(()=>[i(" Deposited Currency ")]),_:1})]),_:1}),e(j,{class:"my-0 py-0"},{append:t(()=>[l("div",ht,[l("div",Tt,[e(H,{variant:"outlined"},{default:t(()=>[i(d(s.selectedTransaction.amount)+" "+d(s.selectedTransaction.currency),1)]),_:1})])])]),default:t(()=>[e(W,{class:"font-weight-medium me-4 text-overline"},{default:t(()=>[i(" Amount (Dep. Currency) ")]),_:1})]),_:1}),e(Z,{class:"my-2 border-dashed"}),e(j,{class:"my-0 py-0"},{append:t(()=>[l("div",xt,[l("div",Dt,[e(Je,{bonus_status:s.selectedTransaction.bonus_status},null,8,["bonus_status"])])])]),default:t(()=>[e(W,{class:"font-weight-medium me-4 text-overline"},{default:t(()=>[i(" BONUS STATUS ")]),_:1})]),_:1}),s.selectedTransaction.bonus_status!==4?(h(),I(j,{key:0,class:"my-0 py-0"},{append:t(()=>[l("div",Ct,[l("div",wt,[e(H,{variant:"outlined"},{default:t(()=>[i(d(s.selectedTransaction.bonus_percentage)+" % ",1)]),_:1})])])]),default:t(()=>[e(W,{class:"font-weight-medium me-4 text-overline"},{default:t(()=>[i(" BONUS PERCENTAGE REQUESTED ")]),_:1})]),_:1})):G("",!0),s.selectedTransaction.bonus_status!==4?(h(),I(j,{key:1,class:"my-0 py-0"},{append:t(()=>[l("div",kt,[l("div",St,[e(H,{variant:"outlined"},{default:t(()=>[i(d(s.selectedTransaction.bonus_type==0?"L BONUS":"NL BONUS"),1)]),_:1})])])]),default:t(()=>[e(W,{class:"font-weight-medium me-4 text-overline"},{default:t(()=>[i(" REQUESTED BONUS TYPE ")]),_:1})]),_:1})):G("",!0),e(Z,{class:"my-2 border-dashed"}),e(j,{class:"my-0 py-0"},{append:t(()=>[l("div",Rt,[l("div",At,[e(H,{variant:"outlined"},{default:t(()=>[i(d(s.selectedTransaction.client_note),1)]),_:1})])])]),default:t(()=>[e(W,{class:"font-weight-medium me-4 text-overline"},{default:t(()=>[i(" CLIENT NOTE ")]),_:1})]),_:1}),e(j,{class:"my-0 py-0"},{append:t(()=>[l("div",Bt,[l("div",Ut,[e(H,{variant:"outlined"},{default:t(()=>[i(d(("formatCurrency"in o?o.formatCurrency:g(me))(s.selectedTransaction.amount_in_usd)),1)]),_:1})])])]),default:t(()=>[e(W,{class:"font-weight-medium me-4 text-overline"},{default:t(()=>[i(" Amount in USD ")]),_:1})]),_:1}),e(Z,{class:"my-2 border-dashed"})]),_:1})]),_:1}),e(Z,{class:"mt-6 border-dashed"}),e(Z,{class:"mt-1 mb-6 border-dashed"}),s.selectedTransaction.status===3?(h(),te("div",Et,[$t,l("div",null,[l("table",Ot,[l("tbody",null,[l("tr",null,[qt,l("td",{class:ve(o.$vuetify.locale.isRtl?"text-start":"text-end")},[l("h6",Nt," #"+d(s.selectedTransaction.dealid),1)],2)]),l("tr",null,[zt,l("td",{class:ve(o.$vuetify.locale.isRtl?"text-start":"text-end")},[l("h6",Lt,d(("formatFullDateTime"in o?o.formatFullDateTime:g(Be))(s.selectedTransaction.updated_at)),1)],2)])])]),e(Z,{class:"mt-4 mb-3"}),l("table",It,[l("tbody",null,[l("tr",null,[Mt,l("td",{class:ve(o.$vuetify.locale.isRtl?"text-start":"text-end")},[e(H,{size:"default",color:"secondary",variant:"tonal",class:"text-h5"},{default:t(()=>[i(d(("formatCurrency"in o?o.formatCurrency:g(me))(s.selectedTransaction.approved_amount)),1)]),_:1})],2)])])])])])):G("",!0),s.selectedTransaction.status===0?(h(),I(se,{key:1},{default:t(()=>[e(O,{class:"col-10 text-sm-end"},{default:t(()=>[("hasAccess"in o?o.hasAccess:g(de))("approve_deposit_ticket")?(h(),I(b,{key:0,class:"me-2",loading:g(w),disabled:g(w),color:"primary",onClick:a[1]||(a[1]=k=>F.value=!0)},{default:t(()=>[i(" Approve Deposit "),e(S,{end:"",icon:"tabler-checkbox"})]),_:1},8,["loading","disabled"])):G("",!0),("hasAccess"in o?o.hasAccess:g(de))("reject_deposit_ticket")?(h(),I(b,{key:1,color:"error",loading:g($),disabled:g(w),class:"me-2",onClick:a[2]||(a[2]=k=>U.value=!0)},{default:t(()=>[i(" Reject "),e(S,{end:"",icon:"tabler-circle-x"})]),_:1},8,["loading","disabled"])):G("",!0),("hasAccess"in o?o.hasAccess:g(de))("request_for_bonus")&&s.selectedTransaction.bonus_status===4?(h(),I(b,{key:2,color:"info",class:"me-2",onClick:a[3]||(a[3]=k=>A.value=!0),disabled:g(w)},{default:t(()=>[i(" Request Bonus "),e(S,{end:"",icon:"tabler-discount-check-filled"})]),_:1},8,["disabled"])):G("",!0),e(b,{color:"secondary",onClick:a[4]||(a[4]=k=>z(!1))},{default:t(()=>[e(S,{start:"",icon:"tabler-circle-minus"}),i(" Cancel ")]),_:1})]),_:1})]),_:1})):G("",!0),s.selectedTransaction.status===3?(h(),I(se,{key:2},{default:t(()=>[e(O,{class:"col-10 text-sm-end"},{default:t(()=>[("hasAccess"in o?o.hasAccess:g(de))("request_for_bonus")&&s.selectedTransaction.bonus_status===4?(h(),I(b,{key:0,color:"info",class:"me-2",onClick:a[5]||(a[5]=k=>A.value=!0),disabled:g(w)},{default:t(()=>[i(" Request Bonus "),e(S,{end:"",icon:"tabler-discount-check-filled"})]),_:1},8,["disabled"])):G("",!0),s.selectedTransaction.bonus_status===4?(h(),I(b,{key:1,color:"secondary",onClick:a[6]||(a[6]=k=>z(!1))},{default:t(()=>[e(S,{start:"",icon:"tabler-circle-minus"}),i(" Cancel ")]),_:1})):G("",!0)]),_:1})]),_:1})):G("",!0),s.selectedTransaction.bonus_status===0&&s.selectedTransaction.status===3?(h(),I(se,{key:3},{default:t(()=>[e(O,{class:"col-10 text-sm-end"},{default:t(()=>[("hasAccess"in o?o.hasAccess:g(de))("approve_reject_bonus")?(h(),I(b,{key:0,class:"me-2",loading:g(w),disabled:g(w),color:"warning",onClick:a[7]||(a[7]=k=>N.value=!0)},{default:t(()=>[i(" Approve/Reject Bonus "),e(S,{end:"",icon:"tabler-pencil-plus"})]),_:1},8,["loading","disabled"])):G("",!0),e(b,{color:"secondary",onClick:a[8]||(a[8]=k=>z(!1))},{default:t(()=>[e(S,{start:"",icon:"tabler-circle-minus"}),i(" Cancel ")]),_:1})]),_:1})]),_:1})):G("",!0),e(x,{isDialogVisible:g(C),"onUpdate:isDialogVisible":a[9]||(a[9]=k=>ne(C)?C.value=k:null),onConfirm:y,"confirmation-question":"Are you sure to Approve this Deposit?","cancel-title":"Cancelled","confirm-title":"Cancelled!"},null,8,["isDialogVisible"]),e(x,{isDialogVisible:g(U),"onUpdate:isDialogVisible":a[10]||(a[10]=k=>ne(U)?U.value=k:null),onConfirm:r,"confirmation-question":"Are you sure to Reject this Deposit?","cancel-title":"Cancelled","confirm-title":"Cancelled!"},null,8,["isDialogVisible"]),e(J,{modelValue:g(V),"onUpdate:modelValue":a[11]||(a[11]=k=>ne(V)?V.value=k:null),"max-width":"500"},{default:t(()=>[e(Q,null,{default:t(()=>[e(M,{class:"text-center px-10 py-6"},{default:t(()=>[e(b,{icon:"",variant:"outlined",color:"success",class:"my-4",style:{"block-size":"88px","inline-size":"88px","pointer-events":"none"}},{default:t(()=>[e(S,{icon:"tabler-check",size:"38"})]),_:1}),l("h1",Pt,d(g(L)),1),l("p",null,d(g(K)),1),e(b,{color:"success",onClick:X},{default:t(()=>[i(" OK ")]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"]),e(J,{modelValue:g(E),"onUpdate:modelValue":a[12]||(a[12]=k=>ne(E)?E.value=k:null),"max-width":"500"},{default:t(()=>[e(Q,null,{default:t(()=>[e(M,{class:"text-center px-10 py-6"},{default:t(()=>[e(b,{icon:"",variant:"outlined",color:"error",class:"my-4",style:{"block-size":"88px","inline-size":"88px","pointer-events":"none"}},{default:t(()=>[jt]),_:1}),l("h1",Wt,d(g(f)),1),l("p",null,d(g(p)),1),e(b,{color:"success",onClick:X},{default:t(()=>[i(" Ok ")]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["width","model-value"]),e(v,{isDialogVisible:g(A),"onUpdate:isDialogVisible":a[13]||(a[13]=k=>ne(A)?A.value=k:null),selectedTransaction:s.selectedTransaction,transaction_id:(P=s.selectedTransaction)==null?void 0:P.transaction_id,amount:(ce=s.selectedTransaction)==null?void 0:ce.amount_in_usd},null,8,["isDialogVisible","selectedTransaction","transaction_id","amount"]),e(m,{isDialogVisible:g(N),"onUpdate:isDialogVisible":a[14]||(a[14]=k=>ne(N)?N.value=k:null),selectedTransaction:s.selectedTransaction,transaction_id:(Te=s.selectedTransaction)==null?void 0:Te.transaction_id,amount:(xe=s.selectedTransaction)==null?void 0:xe.amount_in_usd},null,8,["isDialogVisible","selectedTransaction","transaction_id","amount"]),e(c,{isDialogVisible:g(F),"onUpdate:isDialogVisible":a[15]||(a[15]=k=>ne(F)?F.value=k:null),selectedTransaction:s.selectedTransaction,transaction_id:(De=s.selectedTransaction)==null?void 0:De.transaction_id,amount:(Ce=s.selectedTransaction)==null?void 0:Ce.amount_in_usd},null,8,["isDialogVisible","selectedTransaction","transaction_id","amount"])],64)}}};export{pl as _};
